{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/moment/locale sync ^\\.\\/.*$","webpack:///./src/i18n.js","webpack:///./src/components/mixins.js","webpack:///./src/components/app.js","webpack:///./src/components/homepage.js","webpack:///./src/components/login/login-pages.js","webpack:///./src/components/login/login-page.js","webpack:///./src/components/login/password.js","webpack:///./src/components/login/oidc.js","webpack:///./src/components/resource/resources.js","webpack:///./src/components/resource/manager.js","webpack:///./src/components/resource/custom.js","webpack:///./src/components/resource/set.js","webpack:///./src/components/resource/list.js","webpack:///./src/components/resource/thumbnail.js","webpack:///./src/components/resource/form.js","webpack:///./src/components/resource/polymorphic_form.js","webpack:///./src/components/pages/mixins.js","webpack:///./src/components/pages/list.js","webpack:///./src/components/pages/thumbnail.js","webpack:///./src/components/fields/fields.js","webpack:///./src/components/fields/barcode.js","webpack:///./src/components/fields/boolean.js","webpack:///./src/components/fields/color.js","webpack:///./src/components/fields/datetime.js","webpack:///./src/components/fields/mail.js","webpack:///./src/components/fields/integer.js","webpack:///./src/components/fields/function.js","webpack:///./src/components/fields/json.js","webpack:///./src/components/fields/float.js","webpack:///./src/components/fields/decimal.js","webpack:///./src/components/fields/password.js","webpack:///./src/components/fields/rich-text.js","webpack:///./src/components/fields/selection.js","webpack:///./src/components/fields/statusbar.js","webpack:///./src/components/fields/string.js","webpack:///./src/components/fields/timestamp.js","webpack:///./src/components/fields/url.js","webpack:///./src/components/fields/relationship/many2one.js","webpack:///./src/components/fields/relationship/one2many.js","webpack:///./src/components/fields/relationship/many2many.js","webpack:///./src/components/fields/index.js","webpack:///./src/store/modules/global.js","webpack:///./src/store/modules/resource.js","webpack:///./src/store/modules/index.js","webpack:///./src/store/index.js","webpack:///./src/router.js","webpack:///./src/plugins/dispatch.js","webpack:///./src/main.js","webpack:///./src/components/factory.js","webpack:///./src/components/fields/common.js","webpack:///./src/store/modules/data.js","webpack:///./src/components/fields/relationship/common.js","webpack:///./src/components/resource/helper.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","map","webpackContext","req","id","webpackContextResolve","e","Error","code","keys","resolve","Vue","use","VueI18n","i18nConf","locale","fallbackLocale","messages","en","error","components","login","appbar","button","username","password","logout","header","search","new","edit","cancel","save","delete","notFound","return","previous","next","browse","total","created","updated","deleted","linked","unlinked","fields","common","required","yesno","yes","no","json","invalid","relationship","no_more","not_found","i18n","defineComponent","computed","logo","this","format_url","methods","path","formatDate","date","timezone","$store","state","global","userTimeZone","moment","document","documentElement","lang","tz","format","translate","label","regex","RegExp","res","exec","$t","template","isOpen","extend","space_code","route","params","space_menus","menus","root_menus","selectMenu","menu","$router","commit","loggedIn","getters","call_login_page","userName","user_menus","routerPush","logOut","axios","post","then","$dispatchAll","catch","console","props","isLoading","onClickMenu","resource","query","tags","order_by","orders","_","filters","JSON","stringify","menuId","undefined","url","newtable","open","location","replace","method","model","response","history","breadcrumb","backToResource","index","_event","isOpenLeft","set","newvalue","left_menus","mounted","loginPages","loginPageComponentName","loginPage","loginPageComponent","errors","is_not_clickable","logIn","redirect","$route","href","oidc","resources","rest_api_url","api_params","toString","revert_modification","row","$emit","api_formater","obj","pks","forEach","pk","getEntry","news","getNewEntries","perPage","modulus","page_count","Math","floor","start","page","end","concat","manager","changed_rows","change","__x2m_state","number_created","number_updated","number_deleted","number_linked","number_unlinked","goToNew","choice","goToPage","options","__change_state","templates","form_card_header_template","form_card","form_card_body_template","form_card_footer_template","part","getResource","getBreadcrumbInfo","updateQueryString","load_resource","provide","currentResource","children_is_modified","resourceComponents","type","updateModifyState","assign","updateChangeState","getEntryWrapper","getNewEntry","getNewEntryWrapper","getNewEntriesWrapper","pushInBreadcrumb","$refs","icon","createData","changes","updateData","patch","saved","deleteData","goToPreviousBreadcrumbElement","clearChange","goToList","breadcrumb_lenght","action","get_entry","uuid","get_new_entry","get_new_entries","inject","multi_header_component_name","config","page_header_component_name","pagination_size","readonly","isReadonly","additional_filter","build_additional_filter","selectors","x2m_resource","remote_columns","local_columns","each","zip","cols","newquery","revertData","modifyState","_data","update_change_object","watch","custom","subResource","getResourceComponent","resourceManager","can_create","can_update","can_delete","forms","__uuid","waiting_value","resource_id","can_read","loadAsyncData","refresh","hidden_columns","filter","headers","safe_eval","hidden","title","toggleHiddenColumn","field","list","get_call_information","resource_type","server_call","$parent","loading","thumbnail","partIsReadonly","tabs","refreshCallbacks","headerComponentName","goToEdit","updateReadOnly","refresh_fields","getDefault","parse","fieldname","deleteEntry","callback","parse_query","uuidv1","registryRefreshCallback","indexOf","form","getClass","class","isHidden","getIsReadonly","readonlyParams","entry","identifiers","pk2string","polymorphicform","onPageChange","filterSearch","tag_list_open","filteredDataArray","f","opt","goToNewPolymorphic","updateFilters","option","removeFilter","toggleTag","tag","removeTag","sortingPriority","defaultSortField","order","defaultSortOrder","perpage","default_filters","values","default_tags","default_header_component_name","selectedEntries","row_state","row_state_callback","offset","sort","join","selected","find","op","startsWith","v","from_x2m_with_a_newest_parent","_index","style_class","rest_api_formater","rest_api_params","limit","preop","onSort","existingPriority","onSortingPriorityRemoved","priority","regexWithOption","regexWithoutOption","parseInt","split","queryStringValue","queryStringName","resWithOption","match","resWithoutOption","trim","prevous_target","previousBrowserTarget","next_target","nextBrowserTarget","goToPreviousPage","target","goToNextPage","isCheckable","is_checkable","checkedRows","checkedElements","barcode","VueBarcode","computed_boolean_checked","safe_eval_boolean","checked","component_template","slot","boolean","base","listTemplate","thumbnailTemplate","updateValue","color","datetime","readonly_value","Date","updateDateTimeValue","toISOString","email","integer","format_min_max","function","parsed","jsonb","raw_value","getType","isRequired","isJsonInvalid","getMessage","$i18n","Number","toFixed","rounded","float","step","pow","rounded_value","decimal","reveal","richtext","VueEditor","selections","colors","selection","formated_value","getSelections","getStates","added","isDone","isDangerous","statusbar","string","timestamp","display","onClick","openResource","many2one","onSelect","beforeOnChange","RelationShipX2MList","one2many","RelationShipX2MThumbnail","x2mconfig","addState","actions","o2m_revert","__revert","o2m_add","o2m_update","o2m_delete","relation","many2many","isClosable","onUnSelect","many2manytags","component","defaultState","appLoaded","authenticated","previous_route","isLoaded","mutations","PushBreadcrumb","ClearBreadcrumbFrom","PopBreadcrumb","pop","ClearBreadcrumb","SET_LOGIN_PAGE","login_page","LOGIN","LOGOUT","UPDATE_PREVIOUS_ROUTE","UPDATE_ROOT_MENUS","UPDATE_USER_MENUS","UPDATE_GLOBAL","entries","OPEN_LEFT_MENU","UPDATE_CURRENT_LEFT_MENUS","UPDATE_RESOURCES","definitions","definition","updateDefinition","String","UPDATE_RESOURCE_TOGGLE_HIDDEN_COLUMN","Vuex","debug","process","storeDef","strict","createStore","Store","Router","routes","meta","requiresAuth","children","createRouter","store","router","beforeEach","to","from","proceed","matched","some","record","fullPath","install","datas","notify","$notify","locales","setLocaleMessage","reload","productionTip","Notifications","Buefy","defaultIconPack","startFuretUI","elementId","elementExists","getElementById","log","createComponents","sync","PluginDispatch","$mount","componentNames","elementName","declaration","klass","prototypes","getPrototypeFor","otherElementName","getComponentPrototype","mixins","includes","valueOf","toLowerCase","condition","now","toDate","eval","getTooltip","tooltip","tooltipPosition","tooltip_position","writable","writableParams","debounce","merge","sortBy","state_changes","ref_key","Array","isArray","val","copy_val","isMatch","element","style","slot_fields","get_slot_fields_for","getKey","getStyle","isFetching","tmp_value","choices","onChange","_onChange","getMoreAsyncData","filter_by","item","finally","eval_counter","count","functional","render","createElement","context","visible","attrs","counter"],"mappings":"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","file":"js/app.75bf5a5b.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","var map = {\n\t\"./af\": \"2bfb\",\n\t\"./af.js\": \"2bfb\",\n\t\"./ar\": \"8e73\",\n\t\"./ar-dz\": \"a356\",\n\t\"./ar-dz.js\": \"a356\",\n\t\"./ar-kw\": \"423e\",\n\t\"./ar-kw.js\": \"423e\",\n\t\"./ar-ly\": \"1cfd\",\n\t\"./ar-ly.js\": \"1cfd\",\n\t\"./ar-ma\": \"0a84\",\n\t\"./ar-ma.js\": \"0a84\",\n\t\"./ar-sa\": \"8230\",\n\t\"./ar-sa.js\": \"8230\",\n\t\"./ar-tn\": \"6d83\",\n\t\"./ar-tn.js\": \"6d83\",\n\t\"./ar.js\": \"8e73\",\n\t\"./az\": \"485c\",\n\t\"./az.js\": \"485c\",\n\t\"./be\": \"1fc1\",\n\t\"./be.js\": \"1fc1\",\n\t\"./bg\": \"84aa\",\n\t\"./bg.js\": \"84aa\",\n\t\"./bm\": \"a7fa\",\n\t\"./bm.js\": \"a7fa\",\n\t\"./bn\": \"9043\",\n\t\"./bn-bd\": \"9686\",\n\t\"./bn-bd.js\": \"9686\",\n\t\"./bn.js\": \"9043\",\n\t\"./bo\": \"d26a\",\n\t\"./bo.js\": \"d26a\",\n\t\"./br\": \"6887\",\n\t\"./br.js\": \"6887\",\n\t\"./bs\": \"2554\",\n\t\"./bs.js\": \"2554\",\n\t\"./ca\": \"d716\",\n\t\"./ca.js\": \"d716\",\n\t\"./cs\": \"3c0d\",\n\t\"./cs.js\": \"3c0d\",\n\t\"./cv\": \"03ec\",\n\t\"./cv.js\": \"03ec\",\n\t\"./cy\": \"9797\",\n\t\"./cy.js\": \"9797\",\n\t\"./da\": \"0f14\",\n\t\"./da.js\": \"0f14\",\n\t\"./de\": \"b469\",\n\t\"./de-at\": \"b3eb\",\n\t\"./de-at.js\": \"b3eb\",\n\t\"./de-ch\": \"bb71\",\n\t\"./de-ch.js\": \"bb71\",\n\t\"./de.js\": \"b469\",\n\t\"./dv\": \"598a\",\n\t\"./dv.js\": \"598a\",\n\t\"./el\": \"8d47\",\n\t\"./el.js\": \"8d47\",\n\t\"./en-au\": \"0e6b\",\n\t\"./en-au.js\": \"0e6b\",\n\t\"./en-ca\": \"3886\",\n\t\"./en-ca.js\": \"3886\",\n\t\"./en-gb\": \"39a6\",\n\t\"./en-gb.js\": \"39a6\",\n\t\"./en-ie\": \"e1d3\",\n\t\"./en-ie.js\": \"e1d3\",\n\t\"./en-il\": \"7333\",\n\t\"./en-il.js\": \"7333\",\n\t\"./en-in\": \"ec2e\",\n\t\"./en-in.js\": \"ec2e\",\n\t\"./en-nz\": \"6f50\",\n\t\"./en-nz.js\": \"6f50\",\n\t\"./en-sg\": \"b7e9\",\n\t\"./en-sg.js\": \"b7e9\",\n\t\"./eo\": \"65db\",\n\t\"./eo.js\": \"65db\",\n\t\"./es\": \"898b\",\n\t\"./es-do\": \"0a3c\",\n\t\"./es-do.js\": \"0a3c\",\n\t\"./es-mx\": \"b5b7\",\n\t\"./es-mx.js\": \"b5b7\",\n\t\"./es-us\": \"55c9\",\n\t\"./es-us.js\": \"55c9\",\n\t\"./es.js\": \"898b\",\n\t\"./et\": \"ec18\",\n\t\"./et.js\": \"ec18\",\n\t\"./eu\": \"0ff2\",\n\t\"./eu.js\": \"0ff2\",\n\t\"./fa\": \"8df4\",\n\t\"./fa.js\": \"8df4\",\n\t\"./fi\": \"81e9\",\n\t\"./fi.js\": \"81e9\",\n\t\"./fil\": \"d69a\",\n\t\"./fil.js\": \"d69a\",\n\t\"./fo\": \"0721\",\n\t\"./fo.js\": \"0721\",\n\t\"./fr\": \"9f26\",\n\t\"./fr-ca\": \"d9f8\",\n\t\"./fr-ca.js\": \"d9f8\",\n\t\"./fr-ch\": \"0e49\",\n\t\"./fr-ch.js\": \"0e49\",\n\t\"./fr.js\": \"9f26\",\n\t\"./fy\": \"7118\",\n\t\"./fy.js\": \"7118\",\n\t\"./ga\": \"5120\",\n\t\"./ga.js\": \"5120\",\n\t\"./gd\": \"f6b4\",\n\t\"./gd.js\": \"f6b4\",\n\t\"./gl\": \"8840\",\n\t\"./gl.js\": \"8840\",\n\t\"./gom-deva\": \"aaf2\",\n\t\"./gom-deva.js\": \"aaf2\",\n\t\"./gom-latn\": \"0caa\",\n\t\"./gom-latn.js\": \"0caa\",\n\t\"./gu\": \"e0c5\",\n\t\"./gu.js\": \"e0c5\",\n\t\"./he\": \"c7aa\",\n\t\"./he.js\": \"c7aa\",\n\t\"./hi\": \"dc4d\",\n\t\"./hi.js\": \"dc4d\",\n\t\"./hr\": \"4ba9\",\n\t\"./hr.js\": \"4ba9\",\n\t\"./hu\": \"5b14\",\n\t\"./hu.js\": \"5b14\",\n\t\"./hy-am\": \"d6b6\",\n\t\"./hy-am.js\": \"d6b6\",\n\t\"./id\": \"5038\",\n\t\"./id.js\": \"5038\",\n\t\"./is\": \"0558\",\n\t\"./is.js\": \"0558\",\n\t\"./it\": \"6e98\",\n\t\"./it-ch\": \"6f12\",\n\t\"./it-ch.js\": \"6f12\",\n\t\"./it.js\": \"6e98\",\n\t\"./ja\": \"079e\",\n\t\"./ja.js\": \"079e\",\n\t\"./jv\": \"b540\",\n\t\"./jv.js\": \"b540\",\n\t\"./ka\": \"201b\",\n\t\"./ka.js\": \"201b\",\n\t\"./kk\": \"6d79\",\n\t\"./kk.js\": \"6d79\",\n\t\"./km\": \"e81d\",\n\t\"./km.js\": \"e81d\",\n\t\"./kn\": \"3e92\",\n\t\"./kn.js\": \"3e92\",\n\t\"./ko\": \"22f8\",\n\t\"./ko.js\": \"22f8\",\n\t\"./ku\": \"2421\",\n\t\"./ku.js\": \"2421\",\n\t\"./ky\": \"9609\",\n\t\"./ky.js\": \"9609\",\n\t\"./lb\": \"440c\",\n\t\"./lb.js\": \"440c\",\n\t\"./lo\": \"b29d\",\n\t\"./lo.js\": \"b29d\",\n\t\"./lt\": \"26f9\",\n\t\"./lt.js\": \"26f9\",\n\t\"./lv\": \"b97c\",\n\t\"./lv.js\": \"b97c\",\n\t\"./me\": \"293c\",\n\t\"./me.js\": \"293c\",\n\t\"./mi\": \"688b\",\n\t\"./mi.js\": \"688b\",\n\t\"./mk\": \"6909\",\n\t\"./mk.js\": \"6909\",\n\t\"./ml\": \"02fb\",\n\t\"./ml.js\": \"02fb\",\n\t\"./mn\": \"958b\",\n\t\"./mn.js\": \"958b\",\n\t\"./mr\": \"39bd\",\n\t\"./mr.js\": \"39bd\",\n\t\"./ms\": \"ebe4\",\n\t\"./ms-my\": \"6403\",\n\t\"./ms-my.js\": \"6403\",\n\t\"./ms.js\": \"ebe4\",\n\t\"./mt\": \"1b45\",\n\t\"./mt.js\": \"1b45\",\n\t\"./my\": \"8689\",\n\t\"./my.js\": \"8689\",\n\t\"./nb\": \"6ce3\",\n\t\"./nb.js\": \"6ce3\",\n\t\"./ne\": \"3a39\",\n\t\"./ne.js\": \"3a39\",\n\t\"./nl\": \"facd\",\n\t\"./nl-be\": \"db29\",\n\t\"./nl-be.js\": \"db29\",\n\t\"./nl.js\": \"facd\",\n\t\"./nn\": \"b84c\",\n\t\"./nn.js\": \"b84c\",\n\t\"./oc-lnc\": \"167b\",\n\t\"./oc-lnc.js\": \"167b\",\n\t\"./pa-in\": \"f3ff\",\n\t\"./pa-in.js\": \"f3ff\",\n\t\"./pl\": \"8d57\",\n\t\"./pl.js\": \"8d57\",\n\t\"./pt\": \"f260\",\n\t\"./pt-br\": \"d2d4\",\n\t\"./pt-br.js\": \"d2d4\",\n\t\"./pt.js\": \"f260\",\n\t\"./ro\": \"972c\",\n\t\"./ro.js\": \"972c\",\n\t\"./ru\": \"957c\",\n\t\"./ru.js\": \"957c\",\n\t\"./sd\": \"6784\",\n\t\"./sd.js\": \"6784\",\n\t\"./se\": \"ffff\",\n\t\"./se.js\": \"ffff\",\n\t\"./si\": \"eda5\",\n\t\"./si.js\": \"eda5\",\n\t\"./sk\": \"7be6\",\n\t\"./sk.js\": \"7be6\",\n\t\"./sl\": \"8155\",\n\t\"./sl.js\": \"8155\",\n\t\"./sq\": \"c8f3\",\n\t\"./sq.js\": \"c8f3\",\n\t\"./sr\": \"cf1e\",\n\t\"./sr-cyrl\": \"13e9\",\n\t\"./sr-cyrl.js\": \"13e9\",\n\t\"./sr.js\": \"cf1e\",\n\t\"./ss\": \"52bd\",\n\t\"./ss.js\": \"52bd\",\n\t\"./sv\": \"5fbd\",\n\t\"./sv.js\": \"5fbd\",\n\t\"./sw\": \"74dc\",\n\t\"./sw.js\": \"74dc\",\n\t\"./ta\": \"3de5\",\n\t\"./ta.js\": \"3de5\",\n\t\"./te\": \"5cbb\",\n\t\"./te.js\": \"5cbb\",\n\t\"./tet\": \"576c\",\n\t\"./tet.js\": \"576c\",\n\t\"./tg\": \"3b1b\",\n\t\"./tg.js\": \"3b1b\",\n\t\"./th\": \"10e8\",\n\t\"./th.js\": \"10e8\",\n\t\"./tk\": \"5aff\",\n\t\"./tk.js\": \"5aff\",\n\t\"./tl-ph\": \"0f38\",\n\t\"./tl-ph.js\": \"0f38\",\n\t\"./tlh\": \"cf75\",\n\t\"./tlh.js\": \"cf75\",\n\t\"./tr\": \"0e81\",\n\t\"./tr.js\": \"0e81\",\n\t\"./tzl\": \"cf51\",\n\t\"./tzl.js\": \"cf51\",\n\t\"./tzm\": \"c109\",\n\t\"./tzm-latn\": \"b53d\",\n\t\"./tzm-latn.js\": \"b53d\",\n\t\"./tzm.js\": \"c109\",\n\t\"./ug-cn\": \"6117\",\n\t\"./ug-cn.js\": \"6117\",\n\t\"./uk\": \"ada2\",\n\t\"./uk.js\": \"ada2\",\n\t\"./ur\": \"5294\",\n\t\"./ur.js\": \"5294\",\n\t\"./uz\": \"2e8c\",\n\t\"./uz-latn\": \"010e\",\n\t\"./uz-latn.js\": \"010e\",\n\t\"./uz.js\": \"2e8c\",\n\t\"./vi\": \"2921\",\n\t\"./vi.js\": \"2921\",\n\t\"./x-pseudo\": \"fd7e\",\n\t\"./x-pseudo.js\": \"fd7e\",\n\t\"./yo\": \"7f33\",\n\t\"./yo.js\": \"7f33\",\n\t\"./zh-cn\": \"5c3a\",\n\t\"./zh-cn.js\": \"5c3a\",\n\t\"./zh-hk\": \"49ab\",\n\t\"./zh-hk.js\": \"49ab\",\n\t\"./zh-mo\": \"3a6c\",\n\t\"./zh-mo.js\": \"3a6c\",\n\t\"./zh-tw\": \"90ea\",\n\t\"./zh-tw.js\": \"90ea\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"4678\";","import Vue from 'vue';\nimport VueI18n from 'vue-i18n';\n\nVue.use(VueI18n);\n\nexport const i18nConf = {\n  locale: 'en',\n  fallbackLocale: 'en',\n  messages: {\n    en: {\n      error: 'Error',\n      components: {\n        login: {\n          appbar: 'Log in',\n          button: 'Log in',\n          username: 'User name',\n          password: 'Password',\n        },\n        logout: {\n          button: 'Log out',\n        },\n        header: {\n          search: 'Search',\n          new: 'New',\n          edit: 'Edit',\n          cancel: 'Cancel',\n          save: 'Save',\n          apply: 'Apply',\n          delete: 'Delete',\n          notFound: 'No result found',\n          return: 'Return',\n          previous: 'Previous',\n          next: 'Next',\n          browse: 'Browse',\n          total: 'Total',\n          created: 'Created',\n          updated: 'Updated',\n          deleted: 'Deleted',\n          linked: 'Linked',\n          unlinked: 'Unlinked',\n        },\n        fields: {\n          common: {\n            required: 'This is a required field',\n          },\n          yesno: {\n            yes: 'Yes',\n            no: 'No',\n          },\n          json: {\n            invalid: 'Json is invalid',\n          },\n          relationship: {\n            no_more: 'No more datas found.',\n            not_found: 'No data found with current filter.',\n          },\n        },\n      },\n    },\n  },\n};\n\nexport const i18n = new VueI18n(i18nConf);\n","import moment from 'moment-timezone';\nimport { defineComponent } from './factory';\n\ndefineComponent('mixin-logo', {\n  prototype: {\n    computed: {\n      logo() {\n        return this.format_url('/furet-ui/logo');\n      },\n    },\n    methods: {\n      format_url(path) {\n        if (process.env.VUE_APP_API_REST_URL) {\n          return `${process.env.VUE_APP_API_REST_URL}${path}`;\n        }\n        return path\n      },\n    },\n  },\n});\n\ndefineComponent('date-display', {\n  prototype: {\n    methods: {\n      formatDate(date) {\n        if (date) {\n          const timezone = this.$store.state.global.userTimeZone;\n          moment.locale(document.documentElement.lang);\n          return moment(date).tz(timezone).format('LLL');\n        }\n        return '';\n      },\n    },\n  },\n});\n\ndefineComponent('i18n-translate', {\n  prototype: {\n    methods: {\n      translate(label) {\n        const regex = new RegExp( \"^i18n\\\\((.*)\\\\)$\" )\n        const res = regex.exec(label)\n        if (res !== null) {\n          return this.$t(res[1])\n        }\n        return label;\n      },\n    },\n  },\n});\n","import axios from 'axios';\nimport _ from 'underscore';\nimport { defineComponent } from './factory';\n\ndefineComponent('app', {\n  template: `\n    <div id=\"furet-ui-app\">\n      <furet-ui-appbar />\n      <notifications position=\"top center\"/>\n      <router-view v-bind:key=\"$route.fullPath\"></router-view>\n      <furet-ui-footer />\n    </div>`,\n});\n\ndefineComponent('furet-ui-appbar', {\n  template: `\n    <header class=\"hero is-primary\">\n      <furet-ui-appbar-header />\n      <furet-ui-appbar-body />\n      <furet-ui-appbar-footer />\n    </header>\n  `,\n});\n\ndefineComponent('furet-ui-appbar-header', {\n  template: `\n    <b-navbar type=\"is-primary\">\n      <template #brand>\n        <furet-ui-appbar-header-brand />\n      </template>\n      <template #start>\n        <furet-ui-appbar-header-menus />\n      </template>\n      <template #end>\n        <furet-ui-appbar-header-user />\n      </template>\n    </b-navbar>\n  `,\n  prototype: {\n    data() {\n      return {\n        isOpen: false,\n      };\n    },\n  },\n});\n\ndefineComponent('furet-ui-appbar-body', {\n  template: `\n    <div class=\"hero-body\">\n      <div class=\"container has-text-centered\">\n        <h1 class=\"title\">\n          Furet UI\n        </h1>\n        <p class=\"subtitle\">\n          Web Client for all your AnyBlok backend\n        </p>\n      </div>\n    </div>\n  `,\n});\n\ndefineComponent('furet-ui-appbar-footer', {\n  template: `\n    <div class=\"hero-foot\" />\n  `,\n});\n\ndefineComponent('furet-ui-appbar-header-brand', {\n  template: `\n    <b-navbar-item tag=\"router-link\" :to=\"{ path: '/' }\">\n      <img class=\"image\" v-bind:src=\"logo\" />\n    </b-navbar-item>\n  `,\n  extend: ['mixin-logo'],\n});\n\ndefineComponent('furet-ui-appbar-header-menus', {\n  template: `\n    <div class=\"navbar-start\">\n      <b-navbar-item v-for=\"menu in space_menus\" v-on:click=\"selectMenu(menu)\" tab=\"dir\" :active=\"menu.code === space_code ? true : false\">\n          <button :class=\"['button', 'is-primary', menu.code === space_code ? 'is-active' : '']\">\n            <b-icon\n              v-bind:icon=\"menu.icon.code\"\n              v-bind:type=\"menu.icon.type\">\n            </b-icon>\n            <span>{{ $t(menu.label) }}</span>\n          </button>\n      </b-navbar-item>\n    </div>\n  `,\n  prototype: {\n    computed: {\n      space_code () {\n        return this.$store.state.route.params.code;\n      },\n      space_menus () {\n        const menus = this.$store.state.global.root_menus;\n        return menus;\n      }\n    },\n    methods: {\n      selectMenu (menu) {\n        this.$router.push(menu.path);\n        this.$store.commit(\"ClearBreadcrumb\");\n        this.$store.commit(\"CLEAR_CHANGE\");\n      }\n    }\n  },\n});\n\ndefineComponent('furet-ui-appbar-header-user', {\n  template: `\n    <div>\n      <furet-ui-appbar-header-logged-user v-if=\"loggedIn\" />\n      <furet-ui-appbar-header-unlogged-user v-else />\n    </div>\n  `,\n  prototype: {\n    computed: {\n      loggedIn () {\n        return this.$store.getters.loggedIn;\n      },\n    },\n  },\n});\n\ndefineComponent('furet-ui-appbar-header-unlogged-user', {\n  template: `\n    <b-navbar-item tag=\"div\">\n      <div class=\"buttons\">\n        <a class=\"button is-light\" @click=\"call_login_page\">\n          {{ $t('components.login.appbar') }}\n        </a>\n      </div>\n    </b-navbar-item>\n  `,\n  prototype: {\n    methods: {\n      call_login_page () {\n        this.$router.push({path: '/login'});\n      },\n    },\n  },\n});\n\ndefineComponent('furet-ui-appbar-header-logged-user', {\n  template: `\n    <b-navbar-dropdown :label=\"userName\" hoverable >\n      <b-navbar-item v-for=\"menu in user_menus\" :key=\"menu.label\">\n        <a v-on:click=\"routerPush(menu.path)\" class=\"button is-primary is-inverted is-fullwidth\">\n          {{ translate(menu.label) }}\n        </a>\n      </b-navbar-item>\n      <b-navbar-item>\n        <a v-on:click=\"logOut\" class=\"button is-primary is-inverted is-fullwidth\">\n          {{ $t('components.logout.button') }}\n        </a>\n      </b-navbar-item>\n    </b-navbar-dropdown>\n  `,\n  extend: ['i18n-translate'],\n  prototype: {\n    computed: {\n      userName () {\n        return this.$store.state.global.userName;\n      },\n      user_menus() {\n        return this.$store.state.global.user_menus;\n      },\n    },\n    methods: {\n      call_login_page () {\n        this.$router.push({path: '/login'});\n      },\n      routerPush (path) {\n        this.$router.push({path});\n      },\n      logOut() {\n        axios.post('/furet-ui/logout')\n          .then((result) => {\n            this.$dispatchAll(result.data);\n          })\n          .catch((error) => {\n            console.error(error);\n          })\n      },\n    },\n  },\n});\n\ndefineComponent('furet-ui-footer', {\n  template: `\n    <footer class=\"footer\">\n      <div class=\"content has-text-centered is-success\">\n        <p>\n          <strong>Furet UI</strong> by <a href=\"https://github.com/jssuzanne\">Jean-Sbastien Suzanne</a>. \n          The source code is licensed <a href=\"http://opensource.org/licenses/MPL-2.0\">MPL-2.0</a> and \n          is available on <a href=\"https://github.com/AnyBlok/furet_ui\">Github</a>.\n        </p>\n      </div>\n    </footer>\n  `,\n});\n\ndefineComponent('furet-ui-menu', {\n    template: `\n      <ul class=\"menu-list\">\n        <b-loading v-bind:active.sync=\"isLoading\"></b-loading>\n        <li v-for=\"menu in menus\">\n            <a v-on:click=\"onClickMenu(menu)\"\n               v-bind:class=\"[menu.id == menuId ? 'is-active' : '']\"\n            >\n              <span v-if=\"menu.label\">\n                  {{ $t(menu.label) }}\n              </span>\n            </a>\n            <furet-ui-menu\n                v-if=\"(menu.children || []).length != 0\"\n                v-bind:menus=\"menu.children || []\"\n                v-bind:menuId=\"menuId\"\n                v-bind:code=\"code\"\n            />\n        </li>\n      </ul>\n    `,\n    prototype: {\n      props: ['menus', 'menuId', 'code'],\n      data () {\n        return {\n          isLoading: false,\n        }\n      },\n      methods: {\n        onClickMenu (menu) {\n          if (!!menu.resource == true) {\n            // TODO CLEAR DATA\n            const query = {};\n            if (menu.tags) query.tags = menu.tags\n            if (menu.order_by) query.orders = menu.order_by\n            if (_.keys(menu.filters).length) {\n              query.filters = JSON.stringify(menu.filters);\n            }\n            this.$router.push({\n              name: 'resource', \n              params: {code: this.code, menuId: menu.id, id: menu.resource},\n              query,\n            });\n            this.$store.commit(\"ClearBreadcrumb\");\n            this.$store.commit(\"CLEAR_CHANGE\");\n          } else if (menu.url !== undefined) {\n            this.$store.commit(\"ClearBreadcrumb\");\n            this.$store.commit(\"CLEAR_CHANGE\");\n            if (menu.newtable) window.open(menu.url)\n            else location.replace(menu.url)\n          } else if (menu.method !== undefined) {\n            const params = {};\n            this.isLoading = true;\n            axios.post(`/furet-ui/resource/0/model/${menu.model}/call/${menu.method}`, params)\n              .then((response) => {\n                this.isLoading = false;\n                this.$dispatchAll(response.data)\n              })\n              .catch(() => {\n                this.isLoading = false;\n              });\n          }\n        }\n      }\n    }\n});\n\n/**\n * furet-ui-breadcrumb is used to display a navigational aid to keep track\n * and maintain awareness of the user location.\n *\n * Its state is saved in an Array to the `global.breadcrumb` vuex store.\n * Each element is an Object::\n *\n *  {\n *     icon: \"home\",  // a fontAwesome icon name https://fontawesome.com/\n *     label: \"Home\", // Name of the element in the breadcrumb\n *     route: Object  // A vue-router route which is saved to restore when\n *                    // user want's to come back.\n *   }\n */\ndefineComponent(\"furet-ui-breadcrumb\", {\n  template: `\n  <nav class=\"breadcrumb has-succeeds-separator\" aria-label=\"breadcrumbs\">\n    <ul>\n      <li v-for=\"(item, index) in history\" :key=\"index\">\n        <a v-on:click=\"backToResource(index, $event)\">\n          <b-icon\n            v-if=\"item.icon\"\n            :icon=\"item.icon\"\n            size=\"is-small\" />\n          <span>{{ item.label }}</span>\n        </a>\n      </li>\n    </ul>\n  </nav>\n  `,\n  prototype: {\n    computed: {\n      history () {\n        return this.$store.state.global.breadcrumb;\n      }\n    },\n    methods: {\n      backToResource: function(index, _event) {\n        this.$router.push(this.$store.state.global.breadcrumb[index].route);\n        this.$store.commit(\"ClearBreadcrumbFrom\", index);\n        this.$store.commit(\"CLEAR_CHANGE\");\n      }\n    }\n  }\n});\n\ndefineComponent('furet-ui-space', {\n  template: `\n    <div \n        class=\"columns is-gapless\"\n        v-bind:style=\"{marginTop: '5px'}\"\n    >\n      <div v-if=\"isOpenLeft && left_menus.length > 0\" class=\"column is-one-quarter is-half-mobile\">\n        <aside class=\"menu\" v-bind:style=\"{padding: '5px'}\">\n          <furet-ui-menu \n            v-bind:menus=\"left_menus\" \n            v-bind:menuId=\"menuId\" \n            v-bind:code=\"code\"\n          />\n        </aside>\n      </div>\n      <div class=\"column\" v-bind:style=\"{paddingLeft: '10px', paddingRight: '10px'}\">\n        <nav class=\"level\">\n          <div class=\"level-left\">\n            <div class=\"level-item\">\n              <a class=\"button\" v-on:click=\"isOpenLeft = !isOpenLeft\" v-if=\"left_menus.length > 0\">\n                <i class=\"fa fa-bars fa-2x\" aria-hidden=\"true\"></i>\n              </a>\n            </div>\n            <div class=\"level-item\">\n              <furet-ui-breadcrumb/>\n            </div>\n          </diV>\n        </nav>\n        <router-view v-bind:key=\"$route.fullPath\"></router-view>\n      </div>\n    </div>\n  `,\n  prototype: {\n    props: ['code', 'menuId'],\n    computed: {\n      isOpenLeft: {\n        get () {\n          return this.$store.state.global.isOpenLeft;\n        },\n        set (newvalue) {\n          this.$store.commit('OPEN_LEFT_MENU', newvalue);\n        },\n      },\n      left_menus () {\n        return this.$store.state.global.left_menus;\n      },\n    },\n    mounted() {\n      axios.get(`furet-ui/space/${this.code}`).then((result) => {\n        this.$dispatchAll(result.data);\n      });\n    }\n  },\n});\n","import { defineComponent } from './factory';\n\ndefineComponent('homepage', {\n  template: `\n    <div class=\"container has-text-centered\">\n      <h1 class=\"title\">Welcome in Furet UI</h1>\n      <div class=\"column is-half is-offset-one-quarter\">\n        <img class=\"image\" v-bind:src=\"logo\" alt=\"Logo\">\n      </div>\n    </div>\n  `,\n  extend: ['mixin-logo'],\n});\n","export const loginPages = {};\nexport default {\n    loginPages,\n}\n","import  {loginPages}  from './login-pages';\nimport { defineComponent } from '../factory';\n\ndefineComponent('furet-ui-waiting-login-page', {\n  template: `\n    <div class=\"container\"> \n        <strong>Waiting loading component</strong>\n    </div>\n  `,\n});\n\ndefineComponent('furet-ui-login-page-not-found', {\n  template: `\n    <div class=\"container\"> \n        <strong>Login page '{{ name }}' not found</strong>\n    </div>\n  `,\n  prototype: {\n    props: ['name'],\n  },\n});\n\ndefineComponent('furet-ui-login', {\n  template: `\n    <component \n      v-bind:is=\"loginPageComponent\" \n      v-bind:name=\"loginPageComponentName\" \n    />`,\n  prototype: {\n    computed: {\n      loginPageComponentName () {\n        return this.$store.state.global.loginPage;\n      },\n      loginPageComponent () {\n        const loginPage = this.loginPageComponentName;\n        if (loginPage === undefined) return 'furet-ui-waiting-resource';\n        if (loginPages[loginPage] !== undefined) return loginPages[loginPage];\n        return 'furet-ui-login-page-not-found';\n      },\n    },\n  },\n});\n","import axios from \"axios\";\nimport { defineComponent } from \"../factory\";\nimport { loginPages } from \"./login-pages\";\n\ndefineComponent(\"furet-ui-login-password\", {\n  template: `\n    <div class=\"container has-text-centered\">\n      <form v-on:submit=\"logIn\">\n         <furet-ui-page-errors v-bind:errors=\"errors\" />\n         <b-field v-bind:label=\"$t('components.login.username')\">\n           <b-input v-model=\"username\" expanded></b-input>\n         </b-field>\n         <b-field v-bind:label=\"$t('components.login.password')\">\n           <b-input v-model=\"password\" type=\"password\" expanded password-reveal></b-input>\n         </b-field>\n         <br />\n         <div class=\"buttons\">\n           <b-button \n             type=\"is-primary\" \n             native-type=\"submit\" \n             expanded\n             v-bind:disabled=\"is_not_clickable\"\n           >\n           {{ $t('components.login.button') }}\n           </b-button>\n         </div>\n      </form>\n    </div>\n  `,\n  prototype: {\n    data() {\n      return {\n        username: \"\",\n        password: \"\",\n        errors: [],\n      };\n    },\n    computed: {\n      is_not_clickable() {\n        if (!this.username) return true;\n        if (!this.password) return true;\n        return false;\n      },\n    },\n    methods: {\n      logIn() {\n        if (this.is_not_clickable) return;\n        this.errors = [];\n        axios\n          .post(\"/furet-ui/login\", {\n            login: this.username,\n            password: this.password,\n            redirect: this.$route.query.redirect,\n          })\n          .then((result) => {\n            this.$dispatchAll(result.data);\n          })\n          .catch((error) => {\n            this.errors = [error];\n          });\n      },\n    },\n  },\n});\n\nloginPages.password = \"furet-ui-login-password\";\n","import axios from \"axios\";\nimport { defineComponent } from \"../factory\";\nimport { loginPages } from \"./login-pages\";\n\ndefineComponent(\"furet-ui-login-oidc\", {\n  template: `\n    <div class=\"container has-text-centered\">\n        <furet-ui-page-errors v-bind:errors=\"errors\" />\n        <b-button \n          type=\"is-primary\" \n          @click=\"logIn\"\n        >Connect with Gitlab</b-button>\n    </div>\n  `,\n  prototype: {\n    data() {\n      return {\n        errors: [],\n      };\n    },\n    computed: {},\n    methods: {\n      logIn() {\n        this.errors = [];\n        axios\n          .post(\"/furet-ui/oidc/login\", {\n            redirect: this.$route.query.redirect,\n          })\n          .then((result) => {\n            document.location.href = result.data;\n          })\n          .catch((error) => {\n            this.errors = [error];\n          });\n      },\n    },\n  },\n});\n\nloginPages.oidc = \"furet-ui-login-oidc\";\n","import { defineComponent } from '../factory';\nexport const resources = {};\nexport default {\n    resources,\n}\n\n\ndefineComponent('furet-ui-resource-with-search', {\n  extend: ['furet-ui-resource', 'i18n-translate'],\n  prototype: {\n    props: ['id', 'manager'],\n    computed: {\n      rest_api_url () {\n        return `/furet-ui/resource/${this.id}/crud`;\n      },\n      api_params () {\n        return {\n          'context[model]': this.resource.model,\n          'context[fields]': this.resource.fields.toString(),\n        }\n      }\n    },\n    methods: {\n      revert_modification(row){\n        this.$emit(\"revert-data\", row)\n      },\n      api_formater (obj, data) {\n        this.$dispatchAll(data.data);\n        let res = [];\n        if(data.pks === undefined) data.pks = [];\n        if(data.total === undefined) data.total = 0;\n\n        data.pks.forEach(pk => {\n          res.push(this.getEntry(this.resource.model, pk))\n        });\n        const news = this.getNewEntries(this.resource.model);\n        const total = data.total + news.length;\n        if (res.length < obj.perPage){\n          const modulus = data.total % obj.perPage;\n          const page_count = Math.floor(data.total / obj.perPage) + 1;\n          let start = ((obj.page - page_count) * obj.perPage);\n          if(start > 0 ){\n            start -= modulus;\n          }\n          const end = start + obj.perPage - res.length;\n          obj.data = res.concat(news.slice(start, end));\n        } else {\n          obj.data = res;\n        }\n        data.total = total;\n        obj.total = total;\n\n        let created = 0;\n        let updated = 0;\n        let deleted = 0;\n        let linked = 0;\n        let unlinked = 0;\n\n        (this.manager.changed_rows || []).forEach(change => {\n          switch (change.__x2m_state) {\n            case 'ADDED':\n              created++;\n              break;\n            case 'UPDATED':\n              updated++;\n              break;\n            case 'DELETED':\n              deleted++;\n              break;\n            case 'LINKED':\n              linked++;\n              break;\n            case 'UNLINKED':\n              unlinked++;\n              break;\n          }\n        })\n        obj.number_created = created;\n        obj.number_updated = updated;\n        obj.number_deleted = deleted;\n        obj.number_linked = linked;\n        obj.number_unlinked = unlinked;\n      },\n      goToNew(choice) {\n        this.$emit('go-to-new', choice);\n      },\n      goToPage(row, options) {\n        if(row.__change_state !== \"delete\") this.$emit('go-to-page', row, options);\n      },\n    },\n  },\n});\n\n\ndefineComponent('furet-ui-resource-with-ssr', {\n  extend: ['furet-ui-resource', 'i18n-translate'],\n  prototype: {\n    props: ['id', 'manager'],\n    data () {\n      return {\n        templates: {},\n      };\n    },\n    computed: {\n      form_card_header_template () {\n        return this.form_card('header_template');\n      },\n      form_card_body_template () {\n        return this.form_card('body_template');\n      },\n      form_card_footer_template () {\n        return this.form_card('footer_template');\n      },\n    },\n    methods: {\n      form_card (part) {\n        if (this.templates[part] !== undefined) return this.templates[part];\n        const template = {\n          template: '<div></div>',\n          name: `${part}_${this.resource.id}`,\n          props: ['data', 'resource'],\n        }\n        if (this.resource[part]) {\n            template.template = this.resource[part];\n            this.templates[part] = template;\n        }\n        return template;\n      },\n    },\n  },\n});\n","import _ from 'underscore';\nimport Vue from 'vue';\nimport axios from 'axios';\nimport  {resources}  from './resources';\nimport { defineComponent } from '../factory';\nimport { update_change_object } from \"../../store/modules/data\";\n\ndefineComponent('furet-ui-waiting-resource', {\n  template: `\n    <div class=\"container\"> \n        <strong>Waiting loading component</strong>\n    </div>\n  `,\n});\n\ndefineComponent('furet-ui-resource-not-found', {\n  template: `\n    <div class=\"container\"> \n        <strong>Resource type '{{ type }}' not found</strong>\n    </div>\n  `,\n  prototype: {\n    props: ['type']\n  },\n});\n\ndefineComponent('furet-ui-resource', {\n  prototype: {\n    props: ['id'],\n    computed: {\n      resource () {\n        return this.getResource(this.id);\n      },\n    },\n    methods: {\n      /** This method should be implement in subclass to return\n       * label and icon to be displayed in breadcrumb\n       *\n       * @return {Object} {label: \"Label to display in breadcrumb\", icon: \"list\"} -\n       *    Where `label` and `icon` are String.\n       *    `icon` is a https://fontawesome.com icon name\n       */\n      getBreadcrumbInfo() {\n        throw new Error(\n          `You must implement this method **getBreadcrumbInfo** in subclass,\n          it should return a dict:\n          {label: \"Label to display in breadcrumb\", icon: \"list\"}`\n        );\n      },\n      getResource (id) {\n        return this.$store.state.resource[id];\n      },\n      updateQueryString (query) {\n        this.$emit('update-query-string', query);\n      },\n      load_resource (id) {\n        axios\n          .get(`furet-ui/resource/${id}`).then((result) => {\n            this.$dispatchAll(result.data);\n          })\n          .catch(() => {\n            //console.error(error)\n          });\n      },\n    },\n    provide: function () {\n      return {\n        currentResource: this,\n      }\n    },\n  },\n});\n\ndefineComponent('furet-ui-resource-manager', {\n  extend: ['furet-ui-resource'],\n  prototype: {\n    data () {\n      return {\n        manager: {\n          children_is_modified: false,\n        },\n        errors: [],\n      };\n    },\n    computed: {\n      resourceComponents () {\n        if (this.resource === undefined) return 'furet-ui-waiting-resource';\n        if (resources[this.resource.type] !== undefined) return resources[this.resource.type];\n        return 'furet-ui-resource-not-found';\n      },\n    },\n    methods: {\n      updateModifyState (state) {\n        const children_is_modified = state;\n        this.manager = Object.assign({}, this.manager, { children_is_modified });\n      }\n    },\n    provide: function () {\n      return {\n        updateChangeState: this.updateChangeState,\n        updateModifyState: this.updateModifyState,\n        getEntry: this.getEntryWrapper,\n        getNewEntry: this.getNewEntryWrapper,\n        getNewEntries: this.getNewEntriesWrapper,\n      }\n    },\n  },\n});\n\ndefineComponent('furet-ui-space-resource-manager', {\n  template: `\n    <div>\n      <furet-ui-page-errors v-bind:errors=\"errors\"/>\n      <component \n        ref=\"resource\"\n        v-bind:is=\"resourceComponents\" \n        v-bind:id=\"id\" \n        v-bind:manager=\"manager\" \n        v-on:update-query-string=\"updateQueryString\"\n        v-on:create-data=\"createData\"\n        v-on:update-data=\"updateData\"\n        v-on:delete-data=\"deleteData\"\n        v-on:clear-change=\"clearChange\"\n        v-on:go-to-list=\"goToList\"\n        v-on:push-in-breadcrumb=\"pushInBreadcrumb\"\n      />\n    </div>\n  `,\n  extend: ['furet-ui-resource-manager'],\n  prototype: {\n    methods: {\n      updateQueryString (query) {\n        this.$router.push({ query });\n      },\n      /** This method add an element to the breadcrumb\n       *\n       * It gets label and icon information on child resource component\n       * calling ``getBreadcrumbInfo`` to know the icon and label to display\n       * and commit the new element to vuex store with the current route.\n      */\n      pushInBreadcrumb (){\n        const {label, icon} = this.$refs.resource.getBreadcrumbInfo();\n        this.$store.commit(\n          \"PushBreadcrumb\", {\n          route: this.$route,\n          label,\n          icon\n        });\n        this.$store.commit(\"CLEAR_CHANGE\");\n      },\n      createData (data) {\n        const query = Object.assign({}, this.$route.query);\n        data.changes = this.$store.state.data.changes;\n        this.errors = [];\n        axios.post(`/furet-ui/resource/${this.id}/crud`, data)\n          .then((response) => {\n            this.$store.commit('CLEAR_CHANGE')\n            query.pks = JSON.stringify(response.data.pks);\n            this.updateQueryString(query)\n          })\n          .catch((error) => {\n            this.errors = error.response.data.errors;\n          });\n      },\n      updateData (data) {\n        data.changes = this.$store.state.data.changes;\n        this.errors = [];\n        axios.patch(`/furet-ui/resource/${this.id}/crud`, data)\n          .then(() => {\n            this.$refs.resource.saved();\n          })\n          .catch((error) => {\n            this.errors = error.response.data.errors;\n          });\n      },\n      deleteData (data) {\n        this.errors = [];\n        axios.delete(`/furet-ui/resource/${this.id}/crud`, {params: data})\n          .then(() => {\n            this.$store.commit('CLEAR_CHANGE');\n            this.$store.commit('DELETE_DATA', data);\n            this.goToPreviousBreadcrumbElement();\n          })\n          .catch((error) => {\n            this.errors = error.response.data.errors;\n          });\n      },\n      clearChange () {\n        this.$store.commit('CLEAR_CHANGE')\n      },\n      goToList() {\n        this.goToPreviousBreadcrumbElement();\n      },\n      /**\n       * Go back to the previous breadcrumb element. As if the user\n       * clicked on the last element.\n       *\n       * If there is no previous element it clear the vue-router.\n       */\n      goToPreviousBreadcrumbElement() {\n          const breadcrumb_lenght = this.$store.state.global.breadcrumb.length;\n          let route;\n          if (breadcrumb_lenght > 0){\n            route = this.$store.state.global.breadcrumb[\n              this.$store.state.global.breadcrumb.length - 1\n            ].route;\n          } else {\n            route = {}\n          }\n          this.$router.push(route);\n          this.$store.commit(\"PopBreadcrumb\");\n          this.$store.commit(\"CLEAR_CHANGE\");\n      },\n      updateChangeState (action) {\n        this.$store.commit('UPDATE_CHANGE', action)\n      },\n      getEntryWrapper (model, pk) {\n        return this.$store.getters.get_entry(model, pk)\n      },\n      getNewEntryWrapper (model, uuid) {\n        return this.$store.getters.get_new_entry(model, uuid)\n      },\n      getNewEntriesWrapper (model, uuid) {\n        return this.$store.getters.get_new_entries(model, uuid)\n      },\n    },\n    provide() {\n      return {\n        pushInBreadcrumb: this.pushInBreadcrumb\n      }\n    },\n    mounted() {\n      const query = this.$route.query;\n      // this.manager.query = Object.assign({}, query);\n      Vue.set(this.manager, 'query', Object.assign({}, query))\n      this.load_resource(this.id)\n    }\n  },\n});\n\ndefineComponent(\"furet-ui-form-field-resource-manager\", {\n  template: `\n    <div v-bind:style=\"{width: '100%'}\" class=\"box\">\n        <furet-ui-page-errors v-bind:errors=\"errors\"/>\n        <component \n          ref=\"resource\"\n          v-bind:is=\"resourceComponents\" \n          v-bind:id=\"id\" \n          v-bind:config=\"config\"\n          v-bind:manager=\"manager\" \n          v-on:update-query-string=\"updateQueryString\"\n          v-on:create-data=\"createData\"\n          v-on:update-data=\"updateData\"\n          v-on:delete-data=\"deleteData\"\n          v-on:revert-data=\"revertData\"\n          v-on:clear-change=\"clearChange\"\n          v-on:modify-state=\"modifyState\"\n          v-on:go-to-list=\"goToList\"\n        />\n    </div>\n  `,\n  extend: [\"furet-ui-resource-manager\"],\n  prototype: {\n    props: [\"value\", \"x2m_resource\", \"isReadonly\", \"config\"],\n    inject: [\"getEntry\", \"getNewEntry\", \"getNewEntries\"],\n    data() {\n      return {\n        changes: {},\n        manager: {\n          multi_header_component_name: this.config.multi_header_component_name,\n          page_header_component_name: this.config.page_header_component_name,\n          pagination_size: this.config.pagination_size,\n          changed_rows: this.value || [],\n          readonly: this.isReadonly,\n          query: { additional_filter: this.build_additional_filter() },\n          selectors: this.x2m_resource.selectors || {},\n          children_is_modified: false\n        }\n      };\n    },\n    methods: {\n      build_additional_filter() {\n        let filters = {};\n        if (this.config.remote_columns && this.config.local_columns) {\n          _.each(\n            _.zip(this.config.remote_columns, this.config.local_columns),\n            cols => {\n              filters[cols[0]] = this.x2m_resource.pks[cols[1]];\n            }\n          );\n        }\n        return filters;\n      },\n      updateQueryString(newquery) {\n        const query = Object.assign({}, newquery);\n        if (query.mode !== \"form\")\n          query.additional_filter = this.build_additional_filter();\n        this.manager = Object.assign({}, this.manager, { query });\n      },\n      goToList() {\n        const query = {additional_filter: this.build_additional_filter()};\n        this.manager = Object.assign({}, this.manager, { query });\n        this.$refs.resource.$refs.resource.readonly = true;\n        this.$refs.resource.mode = \"multi\";\n        this.clearChange();\n      },\n      createData(data) {\n        data.changes = this.changes;\n        data.changes[data[\"model\"]][\"new\"][data[\"uuid\"]] = Object.assign(\n          data.changes[data[\"model\"]][\"new\"][data[\"uuid\"]],\n          this.build_additional_filter()\n        );\n        this.$emit(\"add\", data);\n        this.goToList();\n      },\n      updateData(data) {\n        data.changes = this.changes;\n        this.$emit(\"update\", data);\n        this.goToList();\n      },\n      deleteData(data) {\n        this.$emit(\"delete\", data);\n        this.goToList();\n      },\n      revertData(data){\n        this.$emit(\"revert\", data);\n      },\n      modifyState(state){\n        this.$emit(\"modify-state\", state);\n      },\n      clearChange(_data) {\n        this.changes = {}; // clear the changes\n      },\n      updateChangeState(action) {\n        this.changes = update_change_object(this.changes, action);\n      },\n      getEntryWrapper(model, pk) {\n        return this.getEntry(model, pk);\n      },\n      getNewEntryWrapper(model, uuid) {\n        return this.getNewEntry(model, uuid);\n      },\n      getNewEntriesWrapper(model) {\n        return this.getNewEntries(model);\n      }\n    },\n    watch: {\n      isReadonly() {\n        this.manager.readonly = this.isReadonly;\n      },\n      value() {\n        const query = Object.assign({}, this.manager.query, {\n          additional_filter: this.build_additional_filter()\n        });\n        this.manager = Object.assign({}, this.manager, { query, changed_rows: this.value });\n      }\n    },\n    mounted() {\n      this.load_resource(this.id);\n    }\n  }\n});\n","import { resources } from './resources';\nimport { defineComponent } from '../factory';\n\n\ndefineComponent('furet-ui-resource-custom', {\n  template : `\n    <component \n      v-bind:is=\"resource.component\" \n      v-bind:manager=\"manager\" \n      v-bind:id=\"id\" \n      v-on:update-query-string=\"updateQueryString\"\n      />\n  `,\n  extend: ['furet-ui-resource'],\n  prototype: {\n    props: ['id', 'manager'],\n    methods: {\n      updateQueryString (query) {\n        this.$emit('update-query-string', query);\n      }\n    },\n  },\n});\nresources.custom = 'furet-ui-resource-custom';\n","import { resources } from './resources';\nimport { defineComponent } from '../factory';\n\n\ndefineComponent('furet-ui-resource-set', {\n  template : `\n    <keep-alive>\n      <component \n        ref=\"resource\"\n        v-bind:is=\"getResourceComponent\" \n        v-bind:id=\"subResource.id\" \n        v-bind:key=\"subResource.id\" \n        v-bind:type=\"subResource.type\" \n        v-bind:manager=\"resourceManager\" \n\n        v-on:update-query-string=\"updateQueryString\"\n        v-on:create-data=\"createData\"\n        v-on:update-data=\"updateData\"\n        v-on:delete-data=\"deleteData\"\n        v-on:revert-data=\"revertData\"\n        v-on:clear-change=\"clearChange\"\n        v-on:modify-state=\"modifyState\"\n\n        v-on:go-to-new=\"goToNew\"\n        v-on:go-to-page=\"goToPage\"\n        v-on:go-to-list=\"goToList\"\n      />\n    </keep-alive>\n  `,\n  extend: ['furet-ui-resource'],\n  prototype: {\n    props: ['manager', 'config'],\n    computed: {\n      subResource () {\n        return this.getResource(this.resource[this.manager.mode])\n      },\n      getResourceComponent () {\n        const resource = this.subResource;\n        if (resource === undefined) return 'furet-ui-waiting-resource';\n        if (resources[resource.type] !== undefined) return resources[resource.type];\n        return 'furet-ui-resource-not-found';\n      },\n      resourceManager () {\n        return Object.assign(\n          {\n              'can_create': this.resource.can_create,\n              'can_update': this.resource.can_update,\n              'can_delete': this.resource.can_delete,\n              'create_choices': this.resource.forms || [],\n          }, \n          this.manager);\n      },\n    },\n    methods: {\n      updateQueryString (query) {\n        this.$emit('update-query-string', query);\n      },\n      goToList () {\n        this.$emit('go-to-list');\n      },\n      createData (data) {\n        this.$emit('create-data', data);\n      },\n      updateData (data) {\n        this.$emit('update-data', data);\n      },\n      deleteData (data) {\n        this.$emit('delete-data', data);\n      },\n      revertData (row) {\n        const pks = {}\n        this.resource.pks.forEach(pk => {\n            pks[pk] = row[pk]\n        })\n\n        const action = {\n          model: this.config.model,\n          pks: pks,\n          uuid: row.__uuid,\n        }\n\n        this.$emit('revert-data', action);\n      },\n      modifyState(state){\n        this.$emit(\"modify-state\", state);\n      },\n      clearChange (data) {\n        this.$emit('clear-change', data);\n      },\n      goToNew (choice) {\n        // add to breadscrumb\n        const query = {mode: 'form'};\n        if (choice !== undefined) {\n            query.waiting_value = JSON.stringify(choice.waiting_value);\n            query.resource_id = choice.resource_id;\n        }\n        this.$emit('push-in-breadcrumb');\n        this.$emit('update-query-string', query);\n      },\n      goToPage (row) {\n        if (! this.resource.can_read) return\n        if (row.__uuid) {\n          this.$emit('update-query-string', {mode: 'form', uuid: row.__uuid})\n        } else {\n          this.$emit('push-in-breadcrumb')\n          const pks = {}\n          this.resource.pks.forEach(pk => {\n              pks[pk] = row[pk]\n          })\n          this.$emit('update-query-string', {mode: 'form', pks: JSON.stringify(pks)})\n        }\n      },\n      saved() {\n        this.$refs.resource.goToPage()\n        this.$refs.resource.loadAsyncData()\n      },\n      getBreadcrumbInfo(){\n        return this.$refs.resource.getBreadcrumbInfo();\n      },\n      refresh () {\n        this.$refs.resource.refresh()\n      },\n    },\n    watch: {\n      manager () {\n        const query = this.manager.query || {};\n        if (query.mode !== undefined) this.manager.mode = query.mode;\n        else this.manager.mode = 'multi';\n      },\n    },\n    created () {\n      const query = this.manager.query || {};\n      if (query.mode !== undefined) this.manager.mode = query.mode;\n      else this.manager.mode = 'multi';\n    },\n  },\n});\nresources.set = 'furet-ui-resource-set';\n","import _ from 'underscore';\nimport { resources } from './resources';\nimport { safe_eval } from '../fields/common';\nimport { defineComponent } from '../factory';\nimport axios from 'axios';\n\n\ndefineComponent('furet-ui-resource-list', {\n  template : `\n    <furet-ui-list\n      ref=\"list\"\n      v-bind:title=\"resource.title\"\n      v-bind:default_filters=\"resource.filters || []\"\n      v-bind:default_tags=\"resource.tags || []\"\n      v-bind:default_header_component_name=\"manager.multi_header_component_name || null\"\n      v-bind:perpage=\"resource.perpage\"\n      v-bind:can_go_to_new=\"manager.can_create\"\n      v-bind:go_to_new_choices=\"manager.create_choices\"\n      v-bind:rest_api_url=\"rest_api_url\"\n      v-bind:rest_api_params=\"api_params\"\n\n      v-bind:rest_api_formater=\"api_formater\"\n      v-bind:query=\"manager.query\"\n      v-bind:readonly=\"manager.readonly\"\n      v-bind:pagination_size=\"manager.pagination_size\"\n\n      v-on:update-query-string=\"updateQueryString\"\n      v-on:go-to-new=\"goToNew\"\n      v-on:go-to-page=\"goToPage\"\n    >\n      <template slot=\"hidden_columns\">\n        <section v-if=\"hidden_columns.length\">\n          <b-field grouped group-multiline>\n            <div \n              v-for=\"header in hidden_columns\"\n              v-bind:key=\"header.name\"\n              class=\"control\"\n            >\n              <b-checkbox \n                v-bind:value=\"!header.column_column\"\n                v-on:input=\"toggleHiddenColumn(header.name)\"\n              > \n                  {{ header.label }}\n              </b-checkbox>\n            </div>\n          </b-field>\n        </section>\n      </template>\n      <template slot=\"actions\" slot-scope=\"props\">\n        <furet-ui-list-button \n          v-for=\"button in resource.buttons\" \n          v-bind:key=\"button.call\"\n          v-bind:resource=\"resource\"\n          v-bind:data=\"props.data\"\n          v-bind:config=\"button\" />\n      </template>\n      <template slot-scope=\"props\">\n        <b-table-column class=\"is-action\">\n          <a class=\"button is-outlined\" v-on:click=\"revert_modification(props.row)\">\n            <b-icon icon=\"redo-alt\" size=\"is-small\"/>\n          </a>\n        </b-table-column>\n        <b-table-column \n          v-for=\"header in resource.headers\" \n          class=\"is-list-cell\"\n          v-bind:key=\"header.name\"\n          v-bind:field=\"typeof header.sortable === 'string'? header.sortable : header.name\" \n          v-bind:label=\"translate(header.label)\" \n          v-bind:sortable=\"typeof header.sortable === 'string'? true: header.sortable\"\n          v-bind:visible=\"!safe_eval(header['hidden-column'], props.row)\"\n          >\n            <component \n              v-bind:is=\"header.component\" \n              v-bind:config=\"header\"\n              v-bind:resource=\"resource\"\n              v-bind:data=\"props.row\" />\n        </b-table-column>\n      </template>\n    </furet-ui-list>\n  `,\n  extend: ['furet-ui-resource-with-search'],\n  prototype: {\n    props: ['id', 'manager'],\n    inject: ['getEntry', 'getNewEntries'],\n    computed: {\n      hidden_columns () {\n        return _.filter(this.resource.headers, header => header['column-can-be-hidden']);\n      },\n    },\n    methods: {\n      safe_eval (hidden, row) {\n        const resource = Object.assign({manager: this.manager}, this.resource)\n        return safe_eval(hidden, row, resource)\n      },\n      getBreadcrumbInfo() {\n        return {label: this.$t(this.resource.title), icon: \"list\"};\n      },\n      toggleHiddenColumn (field) {\n        this.$store.commit('UPDATE_RESOURCE_TOGGLE_HIDDEN_COLUMN', {id: this.id, field})\n      },\n      refresh() {\n        this.$refs.list.loadAsyncData();\n      },\n    },\n  },\n});\nresources.list = 'furet-ui-resource-list';\n\ndefineComponent('furet-ui-list-button', {\n  template: `\n    <a class=\"furet-ui-list-button button is-primary is-outlined\" v-on:click=\"server_call\">\n      <span class=\"icon\" v-if=\"config.icon\">\n        <b-icon v-bind:icon=\"config.icon\" />\n      </span>\n      <span>{{ translate(config.label) }}</span>\n    </a>\n  `,\n  // extend: ['furet-ui-helper-mixin'], waittin readony / readwrite on view\n  extend: ['i18n-translate'],\n  prototype: {\n    props: ['resource', 'data', 'config'],\n    methods: {\n      get_call_information () {\n        if (this.config.call)\n          return {\n            url: `/furet-ui/resource/${this.resource.id}/model/${this.resource.model}/call/${this.config.call}`,\n            params: {},\n          }\n        if (this.config['open-resource']) {\n          return {\n            url: `/furet-ui/open/resource/${this.config['open-resource']}`,\n            params: {\n              route: this.$route.name,\n              params: this.$route.params,\n              resource_type: this.config['resource-type'],\n            }\n          }\n        }\n      },\n      server_call () {\n        this.$parent.$parent.errors = [];\n        this.$parent.$parent.loading = true;\n        const {url, params} = this.get_call_information();\n        axios.post(url, params)\n          .then((response) => {\n            this.$parent.$parent.loading = false;\n            if (response.data.length) {\n              this.$dispatchAll(response.data)\n            } else {\n              this.$parent.$parent.loadAsyncData()\n            }\n          })\n          .catch((error) => {\n            this.$parent.$parent.loading = false;\n            this.$parent.$parent.errors = error.response.data.errors;\n          });\n      },\n    },\n  },\n})\n","import { resources } from './resources';\nimport { defineComponent } from '../factory';\nimport axios from 'axios';\n\n\ndefineComponent('furet-ui-resource-thumbnail', {\n  template : `\n    <furet-ui-thumbnail\n      ref=\"thumbnail\"\n      v-bind:title=\"resource.title\"\n      v-bind:default_filters=\"resource.filters || []\"\n      v-bind:default_tags=\"resource.tags || []\"\n      v-bind:default_header_component_name=\"manager.multi_header_component_name || null\"\n      v-bind:perpage=\"resource.perpage\"\n      v-bind:can_go_to_new=\"manager.can_create\"\n      v-bind:go_to_new_choices=\"manager.create_choices\"\n      v-bind:rest_api_url=\"rest_api_url\"\n      v-bind:rest_api_params=\"api_params\"\n\n      v-bind:rest_api_formater=\"api_formater\"\n      v-bind:query=\"manager.query\"\n      v-bind:readonly=\"manager.readonly\"\n      v-bind:pagination_size=\"manager.pagination_size\"\n\n      v-on:update-query-string=\"updateQueryString\"\n      v-on:go-to-new=\"goToNew\"\n      v-on:go-to-page=\"goToPage\"\n    >\n      <template slot=\"actions\" slot-scope=\"props\">\n        <furet-ui-list-button \n          v-for=\"button in resource.buttons\" \n          v-bind:key=\"button.call\"\n          v-bind:resource=\"resource\"\n          v-bind:data=\"props.data\"\n          v-bind:config=\"button\" />\n      </template>\n      <template slot-scope=\"props\">\n        <div class=\"card\">\n          <component \n            v-bind:is=\"form_card_header_template\" \n            v-bind:resource=\"resource\"\n            v-bind:data=\"props.data\"\n          />\n          <div class=\"card-content\">\n            <component \n              v-bind:is=\"form_card_body_template\" \n              v-bind:resource=\"resource\"\n              v-bind:data=\"props.data\"\n              v-bind:key=\"'body_' + resource.id\"\n            />\n          </div>\n          <component \n            v-bind:is=\"form_card_footer_template\" \n            v-bind:resource=\"resource\"\n            v-bind:data=\"props.data\"\n            v-bind:key=\"'footer_' + resource.id\"\n          />\n        </div>\n      </template>\n    </furet-ui-thumbnail>\n  `,\n  extend: ['furet-ui-resource-with-ssr', 'furet-ui-resource-with-search'],\n  prototype: {\n    inject: ['getEntry', 'getNewEntries'],\n    methods: {\n      getBreadcrumbInfo() {\n        return {label: this.$t(this.resource.title), icon: \"th\"};\n      },\n      refresh() {\n        this.$refs.thumbnail.loadAsyncData();\n      },\n    },\n    provide: function () {\n      return {\n        partIsReadonly: true,\n      }\n    },\n  },\n});\nresources.thumbnail = 'furet-ui-resource-thumbnail';\n\ndefineComponent('furet-ui-thumbnail-footer-button', {\n  template: `\n    <a v-bind:class=\"config.class\" v-on:click=\"server_call\">\n      <span class=\"icon\" v-if=\"config.icon\">\n        <b-icon v-bind:icon=\"config.icon\" />\n      </span>\n      <span>{{ translate(config.label) }}</span>\n    </a>\n  `,\n  extend: ['i18n-translate'],\n  prototype: {\n    props: ['resource', 'data', 'config'],\n    methods: {\n      get_call_information () {\n        if (this.config.call) { \n          const pks = {}\n          this.resource.pks.forEach(pk => {\n              pks[pk] = this.data[pk]\n          })\n          return {\n            url: `/furet-ui/resource/${this.resource.id}/model/${this.resource.model}/call/${this.config.call}`,\n            params: {pks},\n          }\n        }\n        if (this.config['open-resource']) {\n          return {\n            url: `/furet-ui/open/resource/${this.config['open-resource']}`,\n            params: {\n              route: this.$route.name,\n              params: this.$route.params,\n              resource_type: this.config['resource-type'],\n            }\n          }\n        }\n      },\n      server_call () {\n        this.$parent.$parent.$parent.errors = [];\n        this.$parent.$parent.$parent.loading = true;\n        const {url, params} = this.get_call_information();\n        axios.post(url, params)\n          .then((response) => {\n            this.$parent.$parent.$parent.loading = false;\n            if (response.data.length) {\n              this.$dispatchAll(response.data)\n            } else {\n              this.$parent.$parent.$parent.loadAsyncData()\n            }\n          })\n          .catch((error) => {\n            this.$parent.$parent.$parent.loading = false;\n            this.$parent.$parent.$parent.errors = error.response.data.errors;\n          });\n      },\n    },\n  },\n})\n","import axios from 'axios';\nimport _ from 'underscore';\nimport { v1 as uuidv1 } from 'uuid';\nimport { resources } from './resources';\nimport { defineComponent } from '../factory';\nimport { safe_eval } from '../fields/common';\n\n\ndefineComponent('furet-ui-resource-form', {\n  template : `\n    <section>\n      <b-loading v-bind:active.sync=\"loading\"></b-loading>\n      <furet-ui-page-errors v-bind:errors=\"errors\"/>\n      <component\n        v-bind:is=\"headerComponentName\"\n        name=\"furet-ui-page\"\n        v-bind:title=\"resource.title\"\n        v-bind:can_go_to_new=\"readonly && manager.can_create\"\n        v-bind:go_to_new_choices=\"manager.create_choices\"\n        v-bind:can_modify=\"readonly && manager.can_update\"\n        v-bind:can_delete=\"readonly && manager.can_delete\"\n        v-bind:show_save=\"!readonly\"\n        v-bind:can_save=\"manager.children_is_modified\"\n        v-bind:readonly=\"manager.readonly\"\n\n        v-on:go-to-list=\"goToList\"\n        v-on:go-to-edit=\"goToEdit\"\n        v-on:go-to-new=\"goToNew\"\n        v-on:go-to-page=\"goToPage\"\n        v-on:delete-entry=\"deleteEntry\"\n        v-on:save=\"save\"\n\n        v-bind:data=\"data\"\n      >\n        <template slot=\"header\" v-if=\"resource.header_template\">\n          <component \n            v-bind:is=\"form_card_header_template\" \n            v-bind:resource=\"resource\"\n            v-bind:data=\"data\"\n          />\n        </template>\n      </component>\n      <div class=\"section\">\n        <component \n          v-bind:is=\"form_card_body_template\" \n          v-bind:resource=\"resource\"\n          v-bind:data=\"data\"\n          v-bind:key=\"'body_' + resource.id\"\n        />\n      </div>\n      <component \n        v-bind:is=\"form_card_footer_template\" \n        v-bind:resource=\"resource\"\n        v-bind:data=\"data\"\n        v-bind:key=\"'footer_' + resource.id\"\n      />\n    </section>\n  `,\n  extend: ['furet-ui-resource-with-ssr'],\n  prototype: {\n    inject: ['getEntry', 'getNewEntry', 'updateChangeState'],\n    data() {\n      return {\n        loading: false,\n        errors: [],\n        readonly: true,  // RO, RW\n        pks: {},\n        uuid: null,\n        selectors: {},\n        tabs: {},\n        refreshCallbacks: [],\n        headerComponentName: this.manager.page_header_component_name || 'furet-ui-header-page',\n      };\n    },\n    computed: {\n      data () {\n        if (this.uuid) {\n          return this.getNewEntry(this.resource.model, this.uuid);\n        } else if (this.pks) {\n          return this.getEntry(this.resource.model, this.pks);\n        }\n      },\n      resource () {\n        return Object.assign(\n          {\n              readonly: this.readonly,\n              pks: this.pks,\n              uuid: this.uuid,\n              selectors: this.selectors,\n              tabs: this.tabs,\n          },\n          this.$store.state.resource[this.id]\n        );\n      },\n    },\n    methods: {\n      getBreadcrumbInfo() {\n        return {label: this.translate(this.resource.title || ''), icon: \"newspaper\"};\n      },\n      goToList () {\n        this.uuid = null;\n        this.$emit('modify-state', false);\n        this.$emit('go-to-list');\n      },\n      goToNew (choice) {\n        this.$emit('modify-state', false);\n        const query = {mode: 'form'};\n        if (choice !== undefined) {\n            query.waiting_value = JSON.stringify(choice.waiting_value);\n            query.resource_id = choice.resource_id;\n        }\n        this.updateQueryString(query);\n      },\n      goToEdit () {\n        this.updateReadOnly(false);\n      },\n      goToPage () {\n        this.$emit('clear-change', {pks: this.pks, uuid: this.uuid})\n        this.updateReadOnly(true);\n        if (this.uuid) this.goToList();\n        this.refresh_fields()\n      },\n      updateReadOnly (readonly) {\n        this.readonly = readonly;\n        this.$emit('modify-state', !readonly);\n      },\n      getDefault() {\n        if (this.manager.query.waiting_value !== undefined) {\n          _.each(JSON.parse(this.manager.query.waiting_value), (value, fieldname) => {\n              this.updateChangeState({\n                model: this.resource.model,\n                uuid: this.uuid,\n                fieldname,\n                value\n              })\n          })\n        }\n        this.errors = [];\n        this.loading = true;\n        const params = {data: {uuid: this.uuid}}\n        axios.post(`/furet-ui/resource/${this.resource.id}/model/${this.resource.model}/call/default_values`, params)\n          .then((response) => {\n            this.$dispatchAll(response.data);\n            this.loading = false;\n          })\n          .catch((error) => {\n            this.loading = false;\n            this.errors = error.response.data.errors;\n          });\n      },\n      deleteEntry () {\n        this.$emit('modify-state', false);\n        this.$emit('delete-data', {\n          model: this.resource.model,\n          pks: Object.assign({}, this.pks),\n        })\n      },\n      save () {\n        this.$emit('modify-state', false);\n        if (this.uuid) {\n          this.$emit('create-data', {\n            model: this.resource.model,\n            uuid: this.uuid,\n          })\n          this.uuid = null;\n        } else {\n          this.$emit('update-data', {\n            model: this.resource.model,\n            pks: Object.assign({}, this.pks),\n          })\n        }\n      },\n      refresh_fields () {\n        this.$emit('clear-change', {pks: this.pks, uuid: this.uuid})\n        this.updateReadOnly(true);\n        this.refreshCallbacks.forEach(callback => {\n          callback();\n        });\n      },\n      refresh () {\n        this.loadAsyncData();\n        this.refresh_fields();\n      },\n      loadAsyncData() {\n        this.loading = true;\n        const params = {\n          'context[model]': this.resource.model,\n          'context[fields]': this.resource.fields.toString(),\n        };\n        _.each(_.keys(this.pks), pk => {\n            params[`filter[${pk}][eq]`] = this.pks[pk];\n        })\n        this.errors = [];\n        axios.get(`/furet-ui/resource/${this.id}/crud`, { params })\n          .then((response) => {\n            this.$dispatchAll(response.data.data);\n            this.loading = false;\n          })\n          .catch((error) => {\n            this.errors = error.response.data.errors;\n            this.loading = false;\n          });\n      },\n      parse_query() {\n        if (this.manager.query !== undefined) {\n          if (this.manager.query.pks) {\n            const pks = JSON.parse(this.manager.query.pks);\n            if (JSON.stringify(pks) != JSON.stringify(this.pks)) {\n              this.pks = pks\n              this.uuid = null;\n              this.loadAsyncData();\n            }\n          } else if (this.manager.query.uuid) {\n            if (this.uuid != this.manager.query.uuid) {\n              // new case\n              this.updateReadOnly(false);\n              this.uuid = this.manager.query.uuid;\n              this.getDefault();\n            }\n          } else if (this.uuid !== null) {\n              // nothing\n          } else {\n            // new case\n            this.updateReadOnly(false);\n            this.uuid = uuidv1();\n            this.getDefault();\n          }\n        }\n      },\n      isReadonly () {\n        return this.readonly\n      },\n      registryRefreshCallback (callback) {\n        if (this.refreshCallbacks.indexOf(callback) === -1) {\n          this.refreshCallbacks.push(callback)\n        }\n      },\n    },\n    provide: function () {\n      return {\n        partIsReadonly: this.isReadonly,\n        registryRefreshCallback: this.registryRefreshCallback,\n      }\n    },\n    watch: {\n      manager () {\n        this.parse_query();  // query is reactive\n      },\n    },\n    created() {\n      this.parse_query()\n    },\n  },\n});\nresources.form = 'furet-ui-resource-form';\n\ndefineComponent('furet-ui-form-button', {\n  template: `\n      <button \n        v-bind:disabled=\"isReadonly\" \n        v-bind:class=\"getClass\" \n        v-on:click=\"server_call\"\n        v-if=\"!isHidden\"\n      >\n        <span class=\"icon\" v-if=\"config.icon\">\n          <b-icon v-bind:icon=\"config.icon\" />\n        </span>\n        <span>{{ translate(config.label) }}</span>\n      </button>\n  `,\n  extend: ['furet-ui-helper-mixin', 'i18n-translate'],\n  prototype: {\n    inject: ['currentResource'],\n    computed: {\n      getClass () {\n        if (this.config.class !== undefined)\n          if (this.config.class.length != 0)\n              return ['button', ...this.config.class];\n        return ['button', 'is-primary', 'is-outlined'];\n      },\n      isHidden () {\n        if (this.currentResource.uuid) return true;\n        if (this.config.hidden == undefined) return false;\n        return safe_eval(this.config.hidden, this.data || {}, this.resource);\n      },\n    },\n    methods: {\n      getIsReadonly () {\n        if (!this.resource.readonly) return true; // button is clickable when resource is readonly\n        if (!this.partIsReadonly()) return true; // button is clickable when resource is readonly\n        const readonlyParams = safe_eval(this.config.readonly, this.data, this.resource);\n        return readonlyParams ? true: false;\n      },\n      server_call () {\n        this.currentResource.errors = [];\n        this.currentResource.loading = true;\n        const params = {pks: this.resource.pks}\n        axios.post(`/furet-ui/resource/${this.resource.id}/model/${this.resource.model}/call/${this.config.call}`, params)\n          .then((response) => {\n            this.currentResource.loading = false;\n            if (response.data.length) {\n              this.$dispatchAll(response.data)\n            } else {\n              this.currentResource.loadAsyncData()\n            }\n          })\n          .catch((error) => {\n            this.currentResource.loading = false;\n            this.currentResource.errors = error.response.data.errors;\n          });\n      },\n    },\n  },\n})\n","import axios from 'axios';\nimport _ from 'underscore';\nimport { resources } from './resources';\nimport { defineComponent } from '../factory';\nimport {pk2string} from '../../store/modules/data';\n\n\ndefineComponent('furet-ui-resource-polymorphic-form', {\n  template : `\n    <section>\n      <b-loading v-bind:active.sync=\"loading\"></b-loading>\n      <furet-ui-page-errors v-bind:errors=\"errors\"/>\n      <component \n        ref=\"resource\"\n        v-if=\"subResource\"\n        v-bind:is=\"getResourceComponent\" \n        v-bind:id=\"subResource.id\" \n        v-bind:key=\"subResource.id\" \n        v-bind:manager=\"manager\" \n\n        v-on:update-query-string=\"updateQueryString\"\n        v-on:create-data=\"createData\"\n        v-on:update-data=\"updateData\"\n        v-on:delete-data=\"deleteData\"\n        v-on:revert-data=\"revertData\"\n        v-on:clear-change=\"clearChange\"\n        v-on:modify-state=\"modifyState\"\n\n        v-on:go-to-new=\"goToNew\"\n        v-on:go-to-list=\"goToList\"\n      />\n    </section>\n  `,\n  extend: ['furet-ui-resource'],\n  prototype: {\n    props: ['manager'],\n    inject: ['getEntry'],\n    data () {\n      return {\n        errors: [],\n        loading: false,\n      };\n    },\n    computed: {\n      subResource () {\n        const resource_id = this.resource_id\n        return this.getResource(resource_id)\n      },\n      resource_id () {\n        if (this.manager.query.resource_id !== undefined) return this.manager.query.resource_id;\n        let id = undefined;\n        const entry = this.getEntry(this.resource.model, this.pks)\n        const identifiers = {}\n        _.forEach(this.resource.fields, field => {\n          identifiers[field] = entry[field];\n        });\n        _.forEach(this.resource.forms, form => {\n            if (pk2string(form.waiting_value) === pk2string(identifiers)) id = form.resource_id\n        })\n        return id;\n      },\n      getResourceComponent () {\n        const resource = this.subResource;\n        if (resource === undefined) return 'furet-ui-waiting-resource';\n        if (resources[resource.type] !== undefined) return resources[resource.type];\n        return 'furet-ui-resource-not-found';\n      },\n    },\n    methods: {\n      updateQueryString (query) {\n        this.$emit('update-query-string', query);\n      },\n      goToNew () {\n        this.$emit('go-to-new');\n      },\n      goToList () {\n        this.$emit('go-to-list');\n      },\n      createData (data) {\n        this.$emit('create-data', data);\n      },\n      updateData (data) {\n        this.$emit('update-data', data);\n      },\n      deleteData (data) {\n        this.$emit('delete-data', data);\n      },\n      revertData (row) {\n        this.$emit('revert-data', row);\n      },\n      clearChange (data) {\n        this.$emit('clear-change', data);\n      },\n      modifyState(state){\n        this.$emit(\"modify-state\", state);\n      },\n      getBreadcrumbInfo(){\n        return this.$refs.resource.getBreadcrumbInfo();\n      },\n      refresh () {\n        this.$refs.resource.refresh()\n      },\n      goToPage () {\n        this.$refs.resource.goToPage()\n      },\n      loadAsyncData() {\n        if (this.$refs.resource) {\n          this.$refs.resource.loadAsyncData();\n          return\n        }\n\n        this.loading = true;\n        const params = {\n          'context[model]': this.resource.model,\n          'context[fields]': this.resource.fields.toString(),\n        };\n        _.each(_.keys(this.pks), pk => {\n            params[`filter[${pk}][eq]`] = this.pks[pk];\n        })\n        this.errors = [];\n        axios.get(`/furet-ui/resource/${this.id}/crud`, { params })\n          .then((response) => {\n            this.$dispatchAll(response.data.data);\n            this.loading = false;\n          })\n          .catch((error) => {\n            this.errors = error.response.data.errors;\n            this.loading = false;\n          });\n      },\n      parse_query() {\n        if (this.manager.query !== undefined) {\n          if (this.manager.query.pks) {\n            const pks = JSON.parse(this.manager.query.pks);\n            if (JSON.stringify(pks) != JSON.stringify(this.pks)) {\n              this.pks = pks\n              this.loadAsyncData();\n            }\n          }\n        }\n      },\n    },\n    watch: {\n      manager () {\n        this.parse_query()\n      },\n    },\n    created() {\n      this.parse_query()\n    },\n  },\n});\nresources.polymorphicform = 'furet-ui-resource-polymorphic-form';\n","import axios from 'axios';\nimport _ from 'underscore';\nimport { defineComponent } from '../factory';\n\ndefineComponent('furet-ui-page-errors', {\n  template: `\n    <div class=\"container\">\n      <b-message type=\"is-danger\" v-if=\"errors && errors.length\" v-bind:closable=\"false\" v-bind:title=\"$i18n.t('error')\">\n        <ul>\n          <li v-for=\"error in errors\">\n            <pre>{{ error }}</pre>\n          </li>\n        </ul>\n      </b-message>\n    </div>\n  `,\n  prototype: {\n    props: ['errors'],\n  },\n});\n\ndefineComponent('furet-ui-page-infos', {\n  template: `\n    <div class=\"container\">\n      <b-message type=\"is-success\" v-if=\"infos && infos.length\" v-bind:closable=\"false\" v-bind:title=\"$i18n.t('info')\">\n        <ul>\n          <li v-for=\"info in infos\">\n            <pre>{{ info }}</pre>\n          </li>\n        </ul>\n      </b-message>\n    </div>\n  `,\n  prototype: {\n    props: ['infos'],\n  },\n});\n\ndefineComponent('furet-ui-page-header-date', {\n  template: `\n    <span>{{ formatDate(value) }}</span>\n  `,\n  extend: ['date-display'],\n  prototype: {\n    props: ['value'],\n  },\n});\n\ndefineComponent('furet-ui-list-total', {\n  template: `\n    <b-field grouped group-multiline v-bind:class=\"pagination_size\">\n      <div class=\"control\">\n        <strong>{{ $t('components.header.total') }} :</strong>\n        {{ total }}\n      </div>\n      <div v-if=\"number_created\" class=\"control has-text-x2m-created\">\n        <strong>{{ $t('components.header.created') }} :</strong>\n        +{{ number_created }}\n      </div>\n      <div v-if=\"number_updated\" class=\"control has-text-x2m-updated\">\n        <strong>{{ $t('components.header.updated') }} :</strong>\n        {{ number_updated }}\n      </div>\n      <div v-if=\"number_deleted\" class=\"control has-text-x2m-deleted\">\n        <strong>{{ $t('components.header.deleted') }} :</strong>\n        -{{ number_deleted }}\n      </div>\n      <div v-if=\"number_linked\" class=\"control has-text-x2m-linked\">\n        <strong>{{ $t('components.header.linked') }} :</strong>\n        +{{ number_linked }}\n      </div>\n      <div v-if=\"number_unlinked\" class=\"control has-text-x2m-unlinked\">\n        <strong>{{ $t('components.header.unlinked') }} :</strong>\n        -{{ number_unlinked }}\n      </div>\n    </b-field>\n  `,\n  prototype: {\n    props: [\n      'total', 'number_created', 'number_updated', 'number_deleted',\n      'number_linked', 'number_unlinked', 'pagination_size', \n    ],\n  },\n});\n\ndefineComponent('furet-ui-list-pagination', {\n  template: `\n    <div>\n      <div class=\"top level\">\n        <div class=\"level-left\">\n          <furet-ui-list-total\n            v-bind:pagination_size=\"pagination_size\"\n            v-bind:total=\"total\"\n            v-bind:number_created=\"number_created\"\n            v-bind:number_updated=\"number_updated\"\n            v-bind:number_deleted=\"number_deleted\"\n            v-bind:number_linked=\"number_linked\"\n            v-bind:number_unlinked=\"number_unlinked\"\n          />\n        </div>\n        <div class=\"level-right\">\n          <div class=\"level-item\">\n            <b-pagination\n              v-bind:total=\"total\"\n              v-bind:per-page=\"perPage\"\n              v-bind:size=\"pagination_size\"\n              v-bind:current=\"page\"\n              v-on:change=\"onPageChange\"\n            />\n          </div>\n        </div>\n      </div>\n      <b-loading v-bind:active.sync=\"loading\"></b-loading>\n      <slot />\n      <div class=\"top level\">\n        <div class=\"level-left\">\n          <furet-ui-list-total\n            v-bind:pagination_size=\"pagination_size\"\n            v-bind:total=\"total\"\n            v-bind:number_created=\"number_created\"\n            v-bind:number_updated=\"number_updated\"\n            v-bind:number_deleted=\"number_deleted\"\n            v-bind:number_linked=\"number_linked\"\n            v-bind:number_unlinked=\"number_unlinked\"\n          />\n        </div>\n        <div class=\"level-right\">\n          <div class=\"level-item\">\n            <b-pagination\n              v-bind:total=\"total\"\n              v-bind:per-page=\"perPage\"\n              v-bind:size=\"pagination_size\"\n              v-bind:current=\"page\"\n              v-on:change=\"onPageChange\"\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  `,\n  prototype: {\n    props: [\n      'total', 'number_created', 'number_updated', 'number_deleted',\n      'number_linked', 'number_unlinked', 'pagination_size', 'perPage', 'page',\n      'loading'\n    ],\n    methods: {\n      onPageChange(page) {\n        this.$emit('change', page);\n      }\n    }\n  },\n});\n\ndefineComponent('furet-ui-page-multi-entries-header', {\n  template: `\n    <header id=\"furet-ui-page-multi-entries-header\">\n      <div class=\"level\">\n        <div class=\"level-left\">\n          <h2 class=\"level-item is-size-3\">{{ title }}</h2>&nbsp;<span class=\"level-item\">&nbsp;<slot name=\"aftertitle\" v-bind:data=\"data\" /></span>\n        </div>\n        <div class=\"level-right\">\n          <div class=\"level-item\">\n            <b-field grouped group-multiline>\n              <div class=\"control\" v-for=\"tag in tags\" v-if=\"tag.selected\" v-bind:key=\"tag.key\">\n                  <b-tag \n                    v-bind:class=\"['furet-ui-page-multi-entries-header-tag', tag.key]\" \n                    type=\"is-primary\" closable \n                    v-on:close=\"removeTag(tag)\">{{ $t(tag.label) }} </b-tag>\n              </div>\n              <div class=\"control\" v-for=\"filter in filters\" v-if=\"filter.values.length\" v-bind:key=\"filter.key + '-' + filter.mode + '-' + filter.opt\">\n                <b-taglist attached>\n                  <b-tag type=\"is-danger\" v-if=\"filter.mode == 'exclude'\"> ~ </b-tag>\n                  <b-tag type=\"is-dark\">{{ $t(filter.label) }}</b-tag>\n                  <b-tag \n                    type=\"is-primary\" \n                    closable \n                    v-for=\"value in filter.values\" \n                    v-bind:class=\"['furet-ui-page-multi-entries-header-filter', filter.key, value]\" \n                    v-on:close=\"removeFilter(filter.key, filter.mode, filter.opt, value)\" \n                    v-bind:key=\"value\">{{ value }} </b-tag>\n                </b-taglist>\n              </div>\n            </b-field>\n          </div>\n          <div class=\"level-item\" v-if=\"filters.length\" >\n            <b-autocomplete\n              v-model=\"filterSearch\"\n              v-bind:data=\"filteredDataArray\"\n              v-bind:placeholder=\"this.$i18n.t('components.header.search')\"\n              icon=\"search\"\n              v-on:select=\"updateFilters\"\n              clear-on-select\n            >\n              <template slot=\"empty\">{{ $t('components.header.notFound') }}</template>\n              <template slot-scope=\"props\">\n                {{ props.option.mode == 'exclude' ? ' ~ ' : '' }} <small>{{ $t(props.option.label) }} </small> : <strong>{{ props.option.value }}</strong>\n              </template>\n            </b-autocomplete>\n          </div>\n          <div class=\"level-item buttons\">\n            <a id=\"furet-ui-page-multi-entries-header-refresh\" class=\"button\" v-on:click=\"refresh\"><b-icon icon=\"redo\" /></a>\n            <a id=\"furet-ui-page-multi-entries-header-tags\" v-if=\"tags.length\" class=\"button\" v-on:click.stop=\"tag_list_open = ! tag_list_open\">\n              <b-icon :icon=\"tag_list_open ? 'arrow-circle-up' : 'arrow-circle-down'\" />\n            </a>\n          </div>\n        </div>\n      </div>\n      <b-collapse class=\"panel is-pulled-right\" v-bind:open.sync=\"tag_list_open\">\n        <b-taglist>\n          <b-tag v-for=\"tag in tags\" v-bind:key=\"tag.key\" v-bind:class=\"['is-small', tag.selected ? '': 'has-text-weight-bold']\" >\n            <a \n              v-bind:class=\"['furet-ui-page-multi-entries-header-toggle-tag', tag.key]\" \n              v-on:click.stop=\"toggleTag(tag)\">{{ $t(tag.label) }}</a>\n          </b-tag>\n        </b-taglist>\n      </b-collapse>\n      <div class=\"buttons is-grouped is-centered\">\n        <div v-if=\"can_go_to_new\">\n          <b-dropdown \n            :triggers=\"['hover']\" \n            v-if=\"(go_to_new_choices || []).length\"\n            v-bind:disabled=\"readonly\"\n          >\n            <button \n              class=\"button is-primary is-outlined\" \n              slot-scope=\"{ active }\"\n              slot=\"trigger\">\n              <span class=\"icon\"><b-icon icon=\"plus\" /></span>\n              <span>{{ $t('components.header.new') }}</span>\n              <span class=\"icon\"><b-icon :icon=\"active ? 'caret-up' : 'caret-down'\" /></span>\n            </button>\n            <b-dropdown-item \n              v-for=\"choice in go_to_new_choices\"\n              v-bind:key=\"choice.resource_id\"\n              aria-role=\"listitem\"\n              v-on:click=\"goToNewPolymorphic(choice)\"\n            >\n              {{ choice.label }}\n            </b-dropdown-item>\n          </b-dropdown>\n          <button \n            id=\"furet-ui-page-multi-entries-header-new\" \n            v-else\n            v-bind:disabled=\"readonly\"\n            class=\"button is-primary is-outlined\" \n            v-on:click=\"goToNew\"\n          >\n            <span class=\"icon\"><b-icon icon=\"plus\" /></span>\n            <span>{{ $t('components.header.new') }}</span>\n          </button>\n        </div>\n        <slot name=\"actions\" v-bind:data=\"data\" />\n      </div>\n    </header>\n  `,\n  prototype: {\n    props: ['title', 'filters', 'tags', 'data', 'can_go_to_new', 'go_to_new_choices', 'readonly'],\n    data() {\n      return {\n        filterSearch: '',\n        tag_list_open: false,\n      };\n    },\n    computed: {\n      filteredDataArray() {\n        // eslint-disable-next-line\n        return _.map(this.filters, (f) => {\n          return {\n            key: f.key,\n            mode: f.mode,\n            label: f.label,\n            value: this.filterSearch,\n            opt: f.opt,\n          };\n        });\n      },\n    },\n    methods: {\n      goToNew() {\n        this.$emit('go-to-new');\n      },\n      goToNewPolymorphic(choice) {\n        this.$emit('go-to-new', choice);\n      },\n      updateFilters(option) {\n        this.$emit('updateFilters', option);\n      },\n      refresh() {\n        this.$emit('refresh');\n      },\n      removeFilter(key, mode, opt, value) {\n        this.$emit('removeFilter', key, mode, opt, value);\n      },\n      toggleTag(tag) {\n        this.$emit('toggleTag', tag);\n      },\n      removeTag(tag) {\n        this.$emit('removeTag', tag);\n      },\n    },\n  },\n});\n\ndefineComponent('mixin-page-multi-entries', {\n  prototype: {\n    props: [\n      'title', 'default_filters', 'default_tags', 'defaultSortField', 'defaultSortOrder',\n      'perpage', 'can_go_to_new', 'go_to_new_choices', 'rest_api_url', 'rest_api_params',\n      'rest_api_formater', 'query', 'default_header_component_name', 'pagination_size',\n      'readonly'],\n    data() {\n      const sortingPriority = [];\n      if (this.defaultSortField) {\n        sortingPriority.push({field: this.defaultSortField, order: this.defaultSortOrder || 'asc'})\n      }\n      return {\n        data: [],\n        errors: [],\n        total: 0,\n        number_created: 0,\n        number_updated: 0,\n        number_deleted: 0,\n        number_linked: 0,\n        number_unlinked: 0,\n        loading: false,\n        page: 1,\n        perPage: this.perpage || 25,\n        filters: _.map((this.default_filters || []), f => Object.assign({}, f, {values: Object.assign([], f.values || [])})),\n        additional_filter: {},\n        tags: _.map((this.default_tags || []), t => Object.assign({}, t)),\n        sortingPriority,\n        headerComponentName: this.default_header_component_name || 'furet-ui-page-multi-entries-header',\n      };\n    },\n    computed: {\n      selectedEntries() {\n        return this.data;\n      },\n      row_state() {\n        return this.row_state_callback;\n      }\n    },\n    methods: {\n      goToNew(choice) {\n        this.$emit('go-to-new', choice);\n      },\n      goToPage(row) {\n        const offset = ((this.page - 1) * this.perPage) + this.data.indexOf(row)\n        this.$emit('go-to-page', row, {offset, query: this.query});\n      },\n      updateData() {\n        const query = { page: this.page };\n        const filters = {};\n        const tags = [];\n        const orders = [];\n        this.sortingPriority.forEach(sort => {\n          orders.push(`${sort.field}:${sort.order}`)\n        });\n        if (orders.length) query.orders = orders.toString()\n\n        _.each(this.filters, (f) => {\n          if (f.values.length) {\n            const mode = f.mode === 'exclude' ? '~' : '';\n            const opt = f.opt ? `[${f.opt}]` : '';\n            filters[`${mode}filter[${f.key}]${opt}`] = f.values.join();\n          }\n        });\n        if (_.keys(filters).length) query.filters = JSON.stringify(filters);\n        _.each(this.tags, (t) => {\n          if (t.selected) tags.push(t.key);\n        });\n        if (tags.length) query.tags = tags.join();\n        this.$emit('update-query-string', query);\n      },\n      updateFilters(option) {\n        if (option) {\n          const filter = _.find(\n            this.filters,\n            f => f.key === option.key && f.mode === option.mode && f.opt === option.opt);\n          if (filter.op.startsWith('or-') || filter.op === 'in') {\n            filter.values.push(option.value);\n          } else {\n            filter.values = [option.value];\n          }\n          this.page = 1;\n          this.updateData();\n        }\n      },\n      removeFilter(key, mode, opt, value) {\n        const filter = _.find(this.filters, f => f.key === key && f.mode === mode && f.opt === opt);\n        filter.values = _.filter(filter.values, v => v !== value);\n        this.page = 1;\n        this.updateData();\n      },\n      toggleTag(tag) {\n        // eslint-disable-next-line\n        tag.selected = !tag.selected;\n        this.updateData();\n      },\n      removeTag(tag) {\n        // eslint-disable-next-line\n        tag.selected = false;\n        this.updateData();\n      },\n      from_x2m_with_a_newest_parent() {\n        if (this.additional_filter === null) return false;\n        let res = false;\n        _.each(_.keys(this.additional_filter), filter => {\n          if (this.additional_filter[filter] === undefined) {\n            res = true;\n          }\n        });\n        return res;\n      },\n      row_state_callback (row, _index) {\n        let style_class = \"\"\n        switch(row.__change_state) {\n          case \"create\":\n            style_class = \"is-created\";\n            break;\n          case \"update\":\n            style_class = \"is-updated\";\n            break;\n          case \"delete\":\n            style_class = \"is-deleted\";\n            break;\n          case \"link\":\n            style_class = \"is-linked\";\n            break;\n          case \"unlink\":\n            style_class = \"is-unlinked\";\n            break;\n          default:\n            style_class = \"is-unmodified\";\n          }\n        return style_class\n      },\n      loadAsyncData() {\n        if (this.from_x2m_with_a_newest_parent()) {\n          if (this.rest_api_formater) {\n            this.rest_api_formater(this, {});\n          }\n          return\n        }\n        const params = Object.assign({}, this.rest_api_params || {});\n        params.offset = (this.page - 1) * this.perPage;\n        params.limit = this.perPage;\n        this.sortingPriority.forEach(({field, order}) => {\n          params[`order_by[${field}]`] = order;\n        })\n        _.each(this.filters, (filter) => {\n          if (filter.values.length) {\n            const value = (filter.op.startsWith('or-') || filter.op === 'in') ? filter.values.toString() : filter.values[0];\n            const preop = filter.mode === 'exclude' ? '~' : '';\n            params[`${preop}filter[${filter.key}][${filter.op}]`] = value;\n          }\n        });\n        if (this.additional_filter !== null) {\n          _.each(_.keys(this.additional_filter), filter => {\n            if (this.additional_filter[filter] !== undefined) {\n              params[`filter[${filter}][in]`] = this.additional_filter[filter].toString()\n            }\n          });\n        }\n        const tags = [];\n        _.each(this.tags, (tag) => {\n          if (tag.selected) tags.push(tag.key);\n        });\n        if (tags.length) params.tags = tags.toString();\n\n        this.loading = true;\n        axios.get(this.rest_api_url, { params })\n          .then((response) => {\n            if (this.rest_api_formater) {\n              this.rest_api_formater(this, response.data || {});\n            } else {\n              this.data = response.data || [];\n              this.total = response.headers['x-total-records'] || response.data.length;\n            }\n            this.loading = false;\n          })\n          .catch((error) => {\n            // console.error(error);\n            this.errors = error.response.data.errors;\n            this.loading = false;\n          });\n      },\n      refresh() {\n        this.page = 1;\n        this.updateData();\n      },\n      onPageChange(page) {\n        this.page = page;\n        this.updateData();\n      },\n      onSort(field, order) {\n        let existingPriority = this.sortingPriority.find(i => i.field === field)\n        if(existingPriority) {\n          existingPriority.order = existingPriority.order === 'desc' ? 'asc' : 'desc'\n        } else {\n          // request sorted data from backend\n          this.sortingPriority.push({field, order})\n        }\n        this.updateData();\n      },\n      onSortingPriorityRemoved (field){\n        this.sortingPriority = this.sortingPriority.filter(\n            (priority) => priority.field !== field)\n        this.updateData();\n      },\n      parse_query() {\n        const regexWithOption = new RegExp('.*\\\\[(.+)\\\\]\\\\[(.+)\\\\]');\n        const regexWithoutOption = new RegExp('.*\\\\[(.+)\\\\]');\n        const query = this.query;\n        if (query === undefined) {\n          // this.loadAsyncData();\n          return;\n        }\n        if (query.page) this.page = parseInt(query.page, 10);\n        if (query.orders) {\n          query.orders.split(',').forEach(sort => {\n            let [field, order] = sort.split(':');\n            this.sortingPriority.push({field, order});\n          })\n        }\n\n        _.forEach(this.filters, f => {f.values = [];});\n        _.forEach(this.tags, f => {f.selected = false;});\n        if (query.filters) {\n          _.each(JSON.parse(query.filters), (queryStringValue, queryStringName) => {\n            if (queryStringName.startsWith('filter')) {\n              const resWithOption = queryStringName.match(regexWithOption);\n              const resWithoutOption = queryStringName.match(regexWithoutOption);\n              let key = '';\n              let opt;\n              if (resWithOption) {\n                key = resWithOption[1];\n                opt = resWithOption[2];\n              } else key = resWithoutOption[1];\n              const filter = _.find(this.filters, f => f.key === key && f.opt === opt && f.mode !== 'exclude');\n              filter.values = queryStringValue.split(',');\n            } else if (queryStringName.startsWith('~filter')) {\n              const resWithOption = queryStringName.match(regexWithOption);\n              const resWithoutOption = queryStringName.match(regexWithoutOption);\n              let key = '';\n              let opt;\n              if (resWithOption) {\n                key = resWithOption[1];\n                opt = resWithOption[2];\n              } else key = resWithoutOption[1];\n              const filter = _.find(this.filters, f => f.key === key && f.opt === opt && f.mode === 'exclude');\n              filter.values = queryStringValue.split(',');\n            }\n          });\n        }\n        if (query.tags) {\n          _.each(query.tags.split(','), (tag) => {\n            _.find(this.tags, t => t.key === tag.trim()).selected = true;\n          });\n        }\n        if (query.additional_filter) this.additional_filter = query.additional_filter;\n        else if (query.additional_filter === null) this.additional_filter = null;\n        this.loadAsyncData();\n      }\n    },\n    watch: {\n      query () {\n        this.parse_query();  // query is reactive\n      },\n    },\n    mounted() {\n      this.parse_query()\n    },\n  },\n});\n\ndefineComponent('furet-ui-header-page', {\n  template: `\n    <header id=\"header_page\">\n      <slot name=\"header\" v-bind:data=\"data\">\n        <div class=\"level\">\n          <div class=\"level-left\">\n            <h2 class=\"level-item is-size-3\">{{ $t(title) }}</h2>&nbsp;<span class=\"level-item\"><slot name=\"aftertitle\" v-bind:data=\"data\" /></span>\n          </div>\n          <div class=\"level-right\">\n            <slot name=\"states\" v-bind:data=\"data\" />\n          </div>\n        </div>\n      </slot>\n      <div class=\"buttons is-grouped is-centered\">\n        <a v-if=\"show_save\" class=\"button is-warning is-outlined\" v-on:click=\"goToPage\">\n          <span class=\"icon\">\n            <b-icon icon=\"times\" />\n          </span>\n          <span>{{ $t('components.header.cancel') }}</span>\n        </a>\n        <a v-else class=\"button is-primary is-outlined\" v-on:click=\"goToList\">\n          <span class=\"icon\">\n            <b-icon icon=\"arrow-left\" />\n          </span>\n          <span>{{ $t('components.header.return') }}</span>\n        </a>\n        <a v-if=\"prevous_target\" class=\"button is-primary is-outlined\" v-on:click=\"goToPreviousPage\">\n          <span class=\"icon\">\n            <b-icon icon=\"page-previous\" />\n          </span>\n          <span>{{ $t('components.header.previous') }}</span>\n        </a>\n        <a v-if=\"next_target\" class=\"button is-primary is-outlined\" v-on:click=\"goToNextPage\">\n          <span class=\"icon\">\n            <b-icon icon=\"page-next\" />\n          </span>\n          <span>{{ $t('components.header.next') }}</span>\n        </a>\n        <div v-if=\"can_go_to_new\">\n          <b-dropdown \n            :triggers=\"['hover']\" \n            v-if=\"go_to_new_choices.length\"\n            v-bind:disabled=\"readonly\"\n          >\n            <button \n              class=\"button is-primary is-outlined\" \n              slot-scope=\"{ active }\"\n              slot=\"trigger\">\n              <span class=\"icon\"><b-icon icon=\"plus\" /></span>\n              <span>{{ $t('components.header.new') }}</span>\n              <span class=\"icon\"><b-icon :icon=\"active ? 'caret-up' : 'caret-down'\" /></span>\n            </button>\n            <b-dropdown-item \n              v-for=\"choice in go_to_new_choices\"\n              v-bind:key=\"choice.resource_id\"\n              aria-role=\"listitem\"\n              v-on:click=\"goToNewPolymorphic(choice)\"\n            >\n              {{ choice.label }}\n            </b-dropdown-item>\n          </b-dropdown>\n          <button v-else v-bind:disabled=\"readonly\" class=\"button is-primary is-outlined\" v-on:click=\"goToNew\">\n            <span class=\"icon\">\n              <b-icon icon=\"plus\" />\n            </span>\n            <span>{{ $t('components.header.new') }}</span>\n          </button>\n        </div>\n        <button v-if=\"can_modify\" v-bind:disabled=\"readonly\" class=\"button is-primary is-outlined\" v-on:click=\"goToEdit\">\n          <span class=\"icon\">\n            <b-icon icon=\"pencil-alt\" />\n          </span>\n          <span>{{ $t('components.header.edit') }}</span>\n        </button>\n        <button v-if=\"show_save\" v-bind:disabled=\"can_save\" class=\"button is-primary is-outlined\" v-on:click=\"save\">\n          <span class=\"icon\">\n            <b-icon icon=\"save\" />\n          </span>\n          <span>{{ $t('components.header.save') }}</span>\n        </button>\n        <button v-if=\"can_delete\" v-bind:disabled=\"readonly\" class=\"button is-danger is-outlined\" v-on:click=\"deleteEntry\">\n          <span class=\"icon\">\n            <b-icon icon=\"trash\" />\n          </span>\n          <span>{{ $t('components.header.delete') }}</span>\n        </button>\n        <slot name=\"head_actions\" v-bind:data=\"data\" />\n      </div>\n    </header>\n  `,\n  prototype: {\n    props: ['title', 'can_go_to_new', 'go_to_new_choices', 'can_modify',\n            'can_delete', 'show_save', 'can_save', 'data', 'readonly'],\n    computed: {\n      prevous_target() {\n        return this.$store.getters.previousBrowserTarget;\n      },\n      next_target() {\n        return this.$store.getters.nextBrowserTarget;\n      },\n    },\n    methods: {\n      goToList() {\n        this.$emit('go-to-list');\n      },\n      goToPage(row) {\n        this.$emit('go-to-page', row);\n      },\n      goToPreviousPage() {\n        const target = this.prevous_target;\n        if (target !== undefined) {\n          this.$store.commit('DECREASE_BROWSER_OFFSET');\n          this.$emit('go-to-page', target);\n        }\n      },\n      goToNextPage() {\n        const target = this.next_target;\n        if (target !== undefined) {\n          this.$store.commit('INCREASE_BROWSER_OFFSET');\n          this.$emit('go-to-page', target);\n        }\n      },\n      goToNew() {\n        this.$emit('go-to-new');\n      },\n      goToNewPolymorphic(choice) {\n        this.$emit('go-to-new', choice);\n      },\n      goToEdit() {\n        this.$emit('go-to-edit');\n      },\n      save() {\n        this.$emit('save');\n      },\n      deleteEntry() {\n        this.$emit('delete-entry');\n      },\n    },\n  },\n});\n","import { defineComponent } from '../factory';\n\ndefineComponent('furet-ui-list', {\n  template: `\n    <section id=\"furet-ui-list\">\n      <furet-ui-page-errors v-bind:errors=\"errors\"/>\n      <component\n        v-bind:is=\"headerComponentName\"\n        v-bind:title=\"title\"\n        v-bind:filters=\"filters\"\n        v-bind:tags=\"tags\"\n        v-bind:data=\"data\"\n        v-bind:can_go_to_new=\"can_go_to_new\"\n        v-bind:go_to_new_choices=\"go_to_new_choices\"\n        v-bind:readonly=\"readonly\"\n        v-on:updateFilters=\"updateFilters\"\n        v-on:removeFilter=\"removeFilter\"\n        v-on:refresh=\"refresh\"\n        v-on:toggleTag=\"toggleTag\"\n        v-on:removeTag=\"removeTag\"\n        v-on:go-to-new=\"goToNew\"\n      >\n        <template slot=\"actions\" slot-scope=\"props\">\n          <slot name=\"actions\" v-bind:data=\"props.data\" />\n        </template>\n      </component>\n      <slot name=\"hidden_columns\" />\n      <b-table\n        ref=\"list_table\"\n        v-bind:data=\"data\"\n        v-bind:loading=\"loading\"\n\n        paginated\n        backend-pagination\n        pagination-position=\"both\"\n        v-bind:pagination-size=\"pagination_size\"\n\n        v-bind:total=\"total\"\n        v-bind:current-page.sync=\"page\"\n        v-bind:per-page=\"perPage\"\n        v-on:page-change=\"onPageChange\"\n\n        backend-sorting\n        sort-multiple\n        :sort-multiple-data=\"sortingPriority\"\n\n        v-on:sort=\"onSort\"\n        @sorting-priority-removed=\"onSortingPriorityRemoved\"\n\n        striped\n        hoverable\n        v-bind:detailed=\"detailed\"\n        v-bind:detail-key=\"detail_key\"\n        v-bind:checkable=\"isCheckable\"\n        v-bind:checked-rows.sync=\"checkedRows\"\n        v-bind:row-class=\"row_state\"\n\n        v-on:dblclick=\"goToPage\"\n      >\n        <template slot-scope=\"props\">\n          <slot v-bind:row=\"props.row\" />\n        </template>\n\n        <template slot=\"top-left\">\n          <furet-ui-list-total\n            v-bind:pagination_size=\"pagination_size\"\n            v-bind:total=\"total\"\n            v-bind:number_created=\"number_created\"\n            v-bind:number_updated=\"number_updated\"\n            v-bind:number_deleted=\"number_deleted\"\n            v-bind:number_linked=\"number_linked\"\n            v-bind:number_unlinked=\"number_unlinked\"\n          />\n        </template>\n\n        <template slot=\"bottom-left\">\n          <furet-ui-list-total\n            v-bind:pagination_size=\"pagination_size\"\n            v-bind:total=\"total\"\n            v-bind:number_created=\"number_created\"\n            v-bind:number_updated=\"number_updated\"\n            v-bind:number_deleted=\"number_deleted\"\n            v-bind:number_linked=\"number_linked\"\n            v-bind:number_unlinked=\"number_unlinked\"\n          />\n        </template>\n\n        <template v-if=\"detailed\" slot=\"detail\" slot-scope=\"props\">\n          <slot name=\"detail\" v-bind:row=\"props.row\" />\n        </template>\n\n        <template slot=\"empty\">\n          <section class=\"section\">\n            <div class=\"content has-text-grey has-text-centered\">\n              <p>{{ $t('components.header.notFound') }}</p>\n            </div>\n          </section>\n        </template>\n      </b-table>\n    </section>\n  `,\n  extend: ['mixin-page-multi-entries'],\n  prototype: {\n    props: [\n      'is_checkable', 'checkedElements', 'detailed', 'detail_key'],\n    data() {\n      return {\n        isCheckable: this.is_checkable || false,\n        checkedRows: this.checkedElements || [],\n      };\n    },\n    computed: {\n      selectedEntries() {\n        if (this.checkedRows.length !== 0) return this.checkedRows;\n        return this.data;\n      },\n    },\n  },\n});\n","import { defineComponent } from '../factory';\n\ndefineComponent('furet-ui-thumbnail', {\n  template: `\n    <section id=\"furet-ui-thumbnail\">\n      <furet-ui-page-errors v-bind:errors=\"errors\"/>\n      <component\n        v-bind:is=\"headerComponentName\"\n        v-bind:title=\"title\"\n        v-bind:filters=\"filters\"\n        v-bind:tags=\"tags\"\n        v-bind:data=\"data\"\n        v-bind:can_go_to_new=\"can_go_to_new\"\n        v-bind:go_to_new_choices=\"go_to_new_choices\"\n        v-bind:readonly=\"readonly\"\n        v-on:updateFilters=\"updateFilters\"\n        v-on:removeFilter=\"removeFilter\"\n        v-on:refresh=\"refresh\"\n        v-on:toggleTag=\"toggleTag\"\n        v-on:removeTag=\"removeTag\"\n        v-on:go-to-new=\"goToNew\"\n      >\n        <template slot=\"actions\" slot-scope=\"props\">\n          <slot name=\"actions\" v-bind:data=\"props.data\" />\n        </template>\n      </component>\n\n      <furet-ui-list-pagination\n        v-bind:loading=\"loading\"\n        v-bind:total=\"total\"\n        v-bind:perPage=\"perPage\"\n        v-bind:page=\"page\"\n        v-bind:number_created=\"number_created\"\n        v-bind:number_updated=\"number_updated\"\n        v-bind:number_deleted=\"number_deleted\"\n        v-bind:number_linked=\"number_linked\"\n        v-bind:number_unlinked=\"number_unlinked\"\n        v-bind:pagination_size=\"pagination_size\"\n        v-on:change=\"onPageChange\"\n      >\n        <div v-if=\"data.length > 0\" class=\"columns is-multiline\">\n          <div \n            v-for=\"thumbnail in data\" \n            v-on:dblclick=\"goToPage(thumbnail)\"\n            class=\"column is-one-quarter-desktop is-half-tablet is-12-mobile\"\n          >\n            <slot v-bind:data=\"thumbnail\" />\n          </div>\n        </div>\n        <section v-else class=\"section\">\n          <div class=\"content has-text-grey has-text-centered\">\n            <p>{{ $t('components.header.notFound') }}</p>\n          </div>\n        </section>\n      </furet-ui-list-pagination>\n\n    </section>\n  `,\n  extend: ['mixin-page-multi-entries'],\n});\n","export const fields = {\n  list: {},\n  form: {},\n  thumbnail: {},\n};\nexport default {\n    fields,\n}\n","/**\nThis file is a part of the FuretUI project\n\n   Copyright (C) 2017 Jean-Sebastien SUZANNE <jssuzanne@anybox.fr>\n\nThis Source Code Form is subject to the terms of the Mozilla Public License,\nv. 2.0. If a copy of the MPL was not distributed with this file,You can\nobtain one at http://mozilla.org/MPL/2.0/.\n**/\nimport {defineComponent} from '../factory'\nimport {fields} from './fields';\nimport VueBarcode from 'vue-barcode';\n\ndefineComponent('furet-ui-list-field-barcode', {\n  template:`\n    <span v-if=\"isHidden\" />\n    <barcode v-else v-bind:value=\"value\" v-bind=\"config.options\">\n      Can't generate the barcode\n    </barcode>\n  `,\n  extend: ['furet-ui-list-field-common'],\n  prototype: {\n    components: {\n      barcode: VueBarcode\n    },\n  },\n})\nfields.list.barcode = 'furet-ui-list-field-barcode'\n\ndefineComponent('furet-ui-thumbnail-field-barcode', {\n  template: `\n    <furet-ui-thumbnail-field-common-tooltip-field\n      v-bind:resource=\"resource\"\n      v-bind:data=\"data\"\n      v-bind:config=\"config\"\n    >\n      <barcode v-bind:value=\"value\" v-bind=\"config.options\">\n        Can't generate the barcode\n      </barcode>\n    </furet-ui-thumbnail-field-common-tooltip-field>\n  `,\n  extend: ['furet-ui-thumbnail-field-common'],\n  prototype: {\n    components: {\n      barcode: VueBarcode\n    },\n  },\n})\nfields.thumbnail.barcode = 'furet-ui-thumbnail-field-barcode'\n\ndefineComponent('furet-ui-form-field-barcode', {\n  template: `\n    <furet-ui-form-field-common-tooltip-field\n      v-bind:resource=\"resource\"\n      v-bind:data=\"data\"\n      v-bind:config=\"config\"\n    >\n      <barcode v-if=\"isReadonly\" v-bind:value=\"value\" v-bind=\"config.options\">\n        Can't generate the barcode\n      </barcode>\n      <b-input \n        v-else\n        v-bind:value=\"value\" \n        v-on:input=\"updateValue\"\n        v-bind:maxlength=\"config.maxlength\"\n        v-bind:placeholder=\"config.placeholder\"\n        icon-pack=\"fa\"\n        v-bind:icon=\"config.icon\"\n        v-bind:key=\"config.key\"\n      />\n    </furet-ui-form-field-common-tooltip-field>\n  `,\n  extend: ['furet-ui-form-field-common'],\n  prototype: {\n    components: {\n      barcode: VueBarcode\n    },\n  },\n})\nfields.form.barcode = 'furet-ui-form-field-barcode'\n","// /**\n// This file is a part of the FuretUI project\n//\n//    Copyright (C) 2017 Jean-Sebastien SUZANNE <jssuzanne@anybox.fr>\n//\n// This Source Code Form is subject to the terms of the Mozilla Public License,\n// v. 2.0. If a copy of the MPL was not distributed with this file,You can\n// obtain one at http://mozilla.org/MPL/2.0/.\n// **/\n// import _ from 'underscore';\nimport { defineComponent } from \"../factory\";\nimport { fields } from \"./fields\";\nimport { listTemplate, thumbnailTemplate, safe_eval_boolean } from \"./common\";\n\nconst computed_boolean_checked = (obj) => {\n  // #11 safe eval can return null at the moment we are ignoring null values\n  return safe_eval_boolean(obj.value) ? true : false;\n};\n\ndefineComponent(\"furet-ui-list-field-boolean\", {\n  template: `\n    <div>\n      <span v-if=\"isHidden\" />\n      <component \n        v-else-if=\"config.slot\" \n        v-bind:is=\"component_template\"\n        v-bind:config=\"config\"\n        v-bind:resource=\"resource\"\n        v-bind:data=\"data\"\n        v-bind:value=\"value\"\n        v-bind:checked=\"checked\"\n      />\n      <b-checkbox \n        v-else\n        v-model=\"checked\"\n        disabled\n      />\n    </div>`,\n  extend: [\"furet-ui-list-field-common\"],\n  prototype: {\n    computed: {\n      checked() {\n        return computed_boolean_checked(this);\n      },\n      component_template () {\n        return {\n          template: this.config.slot,\n          props: ['resource', 'data', 'config', 'value', 'checked'],\n        }\n      }\n    }\n  }\n});\nfields.list.boolean = \"furet-ui-list-field-boolean\";\n\ndefineComponent(\"furet-ui-common-field-yesno\", {\n  prototype: {\n    computed: {\n      value() {\n        const base = \"components.fields.yesno\";\n        // #11 safe eval can return null at the moment we are ignoring null values\n        return this.$t(\n          safe_eval_boolean(this.data[this.config.name] || \"\")\n            ? `${base}.yes`\n            : `${base}.no`\n        );\n      }\n    }\n  }\n});\n\ndefineComponent(\"furet-ui-list-field-yesno\", {\n  template: listTemplate,\n  extend: [\"furet-ui-list-field-common\", \"furet-ui-common-field-yesno\"],\n});\nfields.list.yesno = \"furet-ui-list-field-yesno\";\n\ndefineComponent(\"furet-ui-thumbnail-field-boolean\", {\n  template: `\n  <furet-ui-thumbnail-field-common-tooltip-field\n    v-bind:resource=\"resource\"\n    v-bind:data=\"data\"\n    v-bind:config=\"config\"\n  >\n    <component \n      v-if=\"config.slot\" \n      v-bind:is=\"component_template\"\n      v-bind:config=\"config\"\n      v-bind:resource=\"resource\"\n      v-bind:data=\"data\"\n      v-bind:value=\"value\"\n      v-bind:checked=\"checked\"\n    />\n    <b-checkbox \n      v-else\n      v-model=\"checked\" \n      disabled\n      v-bind:key=\"config.key\"\n    >\n      {{ config.label }}\n    </b-checkbox>\n  </furet-ui-thumbnail-field-common-tooltip-field>\n  `,\n  extend: [\"furet-ui-thumbnail-field-common\"],\n  prototype: {\n    computed: {\n      checked() {\n        return computed_boolean_checked(this);\n      },\n      component_template () {\n        return {\n          template: this.config.slot,\n          props: ['resource', 'data', 'config', 'value', 'checked'],\n        }\n      }\n    }\n  }\n});\nfields.thumbnail.boolean = \"furet-ui-thumbnail-field-boolean\";\n\ndefineComponent(\"furet-ui-thumbnail-field-yesno\", {\n  template: thumbnailTemplate,\n  extend: [\"furet-ui-thumbnail-field-common\", \"furet-ui-common-field-yesno\"],\n});\nfields.thumbnail.yesno = \"furet-ui-thumbnail-field-yesno\";\n\ndefineComponent(\"furet-ui-form-field-boolean\", {\n  template: `\n    <furet-ui-form-field-common-tooltip\n      v-bind:resource=\"resource\"\n      v-bind:data=\"data\"\n      v-bind:config=\"config\"\n    >\n      <component \n        v-if=\"isReadonly && config.slot\" \n        v-bind:is=\"component_template\"\n        v-bind:config=\"config\"\n        v-bind:resource=\"resource\"\n        v-bind:data=\"data\"\n        v-bind:value=\"value\"\n        v-bind:checked=\"checked\"\n      />\n      <b-checkbox \n        v-model=\"checked\" \n        v-bind:disabled=\"isReadonly\"\n        v-bind:key=\"config.key\"\n      >\n        {{ config.label }}\n      </b-checkbox>\n    </furet-ui-form-field-common-tooltip>`,\n  extend: [\"furet-ui-form-field-common\"],\n  prototype: {\n    computed: {\n      checked: {\n        get() {\n          // #11 safe eval can return null at the moment we are ignoring null values\n          return safe_eval_boolean(this.value) ? true : null;\n        },\n        set(value) {\n          this.updateValue(value);\n        }\n      },\n      component_template () {\n        return {\n          template: this.config.slot,\n          props: ['resource', 'data', 'config', 'value', 'checked'],\n        }\n      }\n    }\n  }\n});\nfields.form.boolean = \"furet-ui-form-field-boolean\";\n","/**\nThis file is a part of the FuretUI project\n\n   Copyright (C) 2017 Jean-Sebastien SUZANNE <jssuzanne@anybox.fr>\n\nThis Source Code Form is subject to the terms of the Mozilla Public License,\nv. 2.0. If a copy of the MPL was not distributed with this file,You can\nobtain one at http://mozilla.org/MPL/2.0/.\n**/\nimport {defineComponent} from '../factory'\nimport {fields} from './fields';\n\ndefineComponent('furet-ui-list-field-color', {\n  template:`\n    <span v-if=\"isHidden\" />\n    <component \n      v-else-if=\"config.slot\" \n      v-bind:is=\"component_template\"\n      v-bind:config=\"config\"\n      v-bind:resource=\"resource\"\n      v-bind:data=\"data\"\n      v-bind:value=\"value\"\n    />\n    <b-input \n      v-else-if=\"value\"\n      type=\"color\"\n      v-bind:value=\"value\" \n      disabled\n    />\n    <span v-else />\n  `,\n  extend: ['furet-ui-list-field-common'],\n})\nfields.list.color = 'furet-ui-list-field-color'\n\ndefineComponent('furet-ui-thumbnail-field-color', {\n  template: `\n    <furet-ui-thumbnail-field-common-tooltip-field\n      v-bind:resource=\"resource\"\n      v-bind:data=\"data\"\n      v-bind:config=\"config\"\n    >\n      <component \n        v-if=\"config.slot\" \n        v-bind:is=\"component_template\"\n        v-bind:config=\"config\"\n        v-bind:resource=\"resource\"\n        v-bind:data=\"data\"\n        v-bind:value=\"value\"\n      />\n      <b-input \n        v-else-if=\"value\"\n        type=\"color\"\n        v-bind:value=\"value\" \n        disabled\n      />\n    </furet-ui-thumbnail-field-common-tooltip-field>\n  `,\n  extend: ['furet-ui-thumbnail-field-common'],\n})\nfields.thumbnail.color = 'furet-ui-thumbnail-field-color'\n\ndefineComponent('furet-ui-form-field-color', {\n  template: `\n    <furet-ui-form-field-common-tooltip-field\n      v-bind:resource=\"resource\"\n      v-bind:data=\"data\"\n      v-bind:config=\"config\"\n    >\n      <div class=\"field has-addons\">\n        <p v-if=\"isReadonly\" class=\"control is-expanded\">\n          <component \n            v-if=\"config.slot\" \n            v-bind:is=\"component_template\"\n            v-bind:config=\"config\"\n            v-bind:resource=\"resource\"\n            v-bind:data=\"data\"\n            v-bind:value=\"value\"\n          />\n          <b-input \n            v-else-if=\"data\"\n            type=\"color\"\n            v-bind:value=\"value\" \n            disabled\n          >\n          </b-input>\n        </p>\n        <p v-else class=\"control\">\n          <b-input \n            style=\"width: 100px\"\n            v-if=\"data || !isReadonly\"\n            type=\"color\"\n            v-bind:value=\"value\" \n            v-on:input=\"updateValue\"\n            v-bind:disabled=\"isReadonly\"\n          >\n          </b-input>\n        </p>\n        <p class=\"control is-expanded\">\n          <b-input \n            v-if=\"!isReadonly\"\n            v-bind:value=\"value\" \n            v-on:input=\"updateValue\"\n            v-bind:placeholder=\"config.placeholder\"\n            icon-pack=\"fa\"\n            v-bind:icon=\"config.icon\"\n            pattern=\"#[A-Fa-f1-9]{6}\"\n          />\n        </p>\n      </div>\n    </furet-ui-form-field-common-tooltip-field>\n  `,\n  extend: ['furet-ui-form-field-common'],\n})\nfields.form.color = 'furet-ui-form-field-color'\n","/**\nThis file is a part of the FuretUI project\n\n   Copyright (C) 2017 Jean-Sebastien SUZANNE <jssuzanne@anybox.fr>\n\nThis Source Code Form is subject to the terms of the Mozilla Public License,\nv. 2.0. If a copy of the MPL was not distributed with this file,You can\nobtain one at http://mozilla.org/MPL/2.0/.\n**/\nimport moment from 'moment-timezone';\nimport {defineComponent} from '../factory'\nimport {fields} from './fields';\nimport { listTemplate, thumbnailTemplate } from './common';\nimport {i18n} from '../../i18n';\n\n\ndefineComponent('furet-ui-common-field-datetime', {\n  prototype: {\n    computed: {\n      value () {\n        moment.locale(i18n.locale);\n        const value = this.data[this.config.name];\n        const timezone = this.$store.state.global.userTimeZone;\n        if (value) return moment(value).tz(timezone).format('LLL');\n        return '';\n      },\n    },\n  },\n})\n\ndefineComponent('furet-ui-list-field-datetime', {\n  template: listTemplate,\n  extend: ['furet-ui-list-field-common', 'furet-ui-common-field-datetime'],\n})\nfields.list.datetime = 'furet-ui-list-field-datetime'\n\ndefineComponent('furet-ui-thumbnail-field-datetime', {\n  template: thumbnailTemplate,\n  extend: ['furet-ui-thumbnail-field-common', 'furet-ui-common-field-datetime'],\n})\nfields.thumbnail.datetime = 'furet-ui-thumbnail-field-datetime'\n\ndefineComponent('furet-ui-form-field-datetime', {\n  extend: ['furet-ui-form-field-common'],\n  template: `\n    <furet-ui-form-field-common-tooltip-field\n      v-bind:resource=\"resource\"\n      v-bind:data=\"data\"\n      v-bind:config=\"config\"\n    >\n      <div v-if=\"isReadonly\">\n        <component \n          v-if=\"config.slot\" \n          v-bind:is=\"component_template\"\n          v-bind:config=\"config\"\n          v-bind:resource=\"resource\"\n          v-bind:data=\"data\"\n          v-bind:value=\"readonly_value\"\n        />\n        <span v-else>{{ readonly_value}}</span>\n      </div>\n      <b-datetimepicker\n        v-else\n        rounded\n        v-bind:placeholder=\"config.placeholder\"\n        v-bind:value=\"value\" \n        v-on:input=\"updateDateTimeValue\"\n        v-bind:editable=\"config.editable\"\n        v-bind:datepicker=\"config.datepicker\"\n        v-bind:timepicker=\"config.timepicker\"\n        icon-pack=\"fa\"\n        v-bind:icon=\"config.icon\"\n        v-bind:key=\"config.key\"\n      >\n        <template slot=\"left\">\n          <button class=\"button is-primary\"\n            v-on:click=\"updateDateTimeValue(new Date())\">\n            <b-icon icon=\"clock\"></b-icon>\n            <span>Now</span>\n          </button>\n        </template>\n        <template slot=\"right\">\n          <button class=\"button is-danger\"\n            v-on:click=\"updateValue(null)\">\n            <b-icon icon=\"times\"></b-icon>\n            <span>Clear</span>\n          </button>\n        </template>\n      </b-datetimepicker>\n    </furet-ui-form-field-common-tooltip-field>\n  `,\n  prototype: {\n    computed: {\n      readonly_value () {\n        moment.locale(i18n.locale);\n        const value = this.data[this.config.name];\n        const timezone = this.$store.state.global.userTimeZone;\n        if (value) return moment(value).tz(timezone).format('LLL');\n        return '';\n      },\n      value () {\n        moment.locale(i18n.locale);\n        const value = this.data[this.config.name];\n        if (!value) return null;\n        return new Date(Date.parse(value))\n      },\n    },\n    methods: {\n      updateDateTimeValue (value) {\n        this.updateValue(value.toISOString())\n      },\n    },\n  },\n})\nfields.form.datetime = 'furet-ui-form-field-datetime'\n","/**\nThis file is a part of the FuretUI project\n\n   Copyright (C) 2017 Jean-Sebastien SUZANNE <jssuzanne@anybox.fr>\n\nThis Source Code Form is subject to the terms of the Mozilla Public License,\nv. 2.0. If a copy of the MPL was not distributed with this file,You can\nobtain one at http://mozilla.org/MPL/2.0/.\n**/\nimport {defineComponent} from '../factory'\nimport {fields} from './fields';\nimport { listTemplate, thumbnailTemplate } from './common';\n\n\ndefineComponent('furet-ui-list-field-email', {\n  template: listTemplate,\n  extend: ['furet-ui-list-field-common'],\n})\nfields.list.email = 'furet-ui-list-field-email'\n\ndefineComponent('furet-ui-thumbnail-field-email', {\n  template: thumbnailTemplate,\n  extend: ['furet-ui-thumbnail-field-common'],\n})\nfields.thumbnail.email = 'furet-ui-thumbnail-field-email'\n\n\n/**\n * furet-ui-form-field-email component is used to manage email on form\n * resource (``furet-ui-resource-form``).\n *\n * @example\n *  <furet-ui-form-field-email\n *    :config=\"aConfigObject\"\n *    :data=\"aDataObject\"\n *    :resource=\"aResourceObject\"/>\n *\n * @param {Object} config - A config object to manage the behaviour of the component\n * @param {Object} data - An object that contains data to display. The key to use\n *                        in set in the `config.key`\n * @param {Object} resource - A resource object used to properly bind data with parents\n *                            tags and manage reactivity.\n *\n * ``config`` Object contains\n * @param {String} name - the key to use in the ``data`` object where is store the value\n * @param {String?} placeholder - A placeholder to help user to know what to collect\n * @param {String?} length - A max size\n * @param {String?} icon - A fontawesome icon name\n */\ndefineComponent('furet-ui-form-field-email', {\n  template: `\n    <furet-ui-form-field-common-tooltip-field\n      v-bind:resource=\"resource\"\n      v-bind:data=\"data\"\n      v-bind:config=\"config\"\n    >\n      <div v-if=\"isReadonly\">\n        <component \n          v-if=\"config.slot\" \n          v-bind:is=\"component_template\"\n          v-bind:config=\"config\"\n          v-bind:resource=\"resource\"\n          v-bind:data=\"data\"\n          v-bind:value=\"value\"\n        />\n        <span v-else>{{ value }}</span>\n      </div>\n      <b-input \n        v-else\n        type=\"email\"\n        v-bind:value=\"value\" \n        v-on:input=\"updateValue\"\n        v-bind:maxlength=\"config.maxlength\"\n        v-bind:placeholder=\"config.placeholder\"\n        icon-pack=\"fa\"\n        v-bind:icon=\"config.icon\"\n        v-bind:key=\"config.key\"\n      />\n    </furet-ui-form-field-common-tooltip-field>\n  `,\n  extend: ['furet-ui-form-field-common'],\n})\nfields.form.email = 'furet-ui-form-field-email'\n","/**\nThis file is a part of the FuretUI project\n\n   Copyright (C) 2017 Jean-Sebastien SUZANNE <jssuzanne@anybox.fr>\n\nThis Source Code Form is subject to the terms of the Mozilla Public License,\nv. 2.0. If a copy of the MPL was not distributed with this file,You can\nobtain one at http://mozilla.org/MPL/2.0/.\n**/\nimport { defineComponent } from \"../factory\";\nimport { fields } from \"./fields\";\nimport { listTemplate, thumbnailTemplate } from \"./common\";\n\ndefineComponent(\"furet-ui-list-field-integer\", {\n  template: listTemplate,\n  extend: [\"furet-ui-list-field-common\"]\n});\nfields.list.integer = \"furet-ui-list-field-integer\";\n\ndefineComponent(\"furet-ui-thumbnail-field-integer\", {\n  template: thumbnailTemplate,\n  extend: [\"furet-ui-thumbnail-field-common\"]\n});\nfields.thumbnail.integer = \"furet-ui-thumbnail-field-integer\";\n\n/**\n * furet-ui-form-field-integer component is used to manage integer on form\n * resource (``furet-ui-resource-form``).\n *\n * @example\n *  <furet-ui-form-field-integer\n *    :config=\"aConfigObject\"\n *    :data=\"aDataObject\"\n *    :resource=\"aResourceObject\"/>\n *\n * @param {Object} config - A config object to manage the behaviour of the component\n * @param {Object} data - An object that contains data to display. The key to use\n *                        in set in the `config.key`\n * @param {Object} resource - A resource object used to properly bind data with parents\n *                            tags and manage reactivity.\n *\n * ``config`` Object contains\n * @param {String} name - the key to use in the ``data`` object where is store the value\n * @param {String?} icon - An icon to display on the left of the component\n * @param {String?} placeholder - A placeholder to help user to know what to collect\n */\ndefineComponent(\"furet-ui-form-field-integer\", {\n  template: `\n    <furet-ui-form-field-common-tooltip-field\n      v-bind:resource=\"resource\"\n      v-bind:data=\"data\"\n      v-bind:config=\"config\"\n    >\n      <div v-if=\"isReadonly\">\n        <component \n          v-if=\"config.slot\" \n          v-bind:is=\"component_template\"\n          v-bind:config=\"config\"\n          v-bind:resource=\"resource\"\n          v-bind:data=\"data\"\n          v-bind:value=\"value\"\n        />\n        <span v-else>{{ value }}</span>\n      </div>\n      <b-numberinput \n        v-else\n        step=\"1\"\n        controlsPosition=\"compact\"\n        expanded\n        icon-pack=\"fa\"\n        v-bind:value=\"value\" \n        v-on:input=\"updateValue\"\n        v-bind:min=\"format_min_max(config.min)\"\n        v-bind:max=\"format_min_max(config.max)\"\n        v-bind:key=\"config.key\"\n        v-bind:icon=\"config.icon\"\n        v-bind:placeholder=\"config.placeholder\"\n      />\n    </furet-ui-form-field-common-tooltip-field>\n  `,\n  extend: [\"furet-ui-form-field-common\"],\n  prototype: {\n    methods: {\n      format_min_max (value) {\n        if (value === null) return undefined;\n        return value;\n      },\n    },\n  },\n});\nfields.form.integer = \"furet-ui-form-field-integer\";\n","/**\nThis file is a part of the FuretUI project\n\n   Copyright (C) 2017 Jean-Sebastien SUZANNE <jssuzanne@anybox.fr>\n\nThis Source Code Form is subject to the terms of the Mozilla Public License,\nv. 2.0. If a copy of the MPL was not distributed with this file,You can\nobtain one at http://mozilla.org/MPL/2.0/.\n**/\nimport {defineComponent} from '../factory'\nimport {fields} from './fields';\nimport { listTemplate, thumbnailTemplate } from './common';\n\n\ndefineComponent('furet-ui-list-field-function', {\n  template: listTemplate,\n  extend: ['furet-ui-list-field-common'],\n})\nfields.list.function = 'furet-ui-list-field-function'\n\n\ndefineComponent('furet-ui-thumbnail-field-function', {\n  template: thumbnailTemplate,\n  extend: ['furet-ui-thumbnail-field-common'],\n})\nfields.thumbnail.function = 'furet-ui-thumbnail-field-function'\n\n\ndefineComponent('furet-ui-form-field-function', {\n  template: `\n    <furet-ui-form-field-common-tooltip-field\n      v-bind:resource=\"resource\"\n      v-bind:data=\"data\"\n      v-bind:config=\"config\"\n    >\n      <component \n        v-if=\"config.slot\" \n        v-bind:is=\"component_template\"\n        v-bind:config=\"config\"\n        v-bind:resource=\"resource\"\n        v-bind:data=\"data\"\n        v-bind:value=\"value\"\n      />\n      <span v-else>{{ value }}</span>\n    </furet-ui-form-field-common-tooltip-field>\n  `,\n  extend: ['furet-ui-form-field-common'],\n})\nfields.form.function = 'furet-ui-form-field-function'\n","/**\nThis file is a part of the FuretUI project\n\n   Copyright (C) 2017 Jean-Sebastien SUZANNE <jssuzanne@anybox.fr>\n\nThis Source Code Form is subject to the terms of the Mozilla Public License,\nv. 2.0. If a copy of the MPL was not distributed with this file,You can\nobtain one at http://mozilla.org/MPL/2.0/.\n**/\nimport {defineComponent} from '../factory'\nimport {fields} from './fields';\n\nconst format = (value) => {\n  if (value)\n    try {\n        let parsed = value;\n        if (typeof value === \"string\") {\n            parsed = JSON.parse(value)\n        }\n      return JSON.stringify(parsed, null, 2);\n    } catch (e) {\n      // console.error('Fields.Json : parse json', e)\n      return null\n    }\n  return value;\n}\n\n\n/**\n * furet-ui-list-field-json component is used to manage json/jsonb on list\n * resource (``furet-ui-resource-list``).\n *\n * @example\n *  <furet-ui-form-field-json\n *    :config=\"aConfigObject\"\n *    :data=\"aDataObject\"\n *    :resource=\"aResourceObject\"/>\n *\n * @param {Object} config - A config object to manage the behaviour of the component\n * @param {Object} data - An object that contains data to display. The key to use\n *                        in set in the `config.key`\n * @param {Object} resource - A resource object used to properly bind data with parents\n *                            tags and manage reactivity.\n *\n * ``config`` Object contains\n * @param {String} name - the key to use in the ``data`` object where is store the value\n */\ndefineComponent('furet-ui-list-field-json', {\n  template: `\n    <div>\n      <span v-if=\"isHidden\" />\n      <component \n        v-else-if=\"config.slot\" \n        v-bind:is=\"component_template\"\n        v-bind:config=\"config\"\n        v-bind:resource=\"resource\"\n        v-bind:data=\"data\"\n        v-bind:value=\"value\"\n      />\n      <pre \n        v-else\n        v-bind:style=\"{width: '100%', padding: 2, backgroundColor: 'white'}\"\n      >{{value}}</pre>\n    </div>`,\n  extend: ['furet-ui-list-field-common'],\n  prototype: {\n    computed: {\n      value () {\n        const value = this.data[this.config.name] || '';\n        return format(value)\n      },\n    },\n  },\n})\nfields.list.json = 'furet-ui-list-field-json'\nfields.list.jsonb = 'furet-ui-list-field-json'\n\ndefineComponent('furet-ui-thumbnail-field-json', {\n  template: `\n    <furet-ui-thumbnail-field-common-tooltip-field\n      v-bind:resource=\"resource\"\n      v-bind:data=\"data\"\n      v-bind:config=\"config\"\n    >\n      <component \n        v-if=\"config.slot\" \n        v-bind:is=\"component_template\"\n        v-bind:config=\"config\"\n        v-bind:resource=\"resource\"\n        v-bind:data=\"data\"\n        v-bind:value=\"value\"\n      />\n      <pre \n        v-else v-bind:style=\"{width: '100%', padding: 2, backgroundColor: 'white'}\"\n      >{{value}}</pre>\n    </furet-ui-thumbnail-field-common-tooltip-field>\n  `,\n  extend: ['furet-ui-thumbnail-field-common'],\n  prototype: {\n    computed: {\n      value () {\n        const value = this.data[this.config.name] || '';\n        return format(value)\n      },\n    },\n  },\n})\nfields.thumbnail.json = 'furet-ui-thumbnail-field-json'\nfields.thumbnail.jsonb = 'furet-ui-thumbnail-field-json'\n\n/**\n * furet-ui-form-field-json component is used to manage json/jsonb on form\n * resource (``furet-ui-resource-form``).\n *\n * @example\n *  <furet-ui-form-field-json\n *    :config=\"aConfigObject\"\n *    :data=\"aDataObject\"\n *    :resource=\"aResourceObject\"/>\n *\n * @param {Object} config - A config object to manage the behaviour of the component\n * @param {Object} data - An object that contains data to display. The key to use\n *                        in set in the `config.key`\n * @param {Object} resource - A resource object used to properly bind data with parents\n *                            tags and manage reactivity.\n *\n * ``config`` Object contains\n * @param {String} name - the key to use in the ``data`` object where is store the value\n * @param {String?} placeholder - A placeholder to help user to know what to collect\n */\ndefineComponent('furet-ui-form-field-json', {\n  template: `\n    <furet-ui-form-field-common-tooltip\n      v-bind:resource=\"resource\"\n      v-bind:data=\"data\"\n      v-bind:config=\"config\"\n    >\n      <b-field \n        v-bind:label=\"config.label\"\n        v-bind:type=\"getType\"\n        v-bind:message=\"getMessage\"\n        v-bind:style=\"{'width': 'inherit'}\"\n      >\n        <div v-if=\"isReadonly\">\n          <component \n            v-if=\"config.slot\" \n            v-bind:is=\"component_template\"\n            v-bind:config=\"config\"\n            v-bind:resource=\"resource\"\n            v-bind:data=\"data\"\n            v-bind:value=\"value\"\n          />\n          <pre v-else\n              v-bind:style=\"{width: '100%', padding: 2, backgroundColor: 'white'}\"\n          >{{value}}</pre>\n        </div>\n        <b-input \n          type=\"textarea\"\n          v-else \n          v-bind:value=\"value\" \n          v-on:input=\"updateValue\"\n          v-bind:placeholder=\"config.placeholder\"\n        />\n      </b-field>\n    </furet-ui-form-field-common-tooltip>\n  `,\n  extend: ['furet-ui-form-field-common', 'furet-ui-form-field-common-tooltip-field'],\n  prototype: {\n    computed: {\n      raw_value () {\n        return this.data[this.config.name] || '';\n      },\n      value () {\n        return format(this.raw_value)\n      },\n      getType () {\n        if (this.isRequired) {\n          if (this.raw_value) {\n            if (this.isJsonInvalid) return 'is-danger';\n            return 'is-info';\n          }\n          return 'is-danger';\n        }\n        if (this.isJsonInvalid) return 'is-danger';\n        return '';\n      },\n      getMessage () {\n        if (this.isRequired) {\n          if (!this.value) {\n            if (this.isJsonInvalid) return this.$t('components.fields.json.invalid');\n            return this.$i18n.t('components.fields.common.required');\n          }\n        }\n        if (this.isJsonInvalid) return this.$t('components.fields.json.invalid');\n        return ''\n      },\n      isJsonInvalid () {\n        if (!this.isReadonly) {\n          if (! this.raw_value) return false\n          try {\n            JSON.parse(this.raw_value)\n          } catch (e) {\n            // console.error(e, this.raw_value)\n            return true;\n          }\n        }\n        return false;\n      },\n    },\n  },\n})\nfields.form.json = 'furet-ui-form-field-json'\nfields.form.jsonb = 'furet-ui-form-field-json'\n","/**\nThis file is a part of the FuretUI project\n\n   Copyright (C) 2017 Jean-Sebastien SUZANNE <jssuzanne@anybox.fr>\n\nThis Source Code Form is subject to the terms of the Mozilla Public License,\nv. 2.0. If a copy of the MPL was not distributed with this file,You can\nobtain one at http://mozilla.org/MPL/2.0/.\n**/\nimport { defineComponent } from \"../factory\";\nimport { fields } from \"./fields\";\nimport { listTemplate, thumbnailTemplate } from \"./common\";\n\ndefineComponent(\"furet-ui-common-field-float\", {\n  prototype: {\n    computed: {\n      value () {\n        const value =  this.data[this.config.name] || '';\n        if (value) return Number(value).toFixed(this.config.rounded || 2)\n        return '';\n      },\n    }\n  }\n});\n\ndefineComponent(\"furet-ui-list-field-float\", {\n  template: listTemplate,\n  extend: [\"furet-ui-list-field-common\", \"furet-ui-common-field-float\"],\n});\nfields.list.float = \"furet-ui-list-field-float\";\n\ndefineComponent(\"furet-ui-thumbnail-field-float\", {\n  template: thumbnailTemplate,\n  extend: [\"furet-ui-thumbnail-field-common\", \"furet-ui-common-field-float\"],\n});\nfields.thumbnail.float = \"furet-ui-thumbnail-field-float\";\n\n/**\n * furet-ui-form-fieldfloatinteger component is used to manage float on form\n * resource (``furet-ui-resource-form``).\n *\n * @example\n *  <furet-ui-form-field-float\n *    :config=\"aConfigObject\"\n *    :data=\"aDataObject\"\n *    :resource=\"aResourceObject\"/>\n *\n * @param {Object} config - A config object to manage the behaviour of the component\n * @param {Object} data - An object that contains data to display. The key to use\n *                        in set in the `config.key`\n * @param {Object} resource - A resource object used to properly bind data with parents\n *                            tags and manage reactivity.\n *\n * ``config`` Object contains\n * @param {String} name - the key to use in the ``data`` object where is store the value\n * @param {String?} icon - An icon to display on the left of the component\n * @param {String?} placeholder - A placeholder to help user to know what to collect\n * @param {Integer?} rounded - number of decimal for the float part\n */\ndefineComponent(\"furet-ui-form-field-float\", {\n  template: `\n    <furet-ui-form-field-common-tooltip-field\n      v-bind:resource=\"resource\"\n      v-bind:data=\"data\"\n      v-bind:config=\"config\"\n    >\n      <div v-if=\"isReadonly\">\n        <component \n          v-if=\"config.slot\" \n          v-bind:is=\"component_template\"\n          v-bind:config=\"config\"\n          v-bind:resource=\"resource\"\n          v-bind:data=\"data\"\n          v-bind:value=\"rounded_value\"\n        />\n        <span v-else>{{ rounded_value }}</span>\n      </div>\n      <b-numberinput \n        v-else\n        v-bind:step=\"step\"\n        controlsPosition=\"compact\"\n        expanded\n        icon-pack=\"fa\"\n        v-bind:value=\"value\" \n        v-on:input=\"updateValue\"\n        v-bind:min=\"format_min_max(config.min)\"\n        v-bind:max=\"format_min_max(config.max)\"\n        v-bind:key=\"config.key\"\n        v-bind:icon=\"config.icon\"\n        v-bind:placeholder=\"config.placeholder\"\n      />\n    </furet-ui-form-field-common-tooltip-field>\n  `,\n  extend: [\"furet-ui-form-field-common\"],\n  prototype: {\n    computed: {\n      rounded () {\n        return this.config.rounded || 2;\n      },\n      step () {\n        return Math.pow(0.1, this.rounded).toFixed(this.rounded);\n      },\n      rounded_value () {\n        return Number(this.value).toFixed(this.rounded);\n      },\n    },\n    methods: {\n      format_min_max (value) {\n        if (value === null) return undefined;\n        return value;\n      },\n    },\n  },\n});\nfields.form.float = \"furet-ui-form-field-float\";\n","import { fields } from \"./fields\";\nfields.list.decimal = \"furet-ui-list-field-float\";\nfields.thumbnail.decimal = \"furet-ui-thumbnail-field-float\";\nfields.form.decimal = \"furet-ui-form-field-float\";\n","/**\nThis file is a part of the FuretUI project\n\n   Copyright (C) 2017 Jean-Sebastien SUZANNE <jssuzanne@anybox.fr>\n\nThis Source Code Form is subject to the terms of the Mozilla Public License,\nv. 2.0. If a copy of the MPL was not distributed with this file,You can\nobtain one at http://mozilla.org/MPL/2.0/.\n**/\nimport {defineComponent} from '../factory'\nimport {fields} from './fields';\nimport { listTemplate, thumbnailTemplate } from './common';\nimport _ from 'underscore';\nimport {safe_eval} from './common';\n\n\ndefineComponent('furet-ui-common-field-password', {\n  prototype: {\n    computed: {\n      value () {\n        const value = this.data[this.config.name] || null\n        if (!value) return ''\n        return _.map(value, () => '*').join('');\n      },\n    },\n  },\n})\n\n\ndefineComponent('furet-ui-list-field-password', {\n  template: listTemplate,\n  extend: ['furet-ui-list-field-common', 'furet-ui-common-field-password'],\n})\nfields.list.password = 'furet-ui-list-field-password'\n\n\ndefineComponent('furet-ui-thumbnail-field-password', {\n  template: thumbnailTemplate,\n  extend: ['furet-ui-thumbnail-field-common', 'furet-ui-common-field-password'],\n})\nfields.thumbnail.password = 'furet-ui-thumbnail-field-password'\n\ndefineComponent('furet-ui-form-field-password', {\n  template: `\n    <furet-ui-form-field-common-tooltip-field\n      v-bind:resource=\"resource\"\n      v-bind:data=\"data\"\n      v-bind:config=\"config\"\n    >\n      <div v-if=\"isReadonly\">\n        <component \n          v-if=\"config.slot\" \n          v-bind:is=\"component_template\"\n          v-bind:config=\"config\"\n          v-bind:resource=\"resource\"\n          v-bind:data=\"data\"\n          v-bind:value=\"readonly_value\"\n        />\n        <span v-else>{{ readonly_value }}</span>\n      </div>\n      <b-input \n        v-else\n        v-bind:value=\"value\" \n        v-on:input=\"updateValue\"\n        v-bind:maxlength=\"config.maxlength\"\n        v-bind:placeholder=\"config.placeholder\"\n        icon-pack=\"fa\"\n        v-bind:icon=\"config.icon\"\n        type=\"password\"\n        v-bind:password-reveal=\"reveal\"\n        v-bind:key=\"config.key\"\n      />\n    </furet-ui-form-field-common-tooltip-field>\n  `,\n  extend: ['furet-ui-form-field-common'],\n  prototype: {\n    computed: {\n      readonly_value () {\n        const value = this.data[this.config.name] || null\n        if (!value) return ''\n        return _.map(value, () => '*').join('');\n      },\n      reveal () {\n        return safe_eval(this.config.reveal, this.data, this.resource);\n      },\n    },\n  }\n})\nfields.form.password = 'furet-ui-form-field-password'\n","/**\nThis file is a part of the FuretUI project\n\n   Copyright (C) 2017 Jean-Sebastien SUZANNE <jssuzanne@anybox.fr>\n\nThis Source Code Form is subject to the terms of the Mozilla Public License,\nv. 2.0. If a copy of the MPL was not distributed with this file,You can\nobtain one at http://mozilla.org/MPL/2.0/.\n**/\nimport { VueEditor } from 'vue2-editor'\nimport {defineComponent} from '../factory'\nimport {fields} from './fields';\n\n\ndefineComponent('furet-ui-list-field-rich-text', {\n  template: `\n    <div>\n      <span v-if=\"isHidden\" />\n      <div \n        v-else \n        class=\"content is-small\"\n        v-html=\"value\" \n        v-bind:style=\"{width: '100%'}\"\n      />\n    </div>`,\n  extend: ['furet-ui-list-field-common'],\n})\nfields.list.richtext = 'furet-ui-list-field-rich-text'\n\ndefineComponent('furet-ui-thumbnail-field-rich-text', {\n  template: `\n    <furet-ui-thumbnail-field-common-tooltip-field\n      v-bind:resource=\"resource\"\n      v-bind:data=\"data\"\n      v-bind:config=\"config\"\n    >\n      <div \n        class=\"content is-small\"\n        v-html=\"value\" \n        v-bind:style=\"{width: '100%'}\"\n      />\n    </furet-ui-thumbnail-field-common-tooltip-field>\n  `,\n  extend: ['furet-ui-thumbnail-field-common'],\n})\nfields.thumbnail.richtext = 'furet-ui-thumbnail-field-rich-text'\n\ndefineComponent('furet-ui-form-field-rich-text', {\n  template: `\n    <furet-ui-form-field-common-tooltip-field\n      v-bind:resource=\"resource\"\n      v-bind:data=\"data\"\n      v-bind:config=\"config\"\n    >\n      <div\n        class=\"box content is-small\"\n        v-if=\"isReadonly\"\n        v-html=\"value\"\n      />\n      <vue-editor \n        v-else\n        v-bind:placeholder=\"config.placeholder\"\n        v-model=\"value\"\n      />\n    </furet-ui-form-field-common-tooltip-field>\n  `,\n  extend: ['furet-ui-form-field-common'],\n  prototype: {\n    components: {\n      VueEditor\n    },\n    computed: {\n      value: {\n        get: function () {\n          return this.data[this.config.name] || null;\n        },\n        set: function (value) {\n          this.updateValue(value);\n        },\n      },\n    },\n  },\n})\nfields.form.richtext = 'furet-ui-form-field-rich-text'\n","/**\nThis file is a part of the FuretUI project\n\n   Copyright (C) 2017 Jean-Sebastien SUZANNE <jssuzanne@anybox.fr>\n\nThis Source Code Form is subject to the terms of the Mozilla Public License,\nv. 2.0. If a copy of the MPL was not distributed with this file,You can\nobtain one at http://mozilla.org/MPL/2.0/.\n**/\nimport _ from 'underscore';\nimport {defineComponent} from '../factory'\nimport {fields} from './fields';\n\n\ndefineComponent('furet-ui-common-field-selection', {\n  prototype: {\n    computed: {\n      value () {\n          const selections = this.config.selections || {};\n          const value = this.data[this.config.name] || '';\n          if (selections[value] == undefined) return ' --- ';\n          return this.$t(selections[value]);\n      },\n      color () {\n          const colors = this.config.colors || {};\n          const value = this.data[this.config.name] || '';\n          return colors[value];\n      },\n    },\n  },\n})\nfields.list.selection = 'furet-ui-list-field-selection'\n\n\ndefineComponent('furet-ui-list-field-selection', {\n  template: `\n    <div>\n      <span v-if=\"isHidden\" />\n      <component \n        v-else-if=\"config.slot\" \n        v-bind:is=\"component_template\"\n        v-bind:config=\"config\"\n        v-bind:resource=\"resource\"\n        v-bind:data=\"data\"\n        v-bind:value=\"value\"\n      />\n      <div v-else>\n        <b-tag v-if=\"color !== undefined\" v-bind:type=\"color\">{{value}}</b-tag>\n        <span v-else>{{value}}</span>\n      </div>\n    </div>\n  `,\n  extend: ['furet-ui-list-field-common', 'furet-ui-common-field-selection'],\n})\nfields.list.selection = 'furet-ui-list-field-selection'\n\n\ndefineComponent('furet-ui-thumbnail-field-selection', {\n  template: `\n    <furet-ui-thumbnail-field-common-tooltip-field\n      v-bind:resource=\"resource\"\n      v-bind:data=\"data\"\n      v-bind:config=\"config\"\n    >\n      <component \n        v-if=\"config.slot\" \n        v-bind:is=\"component_template\"\n        v-bind:config=\"config\"\n        v-bind:resource=\"resource\"\n        v-bind:data=\"data\"\n        v-bind:value=\"value\"\n      />\n      <div v-else>\n        <b-tag v-if=\"color !== undefined\" v-bind:type=\"color\">{{value}}</b-tag>\n        <span v-else>{{value}}</span>\n      </div>\n    </furet-ui-thumbnail-field-common-tooltip-field>\n  `,\n  extend: ['furet-ui-thumbnail-field-common', 'furet-ui-common-field-selection'],\n})\nfields.thumbnail.selection = 'furet-ui-thumbnail-field-selection'\n\n\ndefineComponent('furet-ui-form-field-selection', {\n  template: `\n    <furet-ui-form-field-common-tooltip-field\n      v-bind:resource=\"resource\"\n      v-bind:data=\"data\"\n      v-bind:config=\"config\"\n    >\n      <div v-if=\"isReadonly\">\n        <component \n          v-if=\"config.slot\" \n          v-bind:is=\"component_template\"\n          v-bind:config=\"config\"\n          v-bind:resource=\"resource\"\n          v-bind:data=\"data\"\n          v-bind:value=\"formated_value\"\n        />\n        <div v-else>\n          <b-tag v-if=\"color !== undefined\" v-bind:type=\"color\">{{formated_value}}</b-tag>\n          <span v-else>{{formated_value}}</span>\n        </div>\n      </div>\n      <div class=\"field has-addons\" v-else>\n        <p class=\"control\" v-if=\"color\">\n          <a class=\"button\">\n            <b-icon icon=\"info-circle\" v-bind:type=\"color\"/>\n          </a>\n        </p>\n        <b-select \n          v-bind:placeholder=\"config.placeholder\"\n          icon-pack=\"fa\"\n          v-bind:icon=\"config.icon\"\n          v-bind:value=\"value\"\n          expanded\n          v-on:input=\"updateValue\"\n          v-bind:key=\"config.key\"\n        >\n          <option \n            v-for=\"option in getSelections\"\n            v-bind:key=\"option.value\"\n            v-bind:value=\"option.value\"\n          >\n            {{ option.label }}\n          </option>\n        </b-select>\n      </div>\n    </furet-ui-form-field-common-tooltip-field>\n  `,\n  extend: ['furet-ui-form-field-common'],\n  prototype: {\n    computed: {\n      formated_value () {\n        const selections = this.config.selections || {};\n        if (selections[this.value] == undefined) return ' --- ';\n        return this.$t(selections[this.value]);\n      },\n      getSelections () {\n        const colors = this.config.colors || {};\n        const selections = [];\n          if (!this.isRequired) selections.push({label: '', value: null, color: null});\n\n        _.each(this.config.selections, (label, value) => {\n          selections.push({value, label: this.$t(label), color: colors[value]})\n        });\n\n        return selections;\n      },\n      color () {\n        const colors = this.config.colors || {};\n        return colors[this.value];\n      },\n    },\n  },\n})\nfields.form.selection = 'furet-ui-form-field-selection'\n","/**\nThis file is a part of the FuretUI project\n\n   Copyright (C) 2017 Jean-Sebastien SUZANNE <jssuzanne@anybox.fr>\n\nThis Source Code Form is subject to the terms of the Mozilla Public License,\nv. 2.0. If a copy of the MPL was not distributed with this file,You can\nobtain one at http://mozilla.org/MPL/2.0/.\n**/\nimport _ from 'underscore';\nimport {defineComponent} from '../factory'\nimport {fields} from './fields';\n\ndefineComponent('furet-ui-field-statusbar-common', {\n  prototype: {\n    computed: {\n      getStates () {\n        const res = [];\n        _.each(this.config.selections, (label, value) => {\n          let type = '';\n          let added = true;\n          const isDone = (this.config['done-states'] || []).indexOf(value) !== -1 ? true : false;\n          const isDangerous = (this.config['dangerous-states'] || []).indexOf(value) !== -1 ? true : false;\n\n          if (this.value == value) {\n            if (isDone) type = 'is-success';\n            else if (isDangerous) type = 'is-danger';\n            else type = 'is-info';\n          } else if (isDangerous) added = false;\n\n          if (added) res.push({value, label, type})\n        })\n        return res\n      },\n    },\n  },\n})\n\ndefineComponent('furet-ui-list-field-statusbar', {\n  template:`\n    <span v-if=\"isHidden\" />\n    <b-taglist v-else attached>\n      <b-tag \n        v-for=\"state in getStates\" \n        v-bind:key=\"state.value\" \n        v-bind:type=\"state.type\" \n        size=\"is-medium\"\n      >\n        {{ state.label }}\n      </b-tag>\n    </b-taglist>\n  `,\n  extend: ['furet-ui-list-field-common', 'furet-ui-field-statusbar-common'],\n})\nfields.list.statusbar = 'furet-ui-list-field-statusbar'\n\ndefineComponent('furet-ui-thumbnail-field-statusbar', {\n  template: `\n    <furet-ui-form-field-common-tooltip\n      v-bind:resource=\"resource\"\n      v-bind:data=\"data\"\n      v-bind:config=\"config\"\n    >\n      <b-taglist attached>\n        <b-tag \n          v-for=\"state in getStates\" \n          v-bind:key=\"state.value\" \n          v-bind:type=\"state.type\" \n          size=\"is-small\"\n        >\n          {{ state.label }}\n        </b-tag>\n      </b-taglist>\n    </furet-ui-form-field-common-tooltip>\n  `,\n  extend: ['furet-ui-thumbnail-field-common', 'furet-ui-field-statusbar-common'],\n})\nfields.thumbnail.statusbar = 'furet-ui-thumbnail-field-statusbar'\n\ndefineComponent('furet-ui-form-field-statusbar', {\n  template: `\n    <furet-ui-form-field-common-tooltip\n      v-bind:resource=\"resource\"\n      v-bind:data=\"data\"\n      v-bind:config=\"config\"\n    >\n      <b-taglist attached>\n        <b-tag type=\"is-dark\" size=\"is-medium\">{{ config.label }}</b-tag>\n        <b-tag \n          v-for=\"state in getStates\" \n          v-bind:key=\"state.value\" \n          v-bind:type=\"state.type\" \n          size=\"is-medium\"\n        >\n          {{ state.label }}\n        </b-tag>\n      </b-taglist>\n    </furet-ui-form-field-common-tooltip>\n  `,\n  extend: ['furet-ui-form-field-common', 'furet-ui-field-statusbar-common'],\n})\nfields.form.statusbar = 'furet-ui-form-field-statusbar'\n","/**\nThis file is a part of the FuretUI project\n\n   Copyright (C) 2017 Jean-Sebastien SUZANNE <jssuzanne@anybox.fr>\n\nThis Source Code Form is subject to the terms of the Mozilla Public License,\nv. 2.0. If a copy of the MPL was not distributed with this file,You can\nobtain one at http://mozilla.org/MPL/2.0/.\n**/\nimport {defineComponent} from '../factory'\nimport {fields} from './fields';\nimport { listTemplate, thumbnailTemplate } from './common';\n\n\ndefineComponent('furet-ui-list-field-string', {\n  template: listTemplate,\n  extend: ['furet-ui-list-field-common'],\n})\nfields.list.string = 'furet-ui-list-field-string'\n\n\ndefineComponent('furet-ui-thumbnail-field-string', {\n  template: thumbnailTemplate,\n  extend: ['furet-ui-thumbnail-field-common'],\n})\nfields.thumbnail.string = 'furet-ui-thumbnail-field-string'\n\n\ndefineComponent('furet-ui-form-field-string', {\n  template: `\n    <furet-ui-form-field-common-tooltip-field\n      v-bind:resource=\"resource\"\n      v-bind:data=\"data\"\n      v-bind:config=\"config\"\n    >\n      <div v-if=\"isReadonly\">\n        <component \n          v-if=\"config.slot\" \n          v-bind:is=\"component_template\"\n          v-bind:config=\"config\"\n          v-bind:resource=\"resource\"\n          v-bind:data=\"data\"\n          v-bind:value=\"value\"\n        />\n        <span v-else>{{ value }}</span>\n      </div>\n      <b-input \n        v-else\n        v-bind:value=\"value\" \n        v-on:input=\"updateValue\"\n        v-bind:maxlength=\"config.maxlength\"\n        v-bind:placeholder=\"config.placeholder\"\n        icon-pack=\"fa\"\n        v-bind:icon=\"config.icon\"\n        v-bind:key=\"config.key\"\n      />\n    </furet-ui-form-field-common-tooltip-field>\n  `,\n  extend: ['furet-ui-form-field-common'],\n})\nfields.form.string = 'furet-ui-form-field-string'\n","/**\nThis file is a part of the FuretUI project\n\n   Copyright (C) 2017 Jean-Sebastien SUZANNE <jssuzanne@anybox.fr>\n\nThis Source Code Form is subject to the terms of the Mozilla Public License,\nv. 2.0. If a copy of the MPL was not distributed with this file,You can\nobtain one at http://mozilla.org/MPL/2.0/.\n**/\nimport {fields} from './fields';\n\n\nfields.list.timestamp = 'furet-ui-list-field-datetime'\nfields.thumbnail.timestamp = 'furet-ui-thumbnail-field-datetime'\nfields.form.timestamp = 'furet-ui-form-field-datetime'\n","/**\nThis file is a part of the FuretUI project\n\n   Copyright (C) 2017 Jean-Sebastien SUZANNE <jssuzanne@anybox.fr>\n\nThis Source Code Form is subject to the terms of the Mozilla Public License,\nv. 2.0. If a copy of the MPL was not distributed with this file,You can\nobtain one at http://mozilla.org/MPL/2.0/.\n**/\nimport {defineComponent} from '../factory'\nimport {fields} from './fields';\nimport { listTemplate, thumbnailTemplate } from './common';\n\n\ndefineComponent('furet-ui-list-field-url', {\n  template: listTemplate,\n  extend: ['furet-ui-list-field-common'],\n})\nfields.list.url = 'furet-ui-list-field-url'\n\n\ndefineComponent('furet-ui-thumbnail-field-url', {\n  template: thumbnailTemplate,\n  extend: ['furet-ui-thumbnail-field-common'],\n})\nfields.thumbnail.url = 'furet-ui-thumbnail-field-url'\n\n\n/**\n * furet-ui-form-field-url component is used to manage url/uri on form\n * resource (``furet-ui-resource-form``).\n *\n * @example\n *  <furet-ui-form-field-url\n *    :config=\"aConfigObject\"\n *    :data=\"aDataObject\"\n *    :resource=\"aResourceObject\"/>\n *\n * @param {Object} config - A config object to manage the behaviour of the component\n * @param {Object} data - An object that contains data to display. The key to use\n *                        in set in the `config.key`\n * @param {Object} resource - A resource object used to properly bind data with parents\n *                            tags and manage reactivity.\n *\n * ``config`` Object contains\n * @param {String} name - the key to use in the ``data`` object where is store the value\n * @param {String?} placeholder - A placeholder to help user to know what to collect\n * @param {String?} length - A max size\n * @param {String?} icon - A fontawesome icon name\n */\ndefineComponent('furet-ui-form-field-url', {\n  template: `\n    <furet-ui-form-field-common-tooltip-field\n      v-bind:resource=\"resource\"\n      v-bind:data=\"data\"\n      v-bind:config=\"config\"\n    >\n      <div v-if=\"isReadonly\">\n        <component \n          v-if=\"config.slot\" \n          v-bind:is=\"component_template\"\n          v-bind:config=\"config\"\n          v-bind:resource=\"resource\"\n          v-bind:data=\"data\"\n          v-bind:value=\"value\"\n        />\n        <span v-else>{{ value }}</span>\n      </div>\n      <div \n        v-else\n        class=\"field has-addons\" \n      >\n        <p class=\"control is-expanded\">\n          <b-input \n            v-bind:value=\"value\" \n            v-on:input=\"updateValue\"\n            v-bind:maxlength=\"config.maxlength\"\n            v-bind:placeholder=\"config.placeholder\"\n            icon-pack=\"fa\"\n            v-bind:icon=\"config.icon\"\n            v-bind:key=\"config.key\"\n          />\n        </p>\n        <p class=\"control\" v-if=\"value\">\n          <a class=\"button\" v-bind:href=\"value\" target=\"_blank\">\n            <b-icon icon=\"external-link-alt\"></b-icon>\n          </a>\n        </p>\n      </div>\n    </furet-ui-form-field-common-tooltip-field>\n  `,\n  extend: ['furet-ui-form-field-common'],\n})\nfields.form.url = 'furet-ui-form-field-url'\n","/**\nThis file is a part of the FuretUI project\n\n   Copyright (C) 2017 Jean-Sebastien SUZANNE <jssuzanne@anybox.fr>\n\nThis Source Code Form is subject to the terms of the Mozilla Public License,\nv. 2.0. If a copy of the MPL was not distributed with this file,You can\nobtain one at http://mozilla.org/MPL/2.0/.\n**/\nimport { defineComponent } from \"../../factory\";\nimport { fields } from \"../fields\";\n\n/**\n * furet-ui-field-many2one component is a mixin used to manage relationship many2one\n *\n * @mixin\n *\n * @param {Object} config - A config object to manage the behaviour of the component\n * @param {Object} data - An object that contains data to display. The key to use\n *                        in set in the `config.key`\n * @param {Object} resource - A resource object used to properly bind data with parents\n *                            tags and manage reactivity.\n *\n * ``config`` Object contains\n * @param {String} name - the key to use in the ``data`` object where is store the value\n * @param {String} model - A model name, needed to display the data\n * @param {String} display - An evaluate string to display the entry\n */\ndefineComponent(\"furet-ui-field-many2one-common\", {\n  prototype: {\n    computed: {\n      value() {\n        const value = this.data[this.config.name] || \"\";\n        if (value) {\n          const model = this.config.model;\n          return this.format(this.config.display, this.getEntry(model, value));\n        } else return \"\";\n      },\n    },\n    methods: {\n      onClick() {\n        const value = this.data[this.config.name];\n        if (value) this.openResource(value);\n      },\n    },\n  },\n});\n\n/**\n * furet-ui-list-field-many2one component is used to manage relationship many2one on list\n * resource (``furet-ui-resource-list``).\n *\n * Extend Mixins:\n *  * @see ``furet-ui-list-field-common``\n *  * @see ``furet-ui-field-relationship``\n *  * @see ``furet-ui-field-many2one-common``\n *\n * @example\n *  <furet-ui-list-field-many2one\n *    :config=\"aConfigObject\"\n *    :data=\"aDataObject\"\n *    :resource=\"aResourceObject\"/>\n *\n * @mixes <furet-ui-list-field-common>, <furet-ui-field-relationship>, <furet-ui-field-many2one-common>\n *\n * @param {Object} config - A config object to manage the behaviour of the component\n * @param {Object} data - An object that contains data to display. The key to use\n *                        in set in the `config.key`\n * @param {Object} resource - A resource object used to properly bind data with parents\n *                            tags and manage reactivity.\n *\n * ``config`` Object contains\n * @param {String} name - the key to use in the ``data`` object where is store the value\n * @param {String} model - A model name, needed to display the data\n * @param {String} display - An evaluate string to display the entry\n * @param {String} slot - An evaluate template to display the entry more power full that display\n */\ndefineComponent(\"furet-ui-list-field-many2one\", {\n  template: `\n    <div>\n      <span v-if=\"isHidden\" />\n      <a v-else-if=\"config.slot\" v-on:click.stop=\"onClick\">\n        <component \n          v-bind:is=\"component_template\"\n          v-bind:config=\"config\"\n          v-bind:resource=\"resource\"\n          v-bind:data=\"data\"\n          v-bind:relation=\"slot_fields\"\n        />\n      </a>\n      <a v-else v-on:click.stop=\"onClick\">{{value}}</a>\n    </div>`,\n  extend: [\n    \"furet-ui-list-field-common\",\n    \"furet-ui-field-relationship\",\n    \"furet-ui-field-many2one-common\",\n  ],\n});\nfields.list.many2one = \"furet-ui-list-field-many2one\";\n\ndefineComponent(\"furet-ui-thumbnail-field-many2one\", {\n  template: `\n    <furet-ui-thumbnail-field-common-tooltip-field\n      v-bind:resource=\"resource\"\n      v-bind:data=\"data\"\n      v-bind:config=\"config\"\n    >\n      <a v-if=\"config.slot\" v-on:click.stop=\"onClick\">\n        <component \n          v-bind:is=\"component_template\"\n          v-bind:config=\"config\"\n          v-bind:resource=\"resource\"\n          v-bind:data=\"data\"\n          v-bind:relation=\"slot_fields\"\n        />\n      </a>\n      <a v-else v-on:click.stop=\"onClick\">{{value}}</a>\n    </furet-ui-thumbnail-field-common-tooltip-field>\n  `,\n  extend: [\n    \"furet-ui-thumbnail-field-common\",\n    \"furet-ui-field-relationship\",\n    \"furet-ui-field-many2one-common\",\n    \"furet-ui-field-relationship-search\",\n  ],\n});\nfields.thumbnail.many2one = \"furet-ui-thumbnail-field-many2one\";\n\n/**\n * furet-ui-form-field-many2one component is used to manage relationship many2one on form\n * resource (``furet-ui-resource-form``).\n *\n * Extend Mixins:\n *  * @see ``furet-ui-form-field-common``\n *  * @see ``furet-ui-field-relationship``\n *  * @see ``furet-ui-field-many2one-common``\n *\n * @example\n *  <furet-ui-form-field-many2one\n *    :config=\"aConfigObject\"\n *    :data=\"aDataObject\"\n *    :resource=\"aResourceObject\"/>\n *\n * @mixes <furet-ui-form-field-common>, <furet-ui-field-relationship>, <furet-ui-field-many2one-common>\n *\n * @param {Object} config - A config object to manage the behaviour of the component\n * @param {Object} data - An object that contains data to display. The key to use\n *                        in set in the `config.key`\n * @param {Object} resource - A resource object used to properly bind data with parents\n *                            tags and manage reactivity.\n *\n * ``config`` Object contains\n * @param {String} name - the key to use in the ``data`` object where is store the value\n * @param {String?} icon - An icon to display on the left of the component\n * @param {String?} placeholder - A placeholder to help user to know what to collect\n * @param {String} model - A model name, needed to display the data\n * @param {Array[String]} fields - Names of field to get by api\n * @param {Array[String]} filter_by - Names of field used to create filter during call of the api\n * @param {String} display - An evaluate string to display the entry\n * @param {Integer} limit - Apply a limit in the api query\n */\ndefineComponent(\"furet-ui-form-field-many2one\", {\n  template: `\n    <furet-ui-form-field-common-tooltip-field\n      v-bind:resource=\"resource\"\n      v-bind:data=\"data\"\n      v-bind:config=\"config\"\n    >\n      <a v-if=\"isReadonly\" v-on:click.stop=\"onClick\">\n        <component \n          v-if=\"config.slot\"\n          v-bind:is=\"component_template\"\n          v-bind:config=\"config\"\n          v-bind:resource=\"resource\"\n          v-bind:data=\"data\"\n          v-bind:relation=\"slot_fields\"\n        />\n        <span v-else>{{value}}</span>\n      </a>\n      <b-autocomplete\n        v-else\n        v-bind:value=\"value\"\n        v-bind:data=\"choices\"\n        v-bind:placeholder=\"config.placeholder\"\n        v-bind:max-height=\"config.maxheight ? config.maxheight : '200px'\"\n        icon-pack=\"fa\"\n        v-bind:check-infinite-scroll=\"true\"\n        v-bind:icon=\"config.icon\"\n        v-on:typing=\"onChange\"\n        v-on:select=\"onSelect\"\n        v-on:infinite-scroll=\"getMoreAsyncData\"\n      >\n        <template slot-scope=\"props\">\n          <component \n            v-if=\"config.slot\"\n            v-bind:is=\"component_template\"\n            v-bind:config=\"config\"\n            v-bind:resource=\"resource\"\n            v-bind:data=\"data\"\n            v-bind:relation=\"props.option.relation\"\n          />\n          <span v-else>\n            {{ props.option.label }}\n          </span>\n        </template>\n        <template #footer>\n          <span v-if=\"((page * config.limit) > total)\" class=\"has-text-grey\">{{ $t('components.fields.relationship.no_more') }}</span>\n        </template>\n        <template #empty>\n          <span class=\"has-text-grey\">{{ $t('components.fields.relationship.not_found') }}</span>\n        </template>\n      </b-autocomplete>\n    </furet-ui-form-field-common-tooltip-field>\n  `,\n  extend: [\n    \"furet-ui-form-field-common\",\n    \"furet-ui-field-relationship\",\n    \"furet-ui-field-many2one-common\",\n    \"furet-ui-field-relationship-search\",\n  ],\n  prototype: {\n    methods: {\n      onSelect(value) {\n        this.updateValue(value.pk);\n      },\n      beforeOnChange() {\n        if (this.value) this.updateValue(null);\n      },\n    },\n  },\n});\nfields.form.many2one = \"furet-ui-form-field-many2one\";\n","/**\nThis file is a part of the FuretUI project\n\n   Copyright (C) 2017 Jean-Sebastien SUZANNE <jssuzanne@anybox.fr>\n\nThis Source Code Form is subject to the terms of the Mozilla Public License,\nv. 2.0. If a copy of the MPL was not distributed with this file,You can\nobtain one at http://mozilla.org/MPL/2.0/.\n**/\nimport { defineComponent } from '../../factory'\nimport { fields } from '../fields';\nimport { RelationShipX2MList, RelationShipX2MThumbnail } from './common';\nimport { pk2string } from \"../../../store/modules/data\";\n\ndefineComponent('furet-ui-common-field-one2many', {\n  prototype: {\n    computed: {\n      values () {\n        const res = [];\n        const display = this.config.display;\n        const model = this.config.model;\n        this.value.forEach(pk => {\n          res.push({\n            pk,\n            label: this.format(display, this.getEntry(model, pk)),\n          });\n        });\n        return res;\n      },\n    },\n  },\n})\n\n/**\n * furet-ui-list-field-one2many component is used to manage relationship one2many on list\n * resource (``furet-ui-resource-list``).\n *\n * Extend Mixins:\n *  * @see ``furet-ui-list-field-common``\n *  * @see ``furet-ui-field-relationship``\n *\n * @example\n *  <furet-ui-list-field-one2many\n *    :config=\"aConfigObject\"\n *    :data=\"aDataObject\"\n *    :resource=\"aResourceObject\"/>\n *\n * @mixes <furet-ui-list-field-common>, <furet-ui-field-relationship>\n *\n * @param {Object} config - A config object to manage the behaviour of the component\n * @param {Object} data - An object that contains data to display. The key to use\n *                        in set in the `config.key`\n * @param {Object} resource - A resource object used to properly bind data with parents\n *                            tags and manage reactivity.\n *\n * ``config`` Object contains\n * @param {String} name - the key to use in the ``data`` object where is store the value\n * @param {String} model - A model name, needed to display the data\n * @param {String} display - An evaluate string to display the entry\n */\ndefineComponent('furet-ui-list-field-one2many', {\n  template: RelationShipX2MList,\n  extend: [\n    'furet-ui-list-field-common',\n    'furet-ui-field-relationship', \n    'furet-ui-common-field-one2many'\n  ],\n})\nfields.list.one2many = 'furet-ui-list-field-one2many'\n\ndefineComponent(\"furet-ui-thumbnail-field-one2many\", {\n  template: RelationShipX2MThumbnail,\n  extend: [\n    \"furet-ui-thumbnail-field-common\", \n    \"furet-ui-field-relationship\", \n    \"furet-ui-common-field-one2many\"\n  ],\n});\nfields.thumbnail.one2many = \"furet-ui-thumbnail-field-one2many\";\n\n\ndefineComponent('furet-ui-page-o2m-list-header', {\n  template: `\n    <header id=\"furet-ui-page-multi-entries-header\">\n      <div class=\"level\">\n        <div class=\"level-left\">\n          <div class=\"buttons is-grouped is-left\">\n            <div v-if=\"can_go_to_new\">\n              <b-dropdown \n                :triggers=\"['hover']\" \n                v-if=\"go_to_new_choices.length\"\n                v-bind:disabled=\"readonly\"\n              >\n                <button \n                  class=\"button is-x2m-created is-small\" \n                  slot-scope=\"{ active }\"\n                  slot=\"trigger\">\n                  <span class=\"icon\"><b-icon icon=\"plus\" /></span>\n                  <span>{{ $t('components.header.new') }}</span>\n                  <span class=\"icon\"><b-icon :icon=\"active ? 'caret-up' : 'caret-down'\" /></span>\n                </button>\n                <b-dropdown-item \n                  v-for=\"choice in go_to_new_choices\"\n                  v-bind:key=\"choice.resource_id\"\n                  aria-role=\"listitem\"\n                  v-on:click=\"goToNewPolymorphic(choice)\"\n                >\n                  {{ choice.label }}\n                </b-dropdown-item>\n              </b-dropdown>\n              <button \n                id=\"furet-ui-page-multi-entries-header-new\" \n                v-else\n                v-bind:disabled=\"readonly\"\n                class=\"button is-x2m-created is-small\" \n                v-on:click=\"goToNew\"\n              >\n                <span class=\"icon\"><b-icon icon=\"plus\" /></span>\n                <span>{{ $t('components.header.new') }}</span>\n              </button>\n            </div>\n            <slot name=\"actions\" v-bind:data=\"data\" />\n          </div>\n        </div>\n        <div class=\"level-right\">\n          <div class=\"level-item\">\n            <b-field grouped group-multiline>\n              <div class=\"control\" v-for=\"tag in tags\" v-if=\"tag.selected\" v-bind:key=\"tag.key\">\n                  <b-tag \n                    v-bind:class=\"['furet-ui-page-multi-entries-header-tag', tag.key]\" \n                    type=\"is-primary\" closable \n                    v-on:close=\"removeTag(tag)\">{{ $t(tag.label) }} </b-tag>\n              </div>\n              <div class=\"control\" v-for=\"filter in filters\" v-if=\"filter.values.length\" v-bind:key=\"filter.key + '-' + filter.mode + '-' + filter.opt\">\n                <b-taglist attached>\n                  <b-tag type=\"is-danger\" v-if=\"filter.mode == 'exclude'\"> ~ </b-tag>\n                  <b-tag type=\"is-dark\">{{ $t(filter.label) }}</b-tag>\n                  <b-tag \n                    type=\"is-primary\" \n                    closable \n                    v-for=\"value in filter.values\" \n                    v-bind:class=\"['furet-ui-page-multi-entries-header-filter', filter.key, value]\" \n                    v-on:close=\"removeFilter(filter.key, filter.mode, filter.opt, value)\" \n                    v-bind:key=\"value\">{{ value }} </b-tag>\n                </b-taglist>\n              </div>\n            </b-field>\n          </div>\n          <div class=\"level-item\" v-if=\"filters.length\" >\n            <b-autocomplete\n              v-model=\"filterSearch\"\n              v-bind:data=\"filteredDataArray\"\n              v-bind:placeholder=\"this.$i18n.t('components.header.search')\"\n              icon=\"search\"\n              v-on:select=\"updateFilters\"\n              clear-on-select\n              size=\"is-small\"\n            >\n              <template slot=\"empty\">{{ $t('components.header.notFound') }}</template>\n              <template slot-scope=\"props\">\n                {{ props.option.mode == 'exclude' ? ' ~ ' : '' }} <small>{{ $t(props.option.label) }} </small> : <strong>{{ props.option.value }}</strong>\n              </template>\n            </b-autocomplete>\n          </div>\n          <div class=\"level-item buttons\">\n            <a id=\"furet-ui-page-multi-entries-header-refresh\" class=\"button is-small\" v-on:click=\"refresh\"><b-icon icon=\"redo\" /></a>\n            <a id=\"furet-ui-page-multi-entries-header-tags\" v-if=\"tags.length\" class=\"button is-small\" v-on:click.stop=\"tag_list_open = ! tag_list_open\">\n              <b-icon :icon=\"tag_list_open ? 'arrow-circle-up' : 'arrow-circle-down'\" />\n            </a>\n          </div>\n        </div>\n      </div>\n      <b-collapse class=\"panel is-pulled-right\" v-bind:open.sync=\"tag_list_open\">\n        <b-taglist>\n          <b-tag v-for=\"tag in tags\" v-bind:key=\"tag.key\" v-bind:class=\"['is-small', tag.selected ? '': 'has-text-weight-bold']\" >\n            <a \n              v-bind:class=\"['furet-ui-page-multi-entries-header-toggle-tag', tag.key]\" \n              v-on:click.stop=\"toggleTag(tag)\">{{ $t(tag.label) }}</a>\n          </b-tag>\n        </b-taglist>\n      </b-collapse>\n    </header>\n  `,\n  extend: ['furet-ui-page-multi-entries-header'],\n});\n\ndefineComponent('furet-ui-page-o2m-page-header', {\n  template: `\n    <header id=\"header_page\">\n      <div class=\"buttons is-grouped has-addons\">\n        <a v-if=\"show_save\" class=\"button is-small\" v-on:click=\"goToPage\">\n          <span class=\"icon\">\n            <b-icon icon=\"times\" />\n          </span>\n          <span>{{ $t('components.header.cancel') }}</span>\n        </a>\n        <a v-else class=\"button is-small\" v-on:click=\"goToList\">\n          <span class=\"icon\">\n            <b-icon icon=\"arrow-left\" />\n          </span>\n          <span>{{ $t('components.header.return') }}</span>\n        </a>\n        <a v-if=\"prevous_target\" class=\"button is-small\" v-on:click=\"goToPreviousPage\">\n          <span class=\"icon\">\n            <b-icon icon=\"page-previous\" />\n          </span>\n          <span>{{ $t('components.header.previous') }}</span>\n        </a>\n        <a v-if=\"next_target\" class=\"button is-small\" v-on:click=\"goToNextPage\">\n          <span class=\"icon\">\n            <b-icon icon=\"page-next\" />\n          </span>\n          <span>{{ $t('components.header.next') }}</span>\n        </a>\n        <div v-if=\"can_go_to_new\">\n          <b-dropdown \n            :triggers=\"['hover']\" \n            v-if=\"go_to_new_choices.length\"\n            v-bind:disabled=\"readonly\"\n          >\n            <button \n              class=\"button is-x2m-created is-small\" \n              slot-scope=\"{ active }\"\n              slot=\"trigger\">\n              <span class=\"icon\"><b-icon icon=\"plus\" /></span>\n              <span>{{ $t('components.header.new') }}</span>\n              <span class=\"icon\"><b-icon :icon=\"active ? 'caret-up' : 'caret-down'\" /></span>\n            </button>\n            <b-dropdown-item \n              v-for=\"choice in go_to_new_choices\"\n              v-bind:key=\"choice.resource_id\"\n              aria-role=\"listitem\"\n              v-on:click=\"goToNewPolymorphic(choice)\"\n            >\n              {{ choice.label }}\n            </b-dropdown-item>\n          </b-dropdown>\n          <button v-else v-bind:disabled=\"readonly\" class=\"button is-x2m-created is-small\" v-on:click=\"goToNew\">\n            <span class=\"icon\">\n              <b-icon icon=\"plus\" />\n            </span>\n            <span>{{ $t('components.header.new') }}</span>\n          </button>\n        </div>\n        <button v-if=\"can_modify\" v-bind:disabled=\"readonly\" class=\"button is-x2m-updated is-small\" v-on:click=\"goToEdit\">\n          <span class=\"icon\">\n            <b-icon icon=\"pencil-alt\" />\n          </span>\n          <span>{{ $t('components.header.edit') }}</span>\n        </button>\n        <button v-if=\"show_save & data.__uuid !== undefined\" v-bind:disabled=\"can_save\" class=\"button is-x2m-created is-small\" v-on:click=\"save\">\n          <span class=\"icon\">\n            <b-icon icon=\"save\" />\n          </span>\n          <span>{{ $t('components.header.apply') }}</span>\n        </button>\n        <button v-if=\"show_save & data.__uuid === undefined\" v-bind:disabled=\"can_save\" class=\"button is-x2m-updated is-small\" v-on:click=\"save\">\n          <span class=\"icon\">\n            <b-icon icon=\"save\" />\n          </span>\n          <span>{{ $t('components.header.apply') }}</span>\n        </button>\n        <button v-if=\"can_delete\" v-bind:disabled=\"readonly\" class=\"button is-x2m-deleted is-small\" v-on:click=\"deleteEntry\">\n          <span class=\"icon\">\n            <b-icon icon=\"trash\" />\n          </span>\n          <span>{{ $t('components.header.delete') }}</span>\n        </button>\n        <slot name=\"head_actions\" v-bind:data=\"data\" />\n      </div>\n    </header>\n  `,\n  extend: ['furet-ui-header-page'],\n});\n\n/**\n * furet-ui-form-field-one2many component is used to manage relationship one2many on form\n * resource (``furet-ui-resource-form``).\n *\n * Extend Mixins:\n *  * @see ``furet-ui-list-field-common``\n *\n * @example\n *  <furet-ui-form-field-one2many\n *    :config=\"aConfigObject\"\n *    :data=\"aDataObject\"\n *    :resource=\"aResourceObject\"/>\n *\n * @mixes <furet-ui-list-field-common>\n *\n * @param {Object} config - A config object to manage the behaviour of the component\n * @param {Object} data - An object that contains data to display. The key to use\n *                        in set in the `config.key`\n * @param {Object} resource - A resource object used to properly bind data with parents\n *                            tags and manage reactivity.\n *\n * ``config`` Object contains\n * @param {String} name - the key to use in the ``data`` object where is store the value\n * @param {String} model - A model name, needed to display the data\n * @param {Integer} resource - Id of the resource to used\n */\ndefineComponent(\"furet-ui-form-field-one2many\", {\n  template: `\n    <furet-ui-form-field-common-tooltip-field\n      v-bind:resource=\"resource\"\n      v-bind:data=\"data\"\n      v-bind:config=\"config\"\n    >\n      <furet-ui-form-field-resource-manager\n        ref=\"manager\"\n        v-bind:id=\"config.resource\"\n        v-bind:x2m_resource=\"resource\"\n        v-bind:isReadonly=\"isReadonly\"\n        v-bind:config=\"x2mconfig\"\n        v-bind:value=\"value\"\n\n        v-on:add=\"o2m_add\"\n        v-on:revert=\"o2m_revert\"\n        v-on:update=\"o2m_update\"\n        v-on:delete=\"o2m_delete\"\n\n        v-on:modify-state=\"modifyState\"\n      />\n    </furet-ui-form-field-common-tooltip-field>\n  `,\n  extend: [\"furet-ui-form-field-common\"],\n  prototype: {\n    inject: ['registryRefreshCallback', 'updateModifyState'],\n    computed: {\n      x2mconfig () {\n        if (this.config.multi_header_component_name === undefined) {\n          this.config.multi_header_component_name = 'furet-ui-page-o2m-list-header';\n        }\n        if (this.config.page_header_component_name === undefined) {\n          this.config.page_header_component_name = 'furet-ui-page-o2m-page-header';\n        }\n        this.config.pagination_size = 'is-small';\n        return this.config;\n      },\n    },\n    methods: {\n      addState(actions, state) {\n        return [Object.assign({}, actions.pks, { __x2m_state: state})];\n      },\n      o2m_revert(actions) {\n        const newvalue = [];\n        const changes = {};\n        changes[actions.model] = {};\n        if (actions.uuid){\n          newvalue.push({ __revert: true, uuid: actions.uuid });\n          changes[actions.model][\"new\"] = {};\n          changes[actions.model][\"new\"][actions.uuid] = {\"__revert\": true};\n        } else {\n          changes[actions.model][pk2string(actions.pks)] = {\"__revert\": true};\n          newvalue.push(Object.assign({ __revert: true}, actions.pks));\n        }\n        this.updateValue(newvalue, changes);\n      },\n      o2m_add(actions) {\n        const newvalue = [];\n        newvalue.push({ __x2m_state: \"ADDED\", uuid: actions.uuid });\n        this.updateValue(newvalue, actions.changes);\n      },\n      o2m_update(actions) {\n        this.updateValue(this.addState(actions, \"UPDATED\"), actions.changes);\n      },\n      o2m_delete(actions) {\n        const data = {};\n        data[actions.model] = {};\n        const pks = pk2string(actions.pks);\n        data[actions.model][pks] = Object.assign({__change_state: \"delete\"}, actions.pks);\n        this.updateValue(this.addState(actions, \"DELETED\"), data);\n      },\n      refresh () {\n        this.$refs.manager.$refs.resource.refresh()\n      },\n      modifyState (state) {\n        this.updateModifyState(state)\n      },\n    },\n    mounted () {\n      this.registryRefreshCallback(this.refresh);\n    },\n  }\n});\nfields.form.one2many = \"furet-ui-form-field-one2many\";\n","/**\nThis file is a part of the FuretUI project\n\n   Copyright (C) 2020 Pierre Verkest <pierrevekrest84@gmail.com>\n\nThis Source Code Form is subject to the terms of the Mozilla Public License,\nv. 2.0. If a copy of the MPL was not distributed with this file,You can\nobtain one at http://mozilla.org/MPL/2.0/.\n**/\nimport { defineComponent } from \"../../factory\";\nimport { fields } from \"../fields\";\nimport { RelationShipX2MList, RelationShipX2MThumbnail } from \"./common\";\n\n/**\n * furet-ui-field-many2many-common component is a mixin used to manage relationship many2one\n *\n * @mixin\n *\n * @param {Object} config - A config object to manage the behaviour of the component\n * @param {Object} data - An object that contains data to display. The key to use\n *                        in set in the `config.key`\n * @param {Object} resource - A resource object used to properly bind data with parents\n *                            tags and manage reactivity.\n *\n * ``config`` Object contains\n * @param {String} model - A model name, needed to display the data\n * @param {String} display - An evaluate string to display the entry\n */\ndefineComponent(\"furet-ui-field-many2many-common\", {\n  prototype: {\n    computed: {\n      values() {\n        const res = [];\n        const display = this.config.display;\n        const model = this.config.model;\n        if (this.value === null) {\n          return [];\n        }\n        this.value.forEach((pk) => {\n          const relation = this.getEntry(model, pk);\n          res.push({\n            pk,\n            label: this.format(display, relation),\n            relation,\n          });\n        });\n        return res;\n      },\n    },\n    methods: {\n      openResource(value) {\n        const params = { code: this.$route.params.code, menuId: 0, id: 0 };\n        if (this.config.menu) params.menuId = this.config.menu;\n        if (this.config.resource) {\n          const query = { mode: \"form\", pks: JSON.stringify(value.pk) };\n          params.id = this.config.resource;\n          this.pushInBreadcrumb();\n          this.$router.push({ name: \"resource\", params, query });\n        }\n      },\n    },\n  },\n});\n\n/**\n * furet-ui-list-field-many2many component is used to manage relationship many2many on list\n * resource (``furet-ui-resource-list``).\n *\n * Extend Mixins:\n *  * @see ``furet-ui-list-field-common``\n *  * @see ``furet-ui-field-relationship``\n *\n * @example\n *  <furet-ui-list-field-many2many\n *    :config=\"aConfigObject\"\n *    :data=\"aDataObject\"\n *    :resource=\"aResourceObject\"/>\n *\n * @mixes <furet-ui-list-field-common>, <furet-ui-field-relationship>\n *\n * @param {Object} config - A config object to manage the behaviour of the component\n * @param {Object} data - An object that contains data to display. The key to use\n *                        in set in the `config.key`\n * @param {Object} resource - A resource object used to properly bind data with parents\n *                            tags and manage reactivity.\n *\n * ``config`` Object contains\n * @param {String} name - the key to use in the ``data`` object where is store the value\n * @param {String} model - A model name, needed to display the data\n * @param {String} display - An evaluate string to display the entry\n */\ndefineComponent(\"furet-ui-list-field-many2many\", {\n  template: RelationShipX2MList,\n  extend: [\n    \"furet-ui-list-field-common\",\n    \"furet-ui-field-relationship\",\n    \"furet-ui-field-many2many-common\",\n  ],\n});\nfields.list.many2many = \"furet-ui-list-field-many2many\";\n\ndefineComponent(\"furet-ui-thumbnail-field-many2many\", {\n  template: RelationShipX2MThumbnail,\n  extend: [\n    \"furet-ui-thumbnail-field-common\",\n    \"furet-ui-field-relationship\",\n    \"furet-ui-field-many2many-common\",\n  ],\n});\nfields.thumbnail.many2many = \"furet-ui-thumbnail-field-many2many\";\n\n/**\n * furet-ui-form-field-many2many-tags component is used to manage relationship many2many on form\n * resource (``furet-ui-resource-form``).\n *\n * Extend Mixins:\n *  * @see ``furet-ui-list-field-common``\n *\n * @example\n *  <furet-ui-form-field-many2many-tags\n *    :config=\"aConfigObject\"\n *    :data=\"aDataObject\"\n *    :resource=\"aResourceObject\"/>\n *\n * @mixes <furet-ui-list-field-common>\n *\n * @param {Object} config - A config object to manage the behaviour of the component\n * @param {Object} data - An object that contains data to display. The key to use\n *                        in set in the `config.key`\n * @param {Object} resource - A resource object used to properly bind data with parents\n *                            tags and manage reactivity.\n *\n * ``config`` Object contains\n * @param {String} name - the key to use in the ``data`` object where is store the value\n * @param {String} model - A model name, needed to display the data\n * @param {Integer} resource - Id of the resource to used\n */\ndefineComponent(\"furet-ui-form-field-many2many-tags\", {\n  template: `\n    <furet-ui-form-field-common-tooltip-field\n      v-bind:resource=\"resource\"\n      v-bind:data=\"data\"\n      v-bind:config=\"config\"\n    >\n      <div v-if=\"isReadonly\" >\n        <div class=\"buttons\">\n          <b-button \n            v-on:click.stop=\"openResource(record)\"\n            v-for=\"record in values\"\n            :key=\"getKey(record)\"\n            type=\"is-info\"\n            size=\"is-small\"\n            >\n              <component \n                v-if=\"config.slot\"\n                v-bind:is=\"component_template\"\n                v-bind:config=\"config\"\n                v-bind:resource=\"resource\"\n                v-bind:data=\"data\"\n                v-bind:relation=\"get_slot_fields_for(record.pk)\"\n              />\n              <span v-else>{{ record.label }}</span>\n          </b-button>\n        </div>\n    </div>\n    <b-taginput\n      v-else\n      v-bind:value=\"values\"\n      v-bind:data=\"choices\"\n      autocomplete\n      ref=\"taginput\"\n      v-bind:placeholder=\"config.placeholder\"\n      v-bind:allow-new=\"false\"\n      v-bind:open-on-focus=\"false\"\n      v-bind:check-infinite-scroll=\"true\"\n      icon-pack=\"fa\"\n      type=\"is-info\"\n      v-bind:icon=\"config.icon\"\n      v-on:typing=\"onChange\"\n      v-on:add=\"onSelect\"\n      v-on:remove=\"onUnSelect\"\n      v-on:infinite-scroll=\"getMoreAsyncData\"\n    >\n      <template slot=\"empty\">\n        <span class=\"has-text-grey\">{{ $t('components.fields.relationship.not_found') }}</span>\n      </template>\n      <!-- template to display search results -->\n      <template slot-scope=\"searched\">\n        <component \n          v-if=\"config.slot\"\n          v-bind:is=\"component_template\"\n          v-bind:config=\"config\"\n          v-bind:resource=\"resource\"\n          v-bind:data=\"data\"\n          v-bind:relation=\"searched.option.relation\"\n        />\n        <span v-else>\n          {{ searched.option.label }}\n        </span>\n      </template>\n      <template #footer>\n        <span v-if=\"((page * config.limit) > total)\" class=\"has-text-grey\">{{ $t('components.fields.relationship.no_more') }}</span>\n      </template>\n      <template slot=\"selected\" slot-scope=\"props\">\n        <b-tag\n          v-for=\"(tag, index) in props.tags\"\n          v-bind:key=\"index\"\n          v-bind:type=\"getType(tag)\"\n          v-bind:tabstop=\"false\"\n          v-bind:closable=\"isClosable(tag)\"\n          v-on:close=\"$refs.taginput.removeTag(index, $event)\"\n        >\n          <component \n            v-if=\"config.slot\"\n            v-bind:is=\"component_template\"\n            v-bind:config=\"config\"\n            v-bind:resource=\"resource\"\n            v-bind:data=\"data\"\n            v-bind:relation=\"tag.relation\"\n          />\n          <span v-else>\n            {{ tag.label }}\n          </span>\n        </b-tag>\n      </template>\n    </b-taginput>\n  </furet-ui-form-field-common-tooltip-field>`,\n  extend: [\n    \"furet-ui-form-field-common\",\n    \"furet-ui-field-relationship\",\n    \"furet-ui-field-many2many-common\",\n    \"furet-ui-field-relationship-search\",\n  ],\n  prototype: {\n    methods: {\n      isClosable(value) {\n        if (\n          value.pk &&\n          value.pk.__x2m_state &&\n          value.pk.__x2m_state === \"UNLINKED\"\n        ) {\n          return false;\n        }\n        return true;\n      },\n      getType(value) {\n        if (\n          value.pk &&\n          value.pk.__x2m_state &&\n          value.pk.__x2m_state === \"UNLINKED\"\n        ) {\n          return \"\";\n        }\n        return \"is-primary\";\n      },\n      onUnSelect(value) {\n        const data = {};\n        const values = Object.assign([], this.value);\n        if (value.pk.__x2m_state && value.pk.__x2m_state === \"LINKED\") {\n          Object.assign(values[values.indexOf(value.pk)], {\n            __revert: true,\n          });\n        } else {\n          Object.assign(values[values.indexOf(value.pk)], {\n            __x2m_state: \"UNLINKED\",\n          });\n        }\n        this.updateValue(values, data);\n      },\n      onSelect(value) {\n        const data = {};\n        this.updateValue(\n          this.value.concat([\n            Object.assign({}, value.pk, { __x2m_state: \"LINKED\" }),\n          ]),\n          data\n        );\n      },\n    },\n  },\n});\nfields.form.many2manytags = \"furet-ui-form-field-many2many-tags\";\n","import { fields } from './fields';\nimport './common';\nimport './barcode';\nimport './boolean';\nimport './color';\nimport './datetime';\nimport './mail';\nimport './integer';\nimport './function';\nimport './json';\nimport './float';\nimport './decimal';\nimport './password';\nimport './rich-text';\nimport './selection';\nimport './statusbar';\nimport './string';\nimport './timestamp';\nimport './url';\n\n/* TO ADD\n * date\n * file\n * text\n * time\n */\n\nimport './relationship';\n\nimport { defineComponent } from '../factory';\n\ndefineComponent('furet-ui-unknown-field', {\n  template : `<div>Unknown Field <strong>{{config.type}}</strong></div>`,\n  prototype: {\n    props: ['config', 'data'],\n  }\n})\n\ndefineComponent('furet-ui-field', {\n  template : `\n    <component \n      v-bind:is=\"component\" \n      v-bind:resource=\"resource\" \n      v-bind:config=\"config\" \n      v-bind:data=\"data\"\n    />\n  `,\n  prototype: {\n    props: ['resource', 'config', 'data'],\n    computed: {\n      component () {\n        return (fields[this.resource.type] || {})[this.config.type] || 'furet-ui-unknown-field'\n      },\n    },\n  }\n})\n","/*\nThis file is a part of the FuretUI project\n\n   Copyright (C) 2017 Jean-Sebastien SUZANNE <jssuzanne@anybox.fr>\n   Copyright (C) 2019 Jean-Sebastien SUZANNE <jssuzanne@anybox.fr>\n\nThis Source Code Form is subject to the terms of the Mozilla Public License,\nv. 2.0. If a copy of the MPL was not distributed with this file,You can\nobtain one at http://mozilla.org/MPL/2.0/.\n*/\n\n// initial state\nexport const defaultState = {\n  appLoaded: false,\n  userName: \"\",\n  userTimeZone: \"Europe/Paris\",\n  authenticated: false,\n  root_menus: [],\n  user_menus: [],\n  previous_route: {},\n  left_menus: [],\n  isOpenLeft: false,\n  breadcrumb: [],\n  loginPage: \"password\",\n};\n\n// getters\nexport const getters = {\n  loggedIn(state) {\n    return state.authenticated;\n  },\n  isLoaded(state) {\n    return state.appLoaded;\n  },\n};\n\n// actions\nexport const actions = {};\n\n// mutations\nexport const mutations = {\n  PushBreadcrumb(state, resource) {\n    state.breadcrumb.push(resource);\n  },\n  ClearBreadcrumbFrom(state, index) {\n    state.breadcrumb.splice(index, state.breadcrumb.length - index);\n  },\n  PopBreadcrumb(state) {\n    state.breadcrumb.pop();\n  },\n  ClearBreadcrumb(state) {\n    state.breadcrumb = [];\n  },\n  SET_LOGIN_PAGE(state, loginPage) {\n    if (loginPage && loginPage.login_page)\n      state.loginPage = loginPage.login_page;\n  },\n  \"FURETUI LOADED\"(state) {\n    state.appLoaded = true;\n  },\n  LOGIN(state, action) {\n    state.authenticated = true;\n    if (action !== undefined && action.userName !== undefined) {\n      state.userName = action.userName;\n    }\n  },\n  LOGOUT(state) {\n    state.authenticated = false;\n    state.userName = \"\";\n  },\n  UPDATE_PREVIOUS_ROUTE(state, action) {\n    state.previous_route = action.route;\n  },\n  UPDATE_ROOT_MENUS(state, action) {\n    state.root_menus = action.menus;\n  },\n  UPDATE_USER_MENUS(state, action) {\n    state.user_menus = action.menus;\n  },\n  UPDATE_GLOBAL(state, action) {\n    // eslint-disable-next-line\n    for (const [key, value] of Object.entries(action)) {\n      state[key] = value;\n    }\n  },\n  OPEN_LEFT_MENU(state, value) {\n    state.isOpenLeft = value;\n  },\n  UPDATE_CURRENT_LEFT_MENUS(state, action) {\n    state.left_menus = action.menus;\n  },\n};\n\nexport default {\n  state: defaultState,\n  getters,\n  actions,\n  mutations,\n};\n","/*\nThis file is a part of the FuretUI project\n\n   Copyright (C) 2017 Jean-Sebastien SUZANNE <jssuzanne@anybox.fr>\n   Copyright (C) 2019 Jean-Sebastien SUZANNE <jssuzanne@anybox.fr>\n\nThis Source Code Form is subject to the terms of the Mozilla Public License,\nv. 2.0. If a copy of the MPL was not distributed with this file,You can\nobtain one at http://mozilla.org/MPL/2.0/.\n*/\nimport Vue from 'vue';\n\n// initial state\nexport const defaultState = {\n};\n\n// getters\nexport const getters = {\n};\n\n// actions\nexport const actions = {\n};\n\n// mutations\nexport const mutations = {\n  UPDATE_RESOURCES(state, action) {\n    action.definitions.forEach(definition => {\n      let updateDefinition = true;\n      if (state[definition.id] !== undefined) {\n        if (JSON.stringify(definition) === JSON.stringify(state[definition.id])) updateDefinition = false;\n      }\n      if (updateDefinition) Vue.set(state, String(definition.id), definition);\n    });\n  },\n  UPDATE_RESOURCE_TOGGLE_HIDDEN_COLUMN(state, action) {\n    state[action.id].headers.forEach(header => {\n      if (header.name == action.field) {\n        header['hidden-column'] = ! header['hidden-column']\n        Vue.set(state, action.id, Object.assign({}, state[action.id]))\n      }\n    });\n  },\n};\n\nexport default {\n  state: defaultState,\n  getters,\n  actions,\n  mutations,\n};\n","/*\nThis file is a part of the FuretUI project\n\n   Copyright (C) 2017 Jean-Sebastien SUZANNE <jssuzanne@anybox.fr>\n\nThis Source Code Form is subject to the terms of the Mozilla Public License,\nv. 2.0. If a copy of the MPL was not distributed with this file,You can\nobtain one at http://mozilla.org/MPL/2.0/.\n*/\n\nimport global from './global';\nimport data from './data';\nimport resource from './resource';\n// import browser from './browser';\n\nexport default {\n  global,\n  data,\n  resource,\n};\n","import Vue from \"vue\";\nimport Vuex from \"vuex\";\n\nimport modules from \"./modules\";\n\nVue.use(Vuex);\nconst debug = process.env.NODE_ENV !== \"production\";\n\nexport const storeDef = {\n  modules,\n  strict: debug\n};\n\nexport const createStore = () => new Vuex.Store(storeDef);\nexport default createStore;\n","import Vue from 'vue';\nimport Router from 'vue-router';\n\nVue.use(Router);\n\nexport const routes = [\n    {\n      name: 'homepage',\n      path: '/',\n      component: {\n        template: '<homepage />',\n      },\n      meta: { requiresAuth: false },\n    },\n    {\n      name: 'login',\n      path: '/login',\n      component: {\n        template: '<furet-ui-login />',\n      },\n      meta: { requiresAuth: false },\n    },\n    {\n      name: 'space',\n      path: '/space/:code/menu/:menuId',\n      component: {\n        template: `\n          <furet-ui-space \n            v-bind:code=\"$route.params.code\"\n            v-bind:menuId=\"$route.params.menuId\"\n          />`,\n      },\n      meta: { requiresAuth: true },\n      children: [\n        {\n          name: 'resource',\n          path: 'resource/:id',\n          component: {\n            template: `\n                <furet-ui-space-resource-manager v-bind:id=\"$route.params.id\" />\n            `,\n          },\n        }\n      ],\n    },\n];\n\nexport const createRouter = (store, routes) => {\n  const router = new Router({ routes });\n\n  router.beforeEach((to, from, next) => {\n    const proceed = () => {\n      if (store.state.global.appLoaded) {\n        if (to.matched.some(record => record.meta.requiresAuth)) {\n          if (!store.getters.loggedIn) {\n            next({ path: '/login', query: { redirect: to.fullPath } });\n          } else {\n            next();\n          }\n        } else {\n          next(); // make sure to always call next()!\n        }\n      }\n    }\n\n    if (!store.state.global.appLoaded) {\n      store.watch(\n        (state) => state.global.appLoaded,\n        (value) => {\n          if (value === true) {\n            proceed()\n          }\n        }\n      )\n    } else {\n      proceed()\n    }\n\n  });\n  return router;\n};\n\nexport default {\n  routes,\n  createRouter,\n};\n","import _ from 'underscore';\nimport moment from 'moment';\n\nexport default {\n  install(Vue, options) {\n    Vue.prototype.$dispatchAll = (datas) => {\n      const router = options.router;\n      const store = options.store;\n      const i18n = options.i18n;\n      const notify = Vue.prototype.$notify;\n\n      let type;\n      let process;\n      _.each(datas, data => {\n        if (data.type) {\n          switch (data.type) {\n            case 'UPDATE_LOCALES':\n              _.each(data.locales, locale => {\n                  i18n.setLocaleMessage(locale.locale, locale.messages)\n              });\n              break\n            case 'SET_LOCALE':\n              i18n.locale = data.locale;\n              moment.locale(data.locale);\n              if (data.timezone) {\n                store.commit('UPDATE_GLOBAL', {userTimeZone: data.timezone})\n              }\n              break\n            case 'UPDATE_ROUTE':\n              if (data.name) router.push({name: data.name, params: data.params, query: data.query});\n              else if (data.path) router.push({path: data.path});\n              break;\n            case 'NOTIFY':\n              delete data.type;\n              notify(data);\n              break;\n            case 'RELOAD':\n              location.reload();\n              break;\n            default:\n              type = data.type;\n              delete data.type;\n              process = data.process || 'commit';\n              store[process](type, data);\n          }\n        }\n      });\n    }\n  }\n}\n","import Vue from 'vue'\nimport axios from 'axios';\nimport Buefy from 'buefy';\nimport 'buefy/dist/buefy.css';\nimport Notifications from 'vue-notification';\nimport { sync } from 'vuex-router-sync';\nimport { i18n } from './i18n';\nimport { createComponents } from './components';\nimport { createStore } from './store';\nimport { createRouter, routes } from './router';\nimport PluginDispatch from \"./plugins/dispatch.js\";\n\nimport './styles.scss';\n\nVue.config.productionTip = false\nVue.use(Notifications);\nVue.use(Buefy, {defaultIconPack: 'fa'});\n\nexport const startFuretUI = (elementId, routes) => {\n  const elementExists = document.getElementById(elementId);\n  if (elementExists === null) return;\n  console.log(` ==> start furet ui on element #${elementId}`);\n  createComponents();\n  const store = createStore();\n  const router = createRouter(store, routes);\n\n  sync(store, router); // use vue-router with vuex\n    Vue.use(PluginDispatch, {router, store, i18n});\n  new Vue({\n    // el: '#furet-ui',\n    template: `\n      <div>\n        <app/>\n        <b-loading :is-full-page=\"true\" :active.sync=\"isLoading\"></b-loading>\n      </div>\n    `,\n    router,\n    store,\n    i18n,\n    data() {\n      return {\n          isLoading: true,\n      }\n    },\n    created () {\n      axios.get('furet-ui/initialize', this.$route.name)\n        .then((result) => {\n            this.$dispatchAll(result.data);\n            this.$store.commit('FURETUI LOADED');\n            this.isLoading = false;\n        })\n        .catch((error) => {\n          console.error('call initialize', error);\n        });\n    },\n  }).$mount(`#${elementId}`)\n}\nstartFuretUI('furet-ui', routes)\nexport default {\n    startFuretUI,\n};\n","import Vue from 'vue';\n\nconst components = {};\nconst componentNames = [];\n\nexport const defineComponent = (elementName, declaration) => {\n  let klass;\n  if (elementName in components) {\n    klass = components[elementName];\n  } else {\n    klass = {\n      template: undefined,\n      extend: [],\n      prototypes: [],\n    };\n    components[elementName] = klass;\n    componentNames.push(elementName);\n  }\n  if (declaration.template !== undefined) klass.template = declaration.template;\n  if (declaration.prototype !== undefined) {\n    klass.prototypes.push(declaration.prototype);\n  }\n  if (declaration.extend !== undefined) {\n    declaration.extend.forEach((extend) => {\n      klass.extend.push(extend);\n    });\n  }\n};\n\nconst getPrototypeFor = (elementName) => {\n  const component = components[elementName];\n  const prototypes = [];\n  if (component.extend.length !== 0) {\n    component.extend.forEach((otherElementName) => {\n      prototypes.push(...getPrototypeFor(otherElementName));\n    });\n  }\n  prototypes.push(...component.prototypes);\n  return prototypes;\n};\n\nexport const getComponentPrototype = (elementName) => {\n  const component = components[elementName];\n  const mixins = getPrototypeFor(elementName);\n  return {\n    template: component.template,\n    mixins,\n  };\n};\n\nexport const createComponents = () => {\n  componentNames.forEach((elementName) => {\n    Vue.component(elementName, (resolve) => {\n      resolve(getComponentPrototype(elementName));\n    });\n  });\n};\n\nexport default {\n    createComponents,\n}\n","/**\nThis file is a part of the FuretUI project\n\n   Copyright (C) 2017 Jean-Sebastien SUZANNE <jssuzanne@anybox.fr>\n\nThis Source Code Form is subject to the terms of the Mozilla Public License,\nv. 2.0. If a copy of the MPL was not distributed with this file,You can\nobtain one at http://mozilla.org/MPL/2.0/.\n**/\nimport {defineComponent} from '../factory'\nimport { debounce } from 'debounce';\n\n\n/**\n * Eval a value (that could be anything String / integer / null / undefined / bool)\n * and cast as a boolean or null.\n *\n * @param {any} value - A value to cast to boolean\n * @returns {Boolean?} return one of those values [true, false, null]\n *\n * Have a look to tests/unit/fields/boolean.spec.js for a complet list of\n * use case.\n */\nexport const safe_eval_boolean = value => {\n  if (value === null || value === undefined) {\n    return null;\n  }\n\n  // if dev use new String(\"\") or new Boolean(true) this give an object so\n  // we convert to its primitive type\n  if (\n    typeof value === \"object\" &&\n    [\"[object String]\", \"[object Boolean]\"].includes(toString.call(value))\n  ) {\n    value = value.valueOf();\n  }\n\n  if (typeof value === \"string\") {\n    if (\n      value.trim().toLowerCase() === \"null\" ||\n      value.trim().toLowerCase() === \"undefined\"\n    ) {\n      return null;\n    }\n    return [\"true\", \"t\", \"yes\", \"y\", \"on\", \"1\"].includes(\n      value.trim().toLowerCase()\n    );\n  }\n\n  if (typeof value === \"number\") {\n    return value === 1;\n  }\n\n  if (typeof value === \"boolean\") {\n    return value;\n  }\n\n  return false;\n};\n\nexport const safe_eval = (condition, fields, resource) => {\n    const now = Date.now(),\n          toDate = (v) => new Date(v),\n          selectors = Object.assign((resource.manager || {}).selectors || {}, resource.selectors || {}),\n          tabs = resource.tabs;\n    fields  // lint\n    selectors  // lint\n    tabs  // lint\n    now  // lint\n    toDate  // lint\n    let res = false;\n    try {\n        res = safe_eval_boolean(eval(condition));\n    } catch (e) {\n      console.log(e)\n    }\n    return res;\n}\n\nexport const listTemplate = `\n  <div>\n    <span v-if=\"isHidden\" />\n    <component \n      v-else-if=\"config.slot\" \n      v-bind:is=\"component_template\"\n      v-bind:config=\"config\"\n      v-bind:resource=\"resource\"\n      v-bind:data=\"data\"\n      v-bind:value=\"value\"\n    />\n    <span v-else>{{value}}</span>\n  </div>\n`\n\nexport const thumbnailTemplate = `\n  <furet-ui-thumbnail-field-common-tooltip-field\n    v-bind:resource=\"resource\"\n    v-bind:data=\"data\"\n    v-bind:config=\"config\"\n  >\n    <component \n      v-if=\"config.slot\" \n      v-bind:is=\"component_template\"\n      v-bind:config=\"config\"\n      v-bind:resource=\"resource\"\n      v-bind:data=\"data\"\n      v-bind:value=\"value\"\n    />\n    <span v-else>{{value}}</span>\n  </furet-ui-thumbnail-field-common-tooltip-field>\n`\n\ndefineComponent('furet-ui-list-field-common', {\n  prototype: {\n    props: ['resource', 'data', 'config'],\n    computed: {\n      value () {\n        return this.data[this.config.name] || '';\n      },\n      isHidden () {\n        if (this.config.hidden === undefined) return false;\n        return safe_eval(this.config.hidden, this.data || {}, this.resource);\n      },\n      component_template () {\n        return {\n          template: this.config.slot,\n          props: ['resource', 'data', 'config', 'value'],\n        }\n      }\n    },\n  }\n});\n\n\ndefineComponent('furet-ui-form-field-common-tooltip', {\n  template: `\n    <div v-if=\"isHidden\" />\n    <b-tooltip \n      v-bind:label=\"getTooltip\" \n      v-bind:position=\"tooltipPosition\"\n      v-bind:style=\"{'width': '100%'}\"\n      v-else\n    >\n      <slot />\n    </b-tooltip>`,\n  prototype: {\n    props: ['resource', 'data', 'config'],\n    computed: {\n      isHidden () {\n        if (this.config.hidden === undefined) return false;\n        return safe_eval(this.config.hidden, this.data || {}, this.resource);\n      },\n      getTooltip () {\n        return this.config.tooltip || '';\n      },\n      tooltipPosition () {\n        return this.config.tooltip_position || 'is-top';\n      },\n    },\n  },\n})\n\n\ndefineComponent('furet-ui-form-field-common-tooltip-field', {\n  template: `\n    <furet-ui-form-field-common-tooltip\n      v-bind:resource=\"resource\"\n      v-bind:data=\"data\"\n      v-bind:config=\"config\"\n    >\n      <b-field \n        v-bind:label=\"label\"\n        v-bind:type=\"getType\"\n        v-bind:message=\"getMessage\"\n        v-bind:style=\"{'width': 'inherit'}\"\n      >\n        <slot />\n      </b-field>\n    </furet-ui-form-field-common-tooltip>`,\n  extend: ['i18n-translate'],\n  prototype: {\n    props: ['resource', 'data', 'config'],\n    inject: ['partIsReadonly'],\n    computed: {\n      value () {\n        return this.data && this.data[this.config.name] || '';\n      },\n      label () {\n        return this.translate(this.config.label);\n      },\n      isReadonly () {\n        if (this.resource.readonly) return true;\n        if (this.partIsReadonly()) return true;\n        const readonlyParams = safe_eval(this.config.readonly, this.data || {}, this.resource);\n        if (this.config.writable) {\n          const writableParams = safe_eval(this.config.writable, this.data || {}, this.resource);\n          return readonlyParams && ! writableParams\n        }\n        return readonlyParams;\n      },\n      isRequired () {\n        if (this.isReadonly) return false;\n        return safe_eval(this.config.required, this.data || {}, this.resource);\n      },\n      getType () {\n        if (this.isRequired) {\n          if (this.value) return 'is-info';\n          return 'is-danger';\n        }\n        return '';\n      },\n      getMessage () {\n        if (this.isRequired) {\n          if (!this.value) return this.$i18n.t('components.fields.common.required');\n        }\n        return ''\n      },\n    },\n  },\n})\n\n\ndefineComponent('furet-ui-form-field-common-readonly', {\n  prototype: {\n    props: ['resource', 'data', 'config'],\n    inject: ['partIsReadonly'],\n    computed: {\n      isReadonly () {\n        if (this.resource.readonly) return true;\n        if (this.partIsReadonly()) return true;\n        const readonlyParams = safe_eval(this.config.readonly, this.data || {}, this.resource);\n        if (this.config.writable) {\n          const writableParams = safe_eval(this.config.writable, this.data || {}, this.resource);\n          return readonlyParams && ! writableParams\n        }\n        return readonlyParams;\n      },\n    },\n  },\n})\n\n\ndefineComponent('furet-ui-form-field-common', {\n  extend: ['furet-ui-form-field-common-readonly'],\n  prototype: {\n    inject: ['updateChangeState'],\n    computed: {\n      value () {\n        return this.data && this.data[this.config.name] || null;\n      },\n      isRequired () {\n        return safe_eval(this.config.required, this.data || {}, this.resource);\n      },\n      component_template () {\n        return {\n          template: this.config.slot,\n          props: ['resource', 'data', 'config', 'value'],\n        }\n      }\n    },\n    methods: {\n      updateValue: debounce(function(value, merge) {\n        const action = {\n          model: this.resource.model,\n          pk: this.resource.pks,\n          uuid: this.resource.uuid,\n          fieldname: this.config.name,\n          value,\n          merge\n        }\n        this.updateChangeState(action);\n      }, 200),\n    },\n  }\n});\n\n\ndefineComponent('furet-ui-thumbnail-field-common-tooltip-field', {\n  template: `\n    <furet-ui-form-field-common-tooltip\n      v-bind:resource=\"resource\"\n      v-bind:data=\"data\"\n      v-bind:config=\"config\"\n    >\n      <b-field \n        v-bind:label=\"label\"\n        v-bind:style=\"{'width': 'inherit'}\"\n      >\n        <slot />\n      </b-field>\n    </furet-ui-form-field-common-tooltip>`,\n  extend: ['i18n-translate'],\n  prototype: {\n    props: ['resource', 'data', 'config'],\n    computed: {\n      label () {\n        return this.translate(this.config.label);\n      },\n    },\n  },\n})\n\ndefineComponent('furet-ui-thumbnail-field-common', {\n  prototype: {\n    props: ['resource', 'data', 'config'],\n    computed: {\n      value () {\n        return this.data && this.data[this.config.name] || null;\n      },\n      component_template () {\n        return {\n          template: this.config.slot,\n          props: ['resource', 'data', 'config', 'value'],\n        }\n      }\n    },\n  }\n});\n","/**\nThis file is a part of the FuretUI project\n\n   Copyright (C) 2017 Jean-Sebastien SUZANNE <jssuzanne@anybox.fr>\n\nThis Source Code Form is subject to the terms of the Mozilla Public License,\nv. 2.0. If a copy of the MPL was not distributed with this file,You can\nobtain one at http://mozilla.org/MPL/2.0/.\n**/\nimport Vue from \"vue\";\nimport _ from 'underscore';\n\nexport const pk2string = (pk) => {\n    const keys = _.sortBy(_.keys(pk));\n    const res = [];\n    keys.forEach(key => {\n        if (key !== '__x2m_state') res.push([key, pk[key]]);\n    });\n    return JSON.stringify(res)\n}\n\nexport const update_change_object = (state_changes, action) => {\n  const changes = Object.assign({}, state_changes);\n  if (action.merge !== undefined) {\n    _.each(_.keys(action.merge), model => {\n      if (changes[model] === undefined) changes[model] = {};\n      _.each(_.keys(action.merge[model]), pk => {\n        if (changes[model][pk] === undefined) changes[model][pk] = {}\n        if (pk === 'new') {\n          if (changes[model].new === undefined) changes[model].new = {}\n          _.each(_.keys(action.merge[model].new), uuid => {\n            if (changes[model].new[uuid] === undefined) changes[model].new[uuid] = {};\n            if (action.merge[model].new[uuid].__revert === true) changes[model].new[uuid] = {};\n            Object.assign(changes[model].new[uuid], action.merge[model].new[uuid]);\n          });\n        } else {\n          if (action.merge[model][pk].__revert === true) changes[model][pk] = {};\n          Object.assign(changes[model][pk], action.merge[model][pk])\n        }\n      });\n    })\n  }\n  if (changes[action.model] == undefined) changes[action.model] = {}\n  let ref_key = null;\n  if (action.uuid != null) {\n    if (changes[action.model].new == undefined) changes[action.model].new = {};\n    if (changes[action.model].new[action.uuid] == undefined)\n      changes[action.model].new[action.uuid] = {};\n    ref_key = changes[action.model].new[action.uuid];\n  } else {\n    const pk = pk2string(action.pk);\n    if (changes[action.model][pk] == undefined) changes[action.model][pk] = {};\n    ref_key = changes[action.model][pk];\n  }\n  if (Array.isArray(ref_key[action.fieldname]) && Array.isArray(action.value)) {\n    _.each(action.value, val => {\n      const copy_val =  Object.assign({}, val);\n      delete copy_val.__revert;\n      delete copy_val.__x2m_state;\n      const res = ref_key[action.fieldname].filter(v => _.isMatch(v, copy_val));\n      const index = ref_key[action.fieldname].indexOf(res[0]);\n      if(res.length === 1 && index > -1){\n        ref_key[action.fieldname][index] = Object.assign(\n            ref_key[action.fieldname][index], val\n        );\n      } else {\n        ref_key[action.fieldname].push(val);\n      }\n    });\n\n    ref_key[action.fieldname] = ref_key[action.fieldname].filter(\n      element => element.__revert !== true\n    );\n  } else {\n    ref_key[action.fieldname] = action.value;\n  }\n  return changes\n}\n\nexport const defaultState = {\n    data: {},\n    changes: {},\n}\n\n// getters\nexport const getters = {\n  get_entry: (state) => (model, pk) => {\n    const key = pk2string(pk)\n    const data = (state.data[model] || {})[key] || {};\n    const change = {};\n    if ((state.changes[model] || {})[key]) {\n      if (state.changes[model][key].__revert !== true || Object.keys(state.changes[model][key]).length > 1){\n        Object.assign(change, {__change_state: \"update\"}, state.changes[model][key]);\n      }\n    } \n    return Object.assign({}, data, change);\n  },\n  get_new_entry: (state) => (model, uuid) => {\n    const change = ((state.changes[model] || {}).new || {})[uuid] || {};\n    if (change.__revert !== true || Object.keys(change).length > 1){\n      return Object.assign({__uuid: uuid, __change_state: \"create\"}, change);\n    } else {\n      return {};\n    }\n  },\n  get_new_entries: (state) => (model) => {\n    const res = [];\n    Object.entries((state.changes[model] || {}).new || {}).forEach(\n      ([uuid, entry]) => {\n        if (entry.__revert !== true || Object.keys(entry).length > 1){\n          res.push(\n            Object.assign({}, entry, {\n              __uuid: uuid,\n              __change_state: \"create\"\n            })\n          );\n        }\n      }\n    );\n    return res;\n  }\n};\n\n// actions\nexport const actions = {\n};\n\n// mutations\nexport const mutations = {\n    'UPDATE_DATA'(state, action) {\n        const data = Object.assign({}, state.data)\n        if (data[action.model] == undefined) data[action.model] = {};\n        const pk = pk2string(action.pk)\n        data[action.model][pk] = Object.assign({}, data[action.model][pk], action.data);\n        state.data = data;\n    },\n    'DELETE_DATA'(state, action) {\n        const pks = pk2string(action.pks);\n        if (state.data[action.model]){\n            Vue.delete(state.data[action.model], pks);\n        }\n    },\n    'UPDATE_CHANGE'(state, action) {\n        state.changes = update_change_object(state.changes, action)\n    },\n    'CLEAR_CHANGE'(state) {\n        state.changes = {};\n    },\n    'CLEAR_DATA'(state) {\n        state.data = {};\n        state.changes = {};\n    },\n};\n\nexport default {\n  state: defaultState,\n  getters,\n  actions,\n  mutations\n}\n","/**\nThis file is a part of the FuretUI project\n\n   Copyright (C) 2017 Jean-Sebastien SUZANNE <jssuzanne@anybox.fr>\n\nThis Source Code Form is subject to the terms of the Mozilla Public License,\nv. 2.0. If a copy of the MPL was not distributed with this file,You can\nobtain one at http://mozilla.org/MPL/2.0/.\n**/\nimport axios from \"axios\";\nimport { defineComponent } from \"../../factory\";\nimport { pk2string } from \"../../../store/modules/data\";\nimport { debounce } from \"debounce\";\n\nconst safe_eval = (style, fields) => {\n  fields; // lint\n  return eval(style);\n};\n\n/**\n * furet-ui-field-relationship component is a mixin used to manage relationship to add\n * helper:\n *\n *   * format: function to display an entry of the relationship\n *   * openResource: strategie to open the resource as the main resource\n *   * getKey: transform primary key to string\n *   * getStyle: return a style string for ``a`` tag\n *\n * added injection:\n *   * getEntry\n *   * pushInBreadcrumb\n *\n * @mixin\n *\n * @param {Object} config - A config object to manage the behaviour of the component\n * @param {Object} data - An object that contains data to display. The key to use\n *                        in set in the `config.key`\n * @param {Object} resource - A resource object used to properly bind data with parents\n *                            tags and manage reactivity.\n *\n * ``config`` Object contains\n * @param {String} name - the key to use in the ``data`` object where is store the value\n * @param {String} model - A model name, needed to display the data\n * @param {String} display - An evaluate string to display the entry\n */\ndefineComponent(\"furet-ui-field-relationship\", {\n  prototype: {\n    inject: [\"getEntry\", \"pushInBreadcrumb\"],\n    computed: {\n      slot_fields() {\n        const value = this.data[this.config.name] || \"\";\n        return this.get_slot_fields_for(value);\n      },\n      component_template () {\n        return {\n          template: this.config.slot,\n          props: ['resource', 'data', 'config', 'relation'],\n        }\n      }\n    },\n    methods: {\n      get_slot_fields_for(value) {\n        if (value) {\n          const model = this.config.model;\n          return this.getEntry(model, value);\n        } else return {};\n      },\n      format(display, fields) {\n        return safe_eval(display, fields);\n      },\n      getKey(value) {\n        return pk2string(value.pk);\n      },\n      getStyle(value) {\n        let style = \"\";\n        if (this.config.style !== undefined) {\n          const data = this.getEntry(this.config.model, value.pk);\n          style = safe_eval(this.config.style, data, {});\n        }\n        return style;\n      },\n      openResource(value) {\n        const params = { code: this.$route.params.code, menuId: 0, id: 0 };\n        if (this.config.menu) params.menuId = this.config.menu;\n        if (this.config.resource) {\n          const query = { mode: \"form\", pks: JSON.stringify(value) };\n          params.id = this.config.resource;\n          this.pushInBreadcrumb();\n          this.$router.push({ name: \"resource\", params, query });\n        }\n      },\n    },\n  },\n});\n\nexport const RelationShipX2MList = `\n  <div>\n    <span v-if=\"isHidden\" />\n    <div v-else>\n      <span \n        v-for=\"value in values\"\n        class=\"tag\" \n        v-bind:key=\"getKey(value)\"\n        v-bind:style=\"getStyle(value)\"\n      >\n        <a v-if=\"config.slot\" v-on:click.stop=\"openResource(value)\">\n          <component \n            v-bind:is=\"component_template\"\n            v-bind:config=\"config\"\n            v-bind:resource=\"resource\"\n            v-bind:data=\"data\"\n            v-bind:relation=\"get_slot_fields_for(value.pk)\"\n          />\n        </a>\n        <a v-else v-on:click.stop=\"openResource(value)\">{{value.label}}</a>\n      </span>\n    </div>\n  </div>`;\n\nexport const RelationShipX2MThumbnail = `\n  <furet-ui-thumbnail-field-common-tooltip-field\n    v-bind:resource=\"resource\"\n    v-bind:data=\"data\"\n    v-bind:config=\"config\"\n  >\n    <span \n      v-for=\"value in values\"\n      class=\"tag\" \n      v-bind:key=\"getKey(value)\"\n      v-bind:style=\"getStyle(value)\"\n    >\n      <a v-if=\"config.slot\" v-on:click.stop=\"openResource(value)\">\n        <component \n          v-bind:is=\"component_template\"\n          v-bind:config=\"config\"\n          v-bind:resource=\"resource\"\n          v-bind:data=\"data\"\n          v-bind:relation=\"get_slot_fields_for(value.pk)\"\n        />\n      </a>\n      <a v-else v-on:click.stop=\"openResource(value)\">{{value.label}}</a>\n    </span>\n  </furet-ui-thumbnail-field-common-tooltip-field>`;\n\ndefineComponent(\"furet-ui-field-relationship-search\", {\n  prototype: {\n    data() {\n      return {\n        pks: [],\n        page: 0,\n        total: 0,\n        isFetching: false,\n        tmp_value: null,\n      };\n    },\n    computed: {\n      choices() {\n        const res = [];\n        this.pks.forEach((pk) => {\n          const relation = this.getEntry(this.config.model, pk);\n          res.push({\n            pk,\n            label: this.format(this.config.display, relation),\n            relation,\n          });\n        });\n        return res;\n      },\n    },\n    methods: {\n      beforeOnChange() {\n        /** Method to overwrite in order to\n         * clear current value before searching things.\n         */\n      },\n      onChange: debounce(function(value) {\n        this._onChange(value);\n      }, 200),\n      getMoreAsyncData: debounce(function () {\n        this._onChange(this.tmp_value)\n      }, 250),\n      _onChange(value) {\n        this.beforeOnChange();\n        if ((this.tmp_value !== value) || (!value.length)) {\n          this.tmp_value = value;\n          this.pks = [];\n          this.page = 0;\n          this.total = 0;\n        }\n        if (this.page * this.config.limit > this.total) {\n          return\n        }\n        const params = {\n          \"context[model]\": this.config.model,\n          \"context[fields]\": this.config.fields.toString(),\n          limit: this.config.limit,\n          offset: this.page * this.config.limit,\n        };\n        this.config.filter_by.forEach((filter) => {\n          params[`filter[${filter}][ilike]`] = value;\n        });\n        if (this.value && Array.isArray(this.value) && this.value.length > 0) {\n          const pks = this.config.remote_columns.join(\":\");\n          const values = this.value\n            .map((val) => {\n              return this.config.remote_columns.map(key => {\n                return val[key]\n              }).join(\":\");\n            })\n            .join(\",\");\n          if (values) params[`~primary-keys[${pks}]`] = values;\n        }\n        this.isFetching = true\n        axios\n          .get(`/furet-ui/resource/${this.resource.id}/crud`, { params })\n          .then((response) => {\n            this.$dispatchAll(response.data.data);\n            response.data.pks.forEach((item) => this.pks.push(item));\n            this.page++;\n            this.total = response.data.total;\n          })\n          .catch((/* error */) => {\n            // console.error(error);\n          })\n          .finally(() => {\n            this.isFetching = false\n          });\n      }\n    },\n  },\n});\n","import _ from 'underscore';\nimport { defineComponent } from '../factory';\nimport { safe_eval } from '../fields/common';\n\ndefineComponent('furet-ui-helper-mixin', {\n  prototype: {\n    props: ['resource', 'data', 'config'],\n    inject: ['partIsReadonly'],\n    computed: {\n      isReadonly () {\n        return this.getIsReadonly()\n      },\n      isHidden () {\n        if (this.config.hidden == undefined) return false;\n        return safe_eval(this.config.hidden, this.data || {}, this.resource);\n      },\n    },\n    methods: {\n      getIsReadonly () {\n        if (this.resource.readonly) return true;\n        if (this.partIsReadonly()) return true;\n        const readonlyParams = safe_eval(this.config.readonly, this.data, this.resource);\n        if (this.config.writable) {\n          const writableParams = safe_eval(this.config.writable, this.data, this.resource);\n          return (readonlyParams && !writableParams) ? true : false\n        }\n        return readonlyParams ? true: false;\n      },\n    },\n    provide: function () {\n      return {\n        partIsReadonly: this.getIsReadonly,\n      }\n    },\n  },\n})\n\ndefineComponent('furet-ui-fieldset', {\n  template: `\n    <fieldset v-if=\"!isHidden\" v-bind=\"config.props\">\n      <slot />\n    </fieldset>\n  `,\n  extend: ['furet-ui-helper-mixin'],\n})\n\ndefineComponent('furet-ui-tabs', {\n  template: `\n    <b-tabs \n      v-if=\"!isHidden\" \n      ref=\"tabs\" \n      v-model=\"resource.tabs[config.name]\" \n      v-bind=\"config.props\"\n    >\n      <slot />\n    </b-tabs>\n  `,\n  extend: ['furet-ui-helper-mixin'],\n})\n\nexport const eval_counter = (value, fields) => {\n  if (_.keys(fields).length === 0) return 0\n  fields\n  if (!value) return 0;\n  let res = 0;\n  try {\n    res = eval(value);\n    if (typeof res === 'object') {\n      if (res.length !== undefined) res = res.length\n      else if (res.count !== undefined) res = res.count\n    } else if (res == undefined) res = 0;\n  } catch (e) {\n    // console.log(e)\n  }\n  return res;\n}\n\ndefineComponent('furet-ui-tab', {\n  prototype: {\n    functional: true,\n    render: function (createElement, context) {\n      const visible = (() => {\n        if (context.props.config.hidden == undefined) return true;\n        return !safe_eval(context.props.config.hidden, context.props.data, context.props.resource);\n      })();\n      const options = Object.assign({}, context.data)\n      options.attrs.visible= visible\n      const props = context.props\n      if (props.counter !== undefined) {\n        const counter = eval_counter(props.counter, context.props.data);\n        options.attrs.label = `${props.label} (${counter})`\n      }\n      return createElement( 'b-tab-item', options, [\n        createElement('furet-ui-div', {props}, context.children)\n      ])\n    },\n  },\n})\n\ndefineComponent('furet-ui-div', {\n  template: `\n    <div v-if=\"!isHidden\" v-bind=\"config.props\">\n      <slot />\n    </div>\n  `,\n  extend: ['furet-ui-helper-mixin'],\n})\n\ndefineComponent('furet-ui-selector', {\n  template: `\n    <furet-ui-form-field-common-tooltip-field\n      v-bind:resource=\"resource\"\n      v-bind:data=\"data\"\n      v-bind:config=\"config\"\n    >\n      <div class=\"field has-addons\" v-if=\"isHidden\">\n        <b-select \n          v-bind:disabled=\"isReadonly\" \n          icon-pack=\"fa\"\n          v-bind:icon=\"config.icon\"\n          v-model=\"resource.selectors[config.name]\"\n          expanded\n        >\n          <option \n            v-for=\"option in getSelections\"\n            v-bind:key=\"option.value\"\n            v-bind:value=\"option.value\"\n          >\n             {{ option.label }}\n          </option>\n        </b-select>\n      </div>\n    </furet-ui-form-field-common-tooltip-field>\n  `,\n  prototype: {\n    props: ['resource', 'data', 'config'],\n    computed: {\n      isHidden () {\n        if (this.config.hidden == undefined) return false;\n        return safe_eval(this.config.hidden, this.data, this.resource);\n      },\n      isReadonly () {\n        const readonlyParams = safe_eval(this.config.readonly, this.data, this.resource);\n        return readonlyParams;\n      },\n      getSelections () {\n        const colors = this.config.colors || {};\n        const res = []\n        res.push({label: '', value: null, color: null})\n        _.each(this.config.selections, (label, value) => {\n          res.push({value, label, color: colors[value]})\n        });\n        return res\n      },\n    },\n    methods: {\n      updateValue (value) {\n        this.resource.selectors[this.config.name] = value;\n      },\n    },\n  },\n})\n"],"sourceRoot":""}